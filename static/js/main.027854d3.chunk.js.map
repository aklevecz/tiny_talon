{"version":3,"sources":["services/handles.js","services/index.js","actions.js","containers/Status.js","graphics/Raptor.js","styles/styles.js","components/Scanning.js","containers/Scan.js","markers/RaptorMarker.js","graphics/Smiler.js","components/Map.js","components/Logout.js","animations/Loading.js","containers/MainView/WinView.js","containers/MainView/MapView.js","components/Modal.js","containers/MainView/Chodal.js","animations/SmallSmile.js","components/NoReady.js","containers/MainView/index.js","containers/Registration.js","services/utils.js","statuses.js","components/CMap.js","components/Series.js","components/Hunt.js","components/Message.js","containers/Creator.js","Fallback.js","containers/Rsvp.js","App.js","reducers/device.js","reducers/map.js","reducers/socket.js","reducers/ui.js","reducers/index.js","store.js","index.js"],"names":["fetchOptions","method","token","body","headers","Authorization","JSON","stringify","handleResponse","response","status","json","then","error","Error","handleError","dispatch","message","type","ERROR","tRequest","endPoint","headerData","localStorage","getItem","options","fetch","process","data","SET_TOKEN","RESPONSE","catch","getToken","hash","setItem","getAllSeries","createHunt","a","seriesId","email","id","console","log","sendSeries","cat","description","name","getPlace","hunt","place","createRsvp","releaseDevice","deviceInit","getState","window","requestIdleCallback","Fingerprint2","get","components","values","map","component","value","device","x64hash128","join","readyDelay","setTimeout","delay","dDelay","registerDevice","newToken","logOut","removeItem","socketWrap","io","path","transport","connectSocket","socket","on","found","markers","success","socketMessage","listenDispatcher","topic","payload","markersFound","newMarker","listenTo","listeners","includes","joinRoom","room","emit","connectSocketThenEmit","connect","state","getMarkers","useState","focus","setFocus","useEffect","toggleFocus","addEventListener","removeEventListener","style","display","Svg","styled","svg","Raptor","bg","fill","opacity","reff","stroke","ref","x","y","viewBox","d","strokeWidth","strokeMiterlimit","ScanContainer","div","ButtonContainer","Input","input","Button","button","SquareButton","MapContainer","ThankLine","Container","Message","Scanning","scanTainer","displayMessage","setMessage","raptorRef","useRef","text","current","raptor","getElementsByTagName","frame","startTime","Date","now","scale","chroma","counter","animate","cancelAnimationFrame","color","background","boxShadow","raptorOutline","colorMessage","diff","colorWave","Math","sin","bgWave","cos","rotateWave","transform","document","requestAnimationFrame","to","toUpperCase","connected","codeResponse","sendCode","code","listenToCodeResponse","listenToWin","listenToMarkers","match","meepo","RegExp","exec","params","height","greatPlaceStyle","position","width","left","top","borderRadius","textAlign","fontSize","fontWeight","cursor","userSelect","greatPlaceStyleHover","RaptorMarker","r","g","b","setBg","floor","onPointerDown","Smiler","rest","sf","lat","lng","ny","la","la2","Map","history","mapKey","places","reset","getElementById","length","center","getCenter","parseFloat","defaultZoom","bootstrapURLKeys","key","styles","whiteMap","onChildClick","push","m","i","Logout","logout","onClick","Loading","setOpacity","h1","Paragraph","setPlace","setAttribute","loop","autoplay","animationData","margin","yay","outof","completed","loading","connectToSocket","listenToNewMarker","listenToMarkerFound","modalStyle","bottom","right","backgroundColor","Modal","children","createPortal","ModalMessage","props","maxHeight","innerWidth","setMaxHeight","setBackground","setInput","inputRef","customMessage","marker","split","find","parseInt","goBack","location","pathname","sendIt","inputClean","replace","toLowerCase","retract","e","target","pointerEvents","onChange","onKeyPress","SmallSmile","NotReady","gridTemplateRows","ready","listenToReady","joinSeries","stopListening","off","disconnect","seriesReady","render","setError","register","test","String","validateEmail","keyCode","borderBottom","placeholder","border","Overlay","mapCoords","SF","NYC","MIDWAY","CMap","mapCenter","series","setScene","setSeriesCenter","userLocation","setUserLocation","setMarker","details","markerTypes","info","setInfo","navigator","geolocation","getCurrentPosition","p","coords","latitude","longitude","handleChange","Object","keys","defaultCenter","Select","select","Series","setSelectedSeries","setValues","toggle","setToggle","vals","setLoading","setSeries","optionValue","setOptionValue","getSeries","allSeries","submit","s","Hunt","getMarkersBySeries","listenToErrors","scene","selectedSeries","setMapCenter","seriesCenter","JwtDecode","H1","HuntParagraph","ErrorMessage","clearErrors","getAllUserSeries","availableSeries","setAvailableSeries","eMessage","errorMessage","filter","archived","deviceAuth","seriesName","setSeriesName","setResponse","className","ui","welcome","Status","Scan","Creator","MainView","Rsvp","Fallback","deviceState","action","jwtDecode","mapState","ppark","markerMap","socketState","initialState","reducer","combineReducers","store","createStore","reducers","applyMiddleware","thunk","next","href","AES","decrypt","toString","enc","Utf8","HttpsRedirect","hostname","disabled","protocol","ReactDOM","basename"],"mappings":"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","file":"static/js/main.027854d3.chunk.js","sourcesContent":["import { ERROR } from \"../actions\";\n\nexport const fetchOptions = (method, token, body) => ({\n  method,\n  headers: token\n    ? {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    : { \"Content-Type\": \"application/json\" },\n  body: method === \"POST\" ? JSON.stringify({ ...body }) : null\n});\n\nexport const handleResponse = response => {\n  if (response.status !== 200) {\n    return response.json().then(error => {\n      throw new Error(error.error);\n    });\n  }\n  return response.json();\n};\n\nexport const handleError = (error, dispatch) => {\n  const { message } = error;\n  dispatch({ type: ERROR, error: message });\n};\n","import { SET_TOKEN, RESPONSE, dDelay } from \"../actions\";\nimport { handleError, handleResponse, fetchOptions } from \"./handles\";\n\n// there could be a request thunk that delegates dispatches based on the response message\nexport const tRequest = (endPoint, headerData, dispatch) => {\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"POST\", token, headerData);\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\n    .then(handleResponse)\n    .then((data) => {\n      if (data.message === \"verified\" && token) {\n        dispatch({\n          type: SET_TOKEN,\n          token,\n        });\n      }\n      if (data.message === \"new_device_created\") {\n        dispatch({ type: SET_TOKEN, token: data.token });\n      }\n      dispatch({\n        type: RESPONSE,\n        response: data.message,\n      });\n    })\n    .catch((error) => handleError(error, dispatch));\n};\n\nexport const getToken = (dispatch, hash) => {\n  const endPoint = \"new_token\";\n  const options = fetchOptions(\"POST\", null, { hash });\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\n    .then(handleResponse)\n    .then((data) => {\n      const { token } = data;\n      localStorage.setItem(\"token\", token);\n      dispatch({ type: SET_TOKEN, token });\n    })\n    .catch((error) => handleError(error, dispatch));\n};\n\nexport const seriesReady = (dispatch, id) => {\n  const endPoint = \"series_ready\";\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"POST\", token, { id });\n  dispatch({ type: \"MAP_LOADING\" });\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\n    .then(handleResponse)\n    .then((data) => {\n      const { ready } = data;\n      if (ready) dispatch({ type: \"MAP_READY\" });\n      dispatch(dDelay(\"MAP_DONE\", 1000));\n    })\n    .catch((error) => handleError(error, dispatch));\n};\n\nexport const getSeries = (seriesId) => {\n  const endPoint = \"get_series\";\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"GET\", token, null);\n  return fetch(\n    `${process.env.REACT_APP_SERVER}/${endPoint}?seriesId=${seriesId}`,\n    options\n  )\n    .then(handleResponse)\n    .then((data) => data);\n};\nexport const getAllSeries = () => {\n  const endPoint = \"all_series\";\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"GET\", token, null);\n  return fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\n    .then(handleResponse)\n    .then((data) => data);\n};\n\nexport const getAllUserSeries = (dispatch) => {\n  const endPoint = \"all_user_series\";\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"GET\", token, null);\n  return fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\n    .then(handleResponse)\n    .then((data) => data)\n    .catch((error) => handleError(error, dispatch));\n};\n\nexport const createHunt = async ({ seriesId, email }) => {\n  const endPoint = \"create_hunt\";\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"POST\", token, { id: seriesId, email });\n  await fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\n    .then(handleResponse)\n    .then((data) => console.log(data))\n    .catch((error) => console.log(error));\n};\n\nexport const sendSeries = async ({ cat, description, name }) => {\n  const endPoint = \"send_series\";\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"POST\", token, { cat, description, name });\n  await fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\n    .then(handleResponse)\n    .then((data) => {\n      console.log(data);\n    });\n};\n\nexport const createMarker = async (marker) => {\n  const endPoint = \"create_marker\";\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"POST\", token, marker);\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\n    .then(handleResponse)\n    .then((data) => console.log(data));\n};\n\nexport const getPlace = async (hunt) => {\n  const endPoint = \"get_place\";\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"POST\", token, { id: hunt });\n  const place = await fetch(\n    `${process.env.REACT_APP_SERVER}/${endPoint}`,\n    options\n  )\n    .then(handleResponse)\n    .then((data) => data);\n  return place;\n};\n\nexport const createRsvp = async (seriesId) => {\n  const endPoint = \"create_rsvp\";\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"POST\", token, { seriesId });\n  return fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\n    .then(handleResponse)\n    .then((data) => data);\n};\n\nexport const releaseDevice = async () => {\n  const endPoint = \"release_device\";\n  const token = localStorage.getItem(\"token\");\n  const options = fetchOptions(\"DELETE\", token, null);\n  return fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\n    .then(handleResponse)\n    .then((data) => data);\n};\n","import io from \"socket.io-client\";\nimport Fingerprint2 from \"fingerprintjs2\";\nimport { tRequest, getToken } from \"./services\";\n\nexport const WELCOME = \"WELCOME\";\nexport const LOADING = \"LOADING\";\nexport const READY = \"READY\";\n\nexport const MAP_KEY = \"MAP_KEY\";\nexport const DEVICE_INIT = \"DEVICE_INIT\";\nexport const SET_TOKEN = \"SET_TOKEN\";\nexport const LOGOUT = \"LOGOUT\";\n\nexport const MAP_INIT = \"MAP_INIT\";\nexport const GET_MARKERS = \"GET_MARKERS\";\nexport const MARKER_FOUND = \"MARKER_FOUND\";\nexport const UPDATE_MAP = \"UPDATE_MAP\";\nexport const NEW_MARKER = \"NEW_MARKER\";\nexport const HUNT_COMPLETED = \"HUNT_COMPLETED\";\nexport const RESET = \"RESET\";\n\nexport const CONNECTING = \"CONNECTING\";\nexport const CONNECTED = \"CONNECTED\";\nexport const LISTEN_TO = \"LISTEN_TO\";\nexport const SOCKET_MESSAGE = \"SOCKET_MESSAGE\";\n\nexport const ERROR = \"ERROR\";\nexport const CLEAR_ERRORS = \"CLEAR_ERRORS\";\nexport const BAD_TOKEN = \"BAD_TOKEN\";\nexport const RESPONSE = \"RESPONSE\";\nexport const DEVICE_NOT_FOUND = \"DEVICE_NOT_FOUND\";\nexport const UNAUTHORIZED = \"UNAUTHORIZED\";\n\nexport const FOUND = \"FOUND\";\nexport const SEND_CODE = \"SEND_CODE\";\nexport const CODE_RESPONSE = \"CODE_RESPONSE\";\n\nexport const deviceInit = () => {\n  return async (dispatch, getState) => {\n    dispatch({ type: LOADING });\n    if (window.requestIdleCallback) {\n      requestIdleCallback(function () {\n        Fingerprint2.get(async function (components) {\n          var values = components.map(function (component) {\n            return component.value;\n          });\n          const device = Fingerprint2.x64hash128(values.join(\"\"), 31);\n          dispatch({ type: DEVICE_INIT, hash: device });\n          if (!getState().device.token) {\n            tRequest(\"auth_device\", { device }, dispatch);\n          }\n          dispatch(readyDelay(1));\n        });\n      });\n    } else {\n      setTimeout(function () {\n        Fingerprint2.get(async function (components) {\n          var values = components.map(function (component) {\n            return component.value;\n          });\n          const device = Fingerprint2.x64hash128(values.join(\"\"), 31);\n          dispatch({ type: DEVICE_INIT, hash: device });\n          if (!getState().device.token) {\n            tRequest(\"auth_device\", { device }, dispatch);\n          }\n          dispatch(readyDelay(1));\n        });\n      }, 500);\n    }\n  };\n};\n\nexport const authenticateDevice = () => {};\n\nexport const readyDelay = (delay) => {\n  return (dispatch) => {\n    setTimeout(() => dispatch({ type: READY }), delay);\n  };\n};\n\nexport const dDelay = (type, delay) => {\n  return (dispatch) => {\n    setTimeout(() => dispatch({ type }), delay);\n  };\n};\n\nexport const registerDevice = (email) => {\n  return async (dispatch, getState) => {\n    const {\n      device: { hash },\n    } = getState();\n    tRequest(\"register_device\", { email, hash }, dispatch);\n    dispatch({ type: LOADING });\n    dispatch(readyDelay(2000));\n  };\n};\n\nexport const newToken = () => {\n  return async (dispatch, getState) => {\n    const {\n      device: { hash },\n    } = getState();\n    getToken(dispatch, hash);\n    dispatch({ type: LOADING });\n    dispatch(readyDelay(2000));\n  };\n};\n\nexport const logOut = () => {\n  return async (dispatch) => {\n    localStorage.removeItem(\"token\");\n    dispatch({ type: LOGOUT });\n  };\n};\n\nfunction socketWrap(hash) {\n  return io(\n    `${process.env.REACT_APP_SOCKET_SERVER}?token=${localStorage.getItem(\n      \"token\"\n    )}&device=${hash}`,\n    { path: \"/socket.io\", transport: [\"websocket\"] }\n  );\n}\n\n// MARKERS SHOULD HAVE ITS OWN MIDDLEWARE\n// socket connection probably doesn't need to include these listeners\n// and they could be moved into the general listener scheme\nexport const connectSocket = () => {\n  return async (dispatch, getState) => {\n    const {\n      device: { hash },\n    } = getState();\n    const socket = await socketWrap(hash);\n    socket.on(\"error\", (error) => {\n      dispatch({ type: ERROR, error });\n    });\n    socket.on(\"found\", (found) => dispatch({ type: FOUND, name: found }));\n    socket.on(\"markers\", (markers) => {\n      if (!markers.success)\n        return dispatch({ type: ERROR, error: UNAUTHORIZED });\n      dispatch({ type: MAP_INIT, markers });\n    });\n    dispatch({ type: CONNECTED, socket });\n  };\n};\n\n// ** CONSOLIDATE OR SPLIT UP THE DIFFERENT BETWEEN LISTENERS ON SOCKET CONNECTION\n// AND SOCKET CONNECTIONS that are handled by the listendispatcher\nexport const socketMessage = (message) => {\n  return (dispatch) => {\n    dispatch({ type: SOCKET_MESSAGE, message });\n  };\n};\n\nconst listenDispatcher = (dispatch, topic, payload) => {\n  if (topic === \"markers\") {\n    dispatch({ type: MAP_INIT, markers: payload });\n  }\n  if (topic === \"marker_found\") {\n    dispatch({ type: MARKER_FOUND, markersFound: payload });\n  }\n  if (topic === \"new_marker\") {\n    dispatch({ type: NEW_MARKER, newMarker: payload });\n  }\n  if (topic === \"code_response\") {\n    dispatch({ type: CODE_RESPONSE, payload });\n  }\n  if (topic === \"ready\") {\n    dispatch({ type: \"MAP_READY\" });\n  }\n  // ** not great\n  if (payload === \"you_win\") {\n    dispatch({ type: \"HUNT_COMPLETED\" });\n  }\n};\n\nexport const listenTo = (topic) => {\n  return async (dispatch, getState) => {\n    const { listeners, socket } = getState().socket;\n    if (listeners.includes(topic)) {\n      return;\n    }\n    socket.on(topic, (message) => {\n      listenDispatcher(dispatch, topic, message);\n      dispatch(socketMessage(message));\n    });\n    dispatch({ type: LISTEN_TO, topic });\n  };\n};\n\nexport const joinRoom = (room) => {\n  const topic = \"join\";\n  return async (dispatch, getState) => {\n    getState().socket.socket.emit(topic, room);\n    dispatch({ type: LISTEN_TO, topic: `series_${room}` });\n  };\n};\n// ------\n// GET MARKERS SENDS THE SOCKET EVENT TO REQUEST MARKERS\nexport const getMarkers = (hunt) => {\n  return async (dispatch) => {\n    dispatch({ type: GET_MARKERS, hunt });\n  };\n};\n\nexport const getMarkersBySeries = (series) => {\n  return async (dispatch, getState) => {\n    getState().socket.socket.emit(\"get_markers_by_series\", series);\n  };\n};\n\nexport const connectSocketThenEmit = (emit, value) => {\n  return async (dispatch, getState) => {\n    const {\n      device: { hash },\n    } = getState();\n    const socket = await socketWrap(hash);\n    socket.on(\"error\", (error) => dispatch({ type: ERROR, error }));\n    dispatch({ type: CONNECTED, socket });\n    if (socket) {\n      socket.emit(emit, value);\n    }\n  };\n};\n\n// should probably be refactored into just thunk action\nexport const emit = (emit, value) => {\n  return async (dispatch, getState) => {\n    const { socket } = getState();\n    if (!socket.socket) {\n      dispatch(connectSocketThenEmit(emit, value));\n    } else {\n      socket.socket.emit(emit, value);\n    }\n  };\n};\n\nexport const stopListening = (hunt) => {\n  return async (dispatch, getState) => {\n    const {\n      socket: { socket },\n    } = getState();\n    socket.off();\n    socket.disconnect();\n    socket.emit(\"leave\", hunt);\n    dispatch({ type: \"CLEAR_LISTENERS\" });\n    dispatch({ type: \"DISCONNECT\" });\n    dispatch({ type: RESET });\n  };\n};\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { GET_MARKERS } from \"../actions\";\n\nconst Status = ({ getMarkers, hunt, status }) => {\n  const [focus, setFocus] = useState(null);\n\n  useEffect(() => {\n    if (focus) {\n      getMarkers(hunt);\n    }\n    const toggleFocus = () => {\n      setFocus(!focus);\n    };\n    window.addEventListener(\"focus\", toggleFocus, false);\n    window.addEventListener(\"blur\", toggleFocus, false);\n    return () => {\n      window.removeEventListener(\"focus\", toggleFocus, false);\n      window.removeEventListener(\"blur\", toggleFocus, false);\n    };\n  }, [focus, getMarkers, hunt]);\n  return (\n    <div style={{ display: \"none\" }}>\n      {status}-{focus}\n    </div>\n  );\n};\n\nconst mapStateToProps = state => state.socket;\nconst mapDispatchToProps = dispatch => ({\n  getMarkers: hunt => dispatch({ type: GET_MARKERS, hunt })\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Status);\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Svg = styled.svg`\n  margin: 0rem auto 0rem;\n  height: 100%;\n  max-width: 360px;\n  color: black;\n  display: block;\n`;\n\nconst Raptor = ({\n  bg,\n  fill = \"#FFFFFF\",\n  opacity = 1,\n  reff,\n  stroke = \"#FFFFFF\"\n}) => (\n  <Svg ref={reff} x=\"0px\" y=\"0px\" viewBox=\"0 0 864 864\">\n    <path\n      fill={bg}\n      d=\"M704.172,432.004c0-150.322-121.847-272.176-272.167-272.176c-150.313,0-272.177,121.854-272.177,272.176\nc0,150.321,121.863,272.169,272.177,272.169C582.325,704.172,704.172,582.325,704.172,432.004z\"\n    />\n\n    <path\n      stroke={stroke}\n      fill={fill}\n      opacity={opacity}\n      strokeWidth=\"10\"\n      strokeMiterlimit=\"10\"\n      d=\"M623.373,394.194v-34.077l-120.796-34.103l-22.437,66.463\nl-129.417,60.525l-135.987-70.14l-6.756,15.581l133.588,116.586l57.817-7.664l19.241,32.798l-40.041,34.124\nc9.488,10.356,60.784,36.836,60.784,36.836l25.191-2.766l-34.262-35.532l25.89-17.396l12.872-58.715l62.837-24.296l-3.854,33.212\nl14.588,3.42l24.923-51.034l-46.001-18.883l15.536-49.255L623.373,394.194z\"\n    />\n  </Svg>\n);\n\nexport default Raptor;\n","import styled from \"styled-components\";\n\nexport const ScanContainer = styled.div`\n  margin: 10% auto;\n  background: white;\n  border: 1px solid black;\n  color: black;\n  padding: 19px;\n  font-family: Arial;\n  font-weight: bold;\n  font-size: 2.4rem;\n  box-shadow: 13px 16px #ff0909;\n  height: 3rem;\n`;\n\nexport const ButtonContainer = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  width: 88%;\n  max-width: 400px;\n  max-height: 777px;\n  margin: 3% auto;\n  div {\n    margin: 1% auto;\n    /* border-bottom: 4px dotted black; */\n    padding: 3%;\n    width: 80%;\n  }\n\n  input,\n  button {\n    margin: 7% auto 7%;\n    align-self: center;\n    padding: 0;\n  }\n  .alt-center {\n    color: #fc8888;\n    text-align: center;\n    cursor: pointer;\n  }\n  @media only screen and (min-width: 700px) {\n    justify-content: flex-start;\n  }\n`;\n\nexport const Input = styled.input`\n  text-align: center;\n  font-family: Arial;\n  border: 2px black solid;\n  height: 56px;\n  box-shadow: 9px 10px black;\n  width: 79%;\n  max-width: 430px;\n  font-size: 1.5rem;\n`;\n\nexport const Button = styled.button`\n  width: 8rem;\n  height: 8rem;\n  border-radius: 50%;\n  border: 2px solid #000000;\n  font-size: 1.3rem;\n  font-weight: 600;\n  cursor: pointer;\n  background: white;\n  box-shadow: -5px 3px black;\n`;\n\nexport const SquareButton = styled.button`\n  background: white;\n  color: black;\n  border: 2px solid white;\n  margin: 4px;\n`;\n\nexport const MapContainer = styled.div`\n  height: 100vh;\n  width: 100%;\n`;\n\nexport const ThankLine = styled.div`\n  margin: auto;\n  font-size: 3rem;\n  width: 70%;\n  text-align: center;\n`;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nimport chroma from \"chroma-js\";\nimport Raptor from \"../graphics/Raptor\";\nimport { ScanContainer } from \"../styles/styles\";\n\nconst Container = styled.div`\n  height: 100%;\n  margin: 1rem;\n  background: white;\n  padding: 1rem;\n  display: grid;\n  grid-template-rows: 30% 40% 30%;\n  max-width: 700px;\n  @media only screen and (min-width: 700px) {\n    margin: 1rem auto;\n  }\n`;\n\nconst Message = styled.div`\n  color: white;\n  font-size: 1.6rem;\n  text-align: center;\n  font-family: Arial, Helvetica, sans-serif;\n  font-weight: bold;\n  width: 70%;\n  margin: auto;\n  text-shadow: 4px 4px black;\n  box-shadow: 7px 11px black;\n  background-color: white;\n  border: 1px solid black;\n  padding: 1rem;\n`;\n\nconst Scanning = ({ message, scanTainer, seriesId }) => {\n  const [displayMessage, setMessage] = useState(\"scanning...\");\n  const raptorRef = useRef();\n\n  useEffect(() => {\n    const text = scanTainer.current;\n    const raptor = raptorRef.current;\n    raptor.getElementsByTagName(\"path\")[0].style.stroke = \"red\";\n    raptor.getElementsByTagName(\"path\")[0].style.strokeWidth = \"21px\";\n    const startTime = Date.now();\n    const scale = chroma.scale([\"black\", \"red\"]);\n    let frame;\n    let counter = 0;\n\n    const found = () => {\n      cancelAnimationFrame(frame);\n      text.style.color = \"black\";\n      text.style.background = \"white\";\n      text.style.boxShadow = `13px 16px black`;\n    };\n\n    const colorMessage = () => {\n      const raptorOutline = raptor.getElementsByTagName(\"path\")[0].style;\n      if (message === \"you already found this one!\") {\n        raptorOutline.stroke = \"yellow\";\n      } else if (message === \"cool find!\") {\n        raptorOutline.stroke = \"#9dff9d\";\n      } else if (message === \"you win!\") {\n        raptorOutline.stroke = \"lavender\";\n      } else {\n        raptorOutline.stroke = \"red\";\n      }\n    };\n\n    const animate = () => {\n      if (message) {\n        counter++;\n        if (counter > 200) {\n          found();\n          colorMessage();\n          setMessage(message);\n          return;\n        }\n      }\n      const diff = Date.now() - startTime;\n      const colorWave = 0.5 * (2 + Math.sin(diff * 0.001));\n      const bgWave = 0.5 * (1 + Math.cos(diff * 0.001));\n      text.style.color = scale(colorWave);\n      text.style.background = scale(bgWave);\n      text.style.boxShadow = `13px 16px ${scale(colorWave)}`;\n      const rotateWave = 180 + 360 * Math.sin(diff * 0.001) * 0.5;\n      raptor.style.transform = `rotate(${rotateWave}deg)`;\n      document.body.style.background = scale(bgWave * 0.8);\n      frame = requestAnimationFrame(animate);\n    };\n\n    animate();\n\n    return () => {\n      cancelAnimationFrame(frame);\n      document.body.style.background = \"white\";\n    };\n  }, [message, scanTainer]);\n  return (\n    <Container>\n      <ScanContainer ref={scanTainer}>\n        {displayMessage === \"scanning...\" ? \"Scanning\" : \"Scanned\"}\n      </ScanContainer>\n      <div>\n        {seriesId ? (\n          <Link to={`/map/${seriesId}`}>\n            <Raptor reff={raptorRef} />\n          </Link>\n        ) : (\n          <Raptor reff={raptorRef} />\n        )}\n      </div>\n      <Message>{displayMessage.toUpperCase()}</Message>\n    </Container>\n  );\n};\nexport default Scanning;\n","import React, { useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { emit, listenTo } from \"../actions\";\n\nimport Scanning from \"../components/Scanning\";\nimport { ScanContainer } from \"../styles/styles\";\n\nconst Scan = ({\n  connected,\n  codeResponse,\n  listenToCodeResponse,\n  listenToMarkers,\n  listenToWin,\n  match,\n  sendCode,\n  seriesId\n}) => {\n  const scanTainer = useRef();\n  const myRe = new RegExp(process.env.REACT_APP_REG);\n  const meepo = myRe.exec(match.params.code);\n\n  useEffect(() => {\n    if (!meepo) {\n      const {\n        params: { code }\n      } = match;\n      sendCode(code);\n    }\n  }, [meepo, match, sendCode]);\n  useEffect(() => {\n    if (!connected) return;\n    listenToCodeResponse();\n    listenToMarkers();\n  }, [connected, listenToWin, listenToCodeResponse, listenToMarkers]);\n  return (\n    <div style={{ height: \"90%\" }}>\n      {!meepo ? (\n        <Scanning\n          scanTainer={scanTainer}\n          message={codeResponse}\n          seriesId={seriesId}\n        />\n      ) : (\n        <ScanContainer ref={scanTainer}>\n          This is not a valid request for reasons I cannot explain :)\n        </ScanContainer>\n      )}\n    </div>\n  );\n};\n\nconst mapStateToProps = ({\n  socket: { connected, codeResponse, seriesId }\n}) => ({\n  connected,\n  codeResponse,\n  seriesId\n});\n\nconst mapDispatchToProps = dispatch => ({\n  sendCode: code => dispatch(emit(\"code\", code)),\n  listenToCodeResponse: () => dispatch(listenTo(\"code_response\")),\n  listenToWin: () => dispatch(listenTo(\"win\")),\n  listenToMarkers: () => dispatch(listenTo(\"markers\"))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Scan);\n","import React, { useState, useEffect } from \"react\";\nimport Raptor from \"../graphics/Raptor\";\nconst K_SIZE = 70;\n\nconst greatPlaceStyle = {\n  // initially any map object has left top corner at lat lng coordinates\n  // it's on you to set object origin to 0,0 coordinates\n  position: \"absolute\",\n  width: K_SIZE,\n  height: K_SIZE,\n  left: -K_SIZE / 2,\n  top: -K_SIZE / 2,\n\n  //   border: \"5px solid #f44336\",\n  borderRadius: K_SIZE,\n  // backgroundColor: \"white\",\n  textAlign: \"center\",\n  color: \"#3f51b5\",\n  fontSize: 16,\n  fontWeight: \"bold\",\n  //   padding: 4,\n  cursor: \"pointer\",\n  userSelect: \"none\"\n};\n\nconst greatPlaceStyleHover = {\n  ...greatPlaceStyle\n  //   border: \"5px solid #3f51b5\",\n  //   color: \"#f44336\"\n};\n\nconst RaptorMarker = ({ found, r = 200, g = 0, b = 0 }) => {\n  const [bg, setBg] = useState(`rgb(${r},${g},${b})`);\n  useEffect(() => {\n    const startTime = Date.now();\n    let frame;\n    const animate = () => {\n      const diff = Date.now() - startTime;\n      const r = 200 + 40 * Math.sin(diff * 0.01);\n      const color = `rgb(${Math.floor(r)},${g},${b})`;\n      setBg(color);\n      if (!found) {\n        frame = requestAnimationFrame(animate);\n      } else {\n        cancelAnimationFrame(frame);\n      }\n    };\n    animate();\n    return () => cancelAnimationFrame(frame);\n    //eslint-disable-next-line\n  }, [found]);\n  return (\n    <div style={greatPlaceStyleHover} onPointerDown={console.log}>\n      <Raptor\n        bg={found ? \"#7ffdcb\" : bg}\n        fill={`${found ? \"#FF0000\" : \"#FFFFFF\"}`}\n      />\n    </div>\n  );\n};\n\nexport default RaptorMarker;\n","import React from \"react\";\n\nconst Smiler = ({ ...rest }) => {\n  return (\n    <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 400 400\" {...rest}>\n      <g>\n        <path\n          d=\"M210.51,51c81.3,0,147.57,66.36,147.35,147.56c-0.22,81.32-66.23,147.26-147.34,147.2\n\t\tc-81.38-0.07-147.64-66.42-147.35-147.55C63.47,116.8,129.33,51,210.51,51z M210.47,66.64C137.9,66.68,78.75,125.88,78.81,198.42\n\t\tc0.06,72.61,59.22,131.74,131.75,131.69c72.59-0.05,131.71-59.23,131.67-131.78C342.18,125.73,283.03,66.6,210.47,66.64z\"\n        />\n        <path\n          d=\"M208.63,299.23c-29.03-0.67-54.45-12.82-74-36.98c-3.39-4.18-3.2-8.59,0.34-11.6c3.61-3.07,8.17-2.44,11.7,1.9\n\t\tc12.38,15.19,27.92,25.44,47.25,28.96c31.58,5.75,58.31-3.18,79.44-27.76c1.25-1.45,2.47-3.08,4.06-4.05\n\t\tc3.09-1.89,7.18-0.92,9.53,1.85c2.49,2.94,2.85,6.86-0.07,9.94c-6.23,6.56-12.34,13.41-19.44,18.92\n\t\tC251.26,292.95,231.11,299.19,208.63,299.23z\"\n        />\n        <path\n          d=\"M125.31,175.16c-0.04-12.78,10.18-23.19,22.88-23.3c12.89-0.11,23.44,10.19,23.62,23.04\n\t\tc0.17,12.75-10.35,23.42-23.18,23.48C135.7,198.44,125.35,188.13,125.31,175.16z\"\n        />\n        <path\n          d=\"M295.73,175.25c-0.04,12.91-10.49,23.23-23.42,23.13c-12.66-0.1-23.05-10.55-23.08-23.22\n\t\tc-0.03-12.8,10.5-23.31,23.35-23.31C285.48,151.86,295.77,162.26,295.73,175.25z\"\n        />\n      </g>\n    </svg>\n  );\n};\nexport default Smiler;\n","import React, { useEffect } from \"react\";\nimport GoogleMapReact from \"google-map-react\";\nimport { MapContainer } from \"../styles/styles\";\nimport RaptorMarker from \"../markers/RaptorMarker\";\nimport whiteMap from \"../styles/whiteMap.json\";\nimport Smiler from \"../graphics/Smiler\";\n\nconst sf = {\n  lat: 37.78126372769892,\n  lng: -122.41344338335298,\n};\n\nconst pewpew = {\n  lat: 40.716323,\n  lng: -73.989691,\n};\n\nconst ny = {\n  lat: 40.703741,\n  lng: -73.931124,\n};\n\nconst la = {\n  lat: 34.079952,\n  lng: -118.269773,\n};\n\nconst la2 = {\n  lat: 34.041662314344194,\n  lng: -118.236226156283,\n};\n\nconst Map = ({\n  history,\n  hunt,\n  mapKey,\n  markers,\n  markersFound,\n  places,\n  reset,\n  lat,\n  lng,\n}) => {\n  // const [userLocation, setUserLocation] = useState();\n  useEffect(() => {\n    const startTime = Date.now();\n    let frame;\n    const animate = () => {\n      const diff = Date.now() - startTime;\n      try {\n        const smiler = document.getElementById(\"smiler\");\n        smiler.style.opacity = Math.sin(diff);\n        frame = requestAnimationFrame(animate);\n      } catch {\n        cancelAnimationFrame(frame);\n      }\n    };\n\n    animate();\n  }, [markers]);\n  // useEffect(() => {\n  //   return () => {\n  //     reset();\n  //     console.log(\"WAHT\");\n  //   };\n  // }, []);\n  // useEffect(() => {\n  //   navigator.geolocation.getCurrentPosition(p => {\n  //     const { latitude: lat, longitude: lng } = p.coords;\n  //     setUserLocation({ lat, lng });\n  //   });\n  // }, []);\n\n  if (markers.length === 0) {\n    return (\n      <div>\n        <Smiler id=\"smiler\" style={{ fill: \"red\" }} />\n      </div>\n    );\n  }\n\n  const getCenter = () => {\n    switch (hunt) {\n      case \"3\":\n        return sf;\n      case \"4\":\n        return ny;\n      case \"5\":\n        return la;\n      case \"6\":\n        return la2;\n      default:\n        return sf;\n    }\n  };\n\n  const center =\n    lat === \"999\"\n      ? getCenter()\n      : { lat: parseFloat(lat), lng: parseFloat(lng) };\n  return (\n    <MapContainer>\n      <GoogleMapReact\n        center={center}\n        defaultZoom={15}\n        bootstrapURLKeys={{ key: mapKey }}\n        options={{ styles: whiteMap }}\n        onChildClick={(id, data) => {\n          if (data.found) {\n            return history.push(`/map/${hunt}/pop/message=Already Found!`)\n          }\n          history.push(`/map/${hunt}/pop/${id}`);\n        }}\n      >\n        {markers.map((m, i) => {\n          return (\n            <RaptorMarker\n              key={m.id}\n              id={m.name + m.id}\n              type={m.type}\n              found={markersFound.includes(`${m.id}`)}\n              lat={m.lat}\n              lng={m.lng}\n            />\n          );\n        })}\n      </GoogleMapReact>\n    </MapContainer>\n  );\n};\n\nexport default Map;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 10;\n`;\nconst Button = styled.button`\n  background: black;\n  color: white;\n  width: 100px;\n  height: 47px;\n  border: 5px solid white;\n  font-family: monospace;\n  font-weight: bolder;\n  opacity: 67%;\n`;\n\nconst Logout = ({ logout }) => {\n  return (\n    <Container onClick={logout}>\n      <Button>Logout</Button>\n    </Container>\n  );\n};\nexport default Logout;\n","import React, { useEffect, useState } from \"react\";\nimport Raptor from \"../graphics/Raptor\";\nimport styled from \"styled-components\";\n\nconst Message = styled.div`\n  color: red;\n  font-size: 54px;\n  text-align: center;\n  font-family: Arial;\n  text-shadow: 4px 3px black;\n`;\n\nconst Loading = ({ fill = \"white\", message }) => {\n  const [opacity, setOpacity] = useState(1);\n  useEffect(() => {\n    let frame;\n    const startTime = Date.now();\n    const animate = () => {\n      frame = requestAnimationFrame(animate);\n      const diff = Date.now() - startTime;\n      setOpacity(0.5 * (1.5 + Math.sin(diff * 0.003)));\n    };\n    animate();\n    return () => cancelAnimationFrame(frame);\n  }, []);\n  return (\n    <div>\n      <Raptor opacity={opacity} fill={fill} />\n      <Message>{message}</Message>\n    </div>\n  );\n};\nexport default Loading;\n","import React, { useEffect, useState } from \"react\";\nimport Lottie from \"react-lottie\";\nimport animationData from \"../../animations/SMILE.json\";\nimport yay from \"../../animations/YAY.json\";\nimport styled from \"styled-components\";\nimport { connect } from \"react-redux\";\nimport { getPlace } from \"../../services\";\nimport Smiler from \"../../graphics/Smiler\";\nimport Loading from \"../../animations/Loading\";\n\nconst H1 = styled.h1`\n  text-align: center;\n  font-size: 4rem;\n`;\n\nconst Paragraph = styled.div`\n  margin: 17px 10%;\n  font-size: 2rem;\n  text-align: center;\n`;\n\nconst WinView = ({ hunt, name, reset }) => {\n  const [place, setPlace] = useState();\n  useEffect(() => {\n    if (!place) {\n      getPlace(hunt).then(place => setTimeout(() => setPlace(place), 1000));\n    } else {\n      document\n        .getElementsByTagName(\"svg\")[0]\n        .setAttribute(\"viewBox\", \"0 -200 1080 1080\");\n    }\n  }, [place]);\n\n  useEffect(() => {\n    return () => reset();\n  }, [reset]);\n  if (!place) return <Loading message=\"checking your place...\" />;\n  return (\n    <div>\n      <div style={{ height: 200 }}>\n        <Lottie options={{ loop: true, autoplay: true, animationData }} />\n      </div>\n      <div style={{ margin: \"20px 0\" }}>\n        <Lottie options={{ loop: true, autoplay: true, animationData: yay }} />\n      </div>\n      <Paragraph>You finished</Paragraph>\n      <Paragraph>\n        {place.place.place} out of {place.place.outof}\n      </Paragraph>\n      <Paragraph>on</Paragraph>\n      <div\n        style={{ textAlign: \"center\", margin: \"1rem 0 4rem\", fontSize: \"4rem\" }}\n      >\n        {name}\n      </div>\n    </div>\n  );\n};\n\nconst mapDispatchToProps = dispatch => ({\n  reset: () => dispatch({ type: \"RESET\" })\n});\nexport default connect(null, mapDispatchToProps)(WinView);\n","import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { connectSocket, getMarkers, logOut, listenTo } from \"../../actions\";\nimport Status from \"../Status\";\nimport Map from \"../../components/Map\";\nimport Logout from \"../../components/Logout\";\nimport WinView from \"./WinView\";\nimport Loading from \"../../animations/Loading\";\n\n// when the map socket connects it needs to update it's marker map\nconst MapView = ({\n  completed,\n  connected,\n  getMarkers,\n  history,\n  hunt,\n  logout,\n  listenToMarkerFound,\n  listenToNewMarker,\n  listenToWin,\n  name,\n  loading,\n  mapKey,\n  markers,\n  markersFound,\n  places,\n  reset,\n  lat,\n  lng,\n}) => {\n  useEffect(() => {\n    if (!connected) return;\n    getMarkers(hunt);\n    listenToMarkerFound();\n    listenToNewMarker();\n    listenToWin();\n    //eslint-disable-next-line\n  }, [connected, getMarkers]);\n  if (loading) return <Loading message=\"to the hunt we go..\" />;\n  if (completed) return <WinView name={name} hunt={hunt} />;\n  return (\n    <div>\n      <Status hunt={hunt} />\n      <Logout logout={logout} />\n      <Map\n        lat={lat}\n        lng={lng}\n        history={history}\n        hunt={hunt}\n        mapKey={mapKey}\n        markers={markers}\n        markersFound={markersFound}\n        places={places}\n        reset={reset}\n      />\n    </div>\n  );\n};\n\nconst mapStateToProps = ({\n  device: { mapKey },\n  map: { completed, markers, markersFound, loading, places, lat, lng },\n  socket: { connected },\n}) => ({\n  completed,\n  connected,\n  loading,\n  mapKey,\n  markers,\n  markersFound,\n  places,\n  lat,\n  lng,\n});\nconst mapDipstachToProps = (dispatch) => ({\n  connectToSocket: () => dispatch(connectSocket()),\n  getMarkers: (hunt) => dispatch(getMarkers(hunt)),\n  logout: () => dispatch(logOut()),\n  listenToNewMarker: () => dispatch(listenTo(\"new_marker\")),\n  listenToMarkerFound: () => dispatch(listenTo(\"marker_found\")),\n  listenToWin: () => dispatch(listenTo(\"win\")),\n  reset: () => dispatch({ type: \"RESET\" }),\n  dispatch,\n});\n\nexport default connect(mapStateToProps, mapDipstachToProps)(MapView);\n","import React from \"react\";\nimport { createPortal } from \"react-dom\";\n\nconst modalStyle = {\n  position: \"fixed\",\n  left: 0,\n  top: 0,\n  bottom: 0,\n  right: 0,\n  backgroundColor: \"rgba(0,0,0,.4)\",\n  color: \"#FFF\"\n};\nconst Modal = ({ children, onClick }) => {\n  return createPortal(\n    <div id=\"modal-container\" style={modalStyle} onClick={onClick}>\n      {children}\n    </div>,\n    document.getElementById(\"modal_root\")\n  );\n};\n\nexport default Modal;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Modal from \"../../components/Modal\";\nimport styled from \"styled-components\";\nimport { Input, Button } from \"../../styles/styles\";\nimport { emit } from \"../../actions\";\n\nconst ModalMessage = styled.div`\n  margin: auto;\n  background: ${(props) => props.background};\n  width: 80%;\n  display: block;\n  padding: 1rem;\n  max-height: ${(props) => `${props.maxHeight}px`};\n  overflow: hidden;\n  transition: max-height 1s, background 1s;\n  font-size: ${window.innerWidth > 600 ? \"40px\" : \"1.5rem\"};\n`;\n\nconst Chodal = ({ history, markers, match, sendCode }) => {\n  const [maxHeight, setMaxHeight] = useState(1);\n  const [background, setBackground] = useState(\"red\");\n  const [input, setInput] = useState(\"\");\n  const inputRef = useRef();\n  console.log('hi')\n  let customMessage = \"\"\n  let m\n  if (match.params.marker.includes('message=')) {\n    customMessage = match.params.marker.split('message=')[1]\n  } else {\n    m = markers.find((m) => m.id === parseInt(match.params.marker));\n    if (!m) {\n      history.goBack();\n      window.location = \"/map/\" + window.location.pathname.split(\"/\")[2];\n    }\n  }\n  console.log(customMessage)\n  useEffect(() => {\n    setMaxHeight(1000);\n    if (!customMessage && m.type.includes(\"input\")) inputRef.current.focus();\n  }, []);\n\n  const handleChange = (e) => setInput(e.target.value);\n\n  const keyPressed = (e) => {\n    if (e.key === \"Enter\") sendIt();\n  };\n\n  const sendIt = () => {\n    const inputClean = input.replace(/\\s/g, \"\").toLowerCase();\n    sendCode({ input: inputClean, id: m.id });\n    retract();\n  };\n\n  const retract = () => {\n    setBackground(\"white\");\n    setMaxHeight(0);\n    setTimeout(() => history.goBack(), 1000);\n  };\n\n  if (!customMessage && m.length === 0) return <div>wtf</div>;\n  return (\n    <Modal\n      onClick={(e) => {\n        if (e.target.id === \"modal-container\") {\n          retract();\n        }\n      }}\n    >\n      <ModalMessage\n        id=\"message-container\"\n        background={background}\n        maxHeight={maxHeight}\n      >\n        <div style={{ pointerEvents: \"none\", textAlign: \"center\" }}>\n          {customMessage ? customMessage : m.description}\n        </div>\n        {!customMessage && m.type.includes(\"input\") && (\n          <div>\n            <Input\n              ref={inputRef}\n              onChange={handleChange}\n              onKeyPress={keyPressed}\n              style={{ margin: \"1.6rem auto 2.4rem\", display: \"block\" }}\n            />\n            <Button\n              onClick={sendIt}\n              style={{ margin: \"2rem auto 1.4rem\", display: \"block\" }}\n            >\n              SEND IT\n            </Button>\n          </div>\n        )}\n      </ModalMessage>\n    </Modal>\n  );\n};\nconst mapStateToProps = ({ map: { markers } }) => ({ markers });\nconst mapDispatchToProps = (dispatch) => ({\n  sendCode: (code) => dispatch(emit(\"code\", { code })),\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(Chodal);\n","import React, { useEffect } from \"react\";\nimport Lottie from \"react-lottie\";\nimport animationData from \"./SMILE.json\";\n\nconst SmallSmile = ({ height = 200 }) => {\n  useEffect(() => {\n    document\n      .getElementsByTagName(\"svg\")[0]\n      .setAttribute(\"viewBox\", \"-30 -200 1080 1080\");\n  }, []);\n  return (\n    <div style={{ height }}>\n      <Lottie options={{ loop: true, autoplay: true, animationData }} />\n    </div>\n  );\n};\n\nexport default SmallSmile;\n","import React from \"react\";\nimport Lottie from \"react-lottie\";\nimport animationData from \"../animations/NOTREADY.json\";\nimport SmallSmile from \"../animations/SmallSmile\";\nconst NotReady = () => {\n  return (\n    <div\n      style={{ display: \"grid\", gridTemplateRows: \"20% 80%\", height: \"100%\" }}\n    >\n      <SmallSmile height={\"\"} />\n      <Lottie options={{ autoplay: true, loop: true, animationData }} />\n    </div>\n  );\n};\nexport default NotReady;\n","import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport MapView from \"./MapView\";\nimport { Route } from \"react-router-dom\";\nimport Chodal from \"./Chodal\";\nimport {\n  UNAUTHORIZED,\n  listenTo,\n  connectSocket,\n  joinRoom,\n  stopListening,\n} from \"../../actions\";\nimport { seriesReady } from \"../../services\";\nimport NotReady from \"../../components/NoReady\";\nimport Loading from \"../../animations/Loading\";\n\nconst MainView = ({\n  connected,\n  connectToSocket,\n  dispatch,\n  history,\n  joinSeries,\n  listenToReady,\n  loading,\n  match,\n  error,\n  name,\n  ready,\n  stopListening,\n}) => {\n  const { hunt } = match.params;\n  if (error === UNAUTHORIZED || error === \"NOT_FOUND\") {\n    history.push(\"/\");\n  }\n  useEffect(() => {\n    if (connected) return;\n    connectToSocket();\n    //eslint-disable-next-line\n  }, [connectToSocket, connect]);\n\n  useEffect(() => {\n    seriesReady(dispatch, hunt);\n\n    return () => stopListening(hunt);\n  }, []);\n\n  useEffect(() => {\n    if (!connected) return;\n    listenToReady();\n    joinSeries(hunt);\n  }, [connected]);\n  if (loading)\n    return (\n      <div>\n        <Loading message=\"to the hunt we go...\" />\n      </div>\n    );\n  if (!ready) {\n    return <NotReady />;\n  }\n  return (\n    <div>\n      <div>\n        <Route\n          path={`/map/:hunt/pop/:marker`}\n          render={({ match }) => <Chodal history={history} match={match} />}\n        />\n        <MapView history={history} hunt={hunt} name={name} />\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({\n  map: { completed, name, ready, loading },\n  device: { error },\n  socket: { connected },\n}) => ({\n  completed,\n  connected,\n  error,\n  loading,\n  name,\n  ready,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  connectToSocket: () => dispatch(connectSocket()),\n  listenToReady: () => dispatch(listenTo(\"ready\")),\n  joinSeries: (hunt) => dispatch(joinRoom(hunt)),\n  stopListening: (hunt) => dispatch(stopListening(hunt)),\n  dispatch,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainView);\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { DEVICE_NOT_REGISTERED } from \"../statuses\";\nimport { Button, Input, ButtonContainer } from \"../styles/styles\";\nimport { newToken, registerDevice } from \"../actions\";\nimport { connect } from \"react-redux\";\nimport Loading from \"../animations/Loading\";\nimport { validateEmail } from \"../services/utils\";\nimport Smiler from \"../graphics/Smiler\";\n\nconst Registration = ({ getToken, hash, registerDevice, status, token }) => {\n  const [error, setError] = useState(\"\");\n  const email = useRef();\n\n  const register = () => {\n    if (email.current === \"\") return;\n    if (!validateEmail(email.current)) {\n      setError(\"This email is invalid...\");\n      return;\n    }\n    registerDevice(email.current.toLowerCase());\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", e => {\n      if (e.keyCode === 13) {\n        register();\n      }\n    });\n    // eslint-disable-next-line\n  }, []);\n  if (!hash) return <Loading message=\"registering device...\" />;\n\n  if (status === DEVICE_NOT_REGISTERED) {\n    const handleChange = e => (email.current = e.target.value);\n    return (\n      <ButtonContainer>\n        <div style={{ borderBottom: \"none\" }}>\n          <Smiler\n            style={{\n              margin: \"0 auto\",\n              display: \"block\",\n              width: \"35%\"\n            }}\n          />\n        </div>\n        <div>hmm I don't recognize this device...</div>\n        <div>please sync it to your email</div>\n        <div\n          style={{\n            color: \"#f36060\",\n            display: error ? \"block\" : \"none\",\n            borderBottom: \"none\",\n            margin: \"7% auto -8%\",\n            textAlign: \"center\"\n          }}\n        >\n          {error}\n        </div>\n        <Input onChange={handleChange} name=\"email\" placeholder=\"email...\" />\n        <Button onClick={register}>Sync</Button>\n      </ButtonContainer>\n    );\n  }\n\n  if (!token) {\n    return (\n      <ButtonContainer>\n        <div style={{ borderBottom: \"none\" }}>\n          <Smiler\n            style={{\n              display: \"block\",\n              width: \"35%\",\n              margin: \"0 auto\",\n              fill: \"#3ef3ff\"\n            }}\n          />\n        </div>\n        <div style={{ border: \"2px solid black\" }}>\n          <div>oh boy! welcome back :)</div>\n          <div>you are looking quite nice today</div>\n          <div>press connect below to sync</div>\n        </div>\n        <Button onClick={getToken}>Connect</Button>\n      </ButtonContainer>\n    );\n  }\n};\n\nconst mapStateToProps = state => state.device;\nconst mapDispatchToProps = dispatch => ({\n  getToken: () => dispatch(newToken()),\n  registerDevice: email => dispatch(registerDevice(email))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Registration);\n","export function validateEmail(email) {\n  // eslint-disable-next-line\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\n","export const DEVICE_NOT_REGISTERED = \"device_not_registered\";\n","import React, { Fragment, useEffect, useState } from \"react\";\nimport GoogleMapReact from \"google-map-react\";\nimport { MapContainer, SquareButton } from \"../styles/styles\";\nimport RaptorMarker from \"../markers/RaptorMarker\";\nimport whiteMap from \"../styles/whiteMap.json\";\nimport Smiler from \"../graphics/Smiler\";\nimport styled from \"styled-components\";\n\nconst Overlay = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0px;\n  background: black;\n  color: white;\n  z-index: 10;\n  width: 120px;\n  border: 5px white solid;\n  padding: 0.5rem;\n  opacity: 67%;\n\n  input {\n    width: 90%;\n    margin: 4px;\n    padding: 2px;\n  }\n`;\n\nconst sf = {\n  lat: 37.78126372769892,\n  lng: -122.41344338335298,\n};\n\nconst pewpew = {\n  lat: 40.716323,\n  lng: -73.989691,\n};\n\nconst ny = {\n  lat: 40.703741,\n  lng: -73.931124,\n};\n\nconst midway = {\n  lat: 37.749514,\n  lng: -122.386036,\n};\n\nconst mapCoords = {\n  SF: sf,\n  NYC: ny,\n  MIDWAY: midway,\n};\n\nconst CMap = ({\n  mapCenter,\n  mapKey,\n  markers,\n  series,\n  setScene,\n  socket,\n  getMarkers,\n  setSeriesCenter,\n}) => {\n  const [userLocation, setUserLocation] = useState();\n  const [marker, setMarker] = useState([]);\n  const [info, setInfo] = useState({\n    name: \"\",\n    hash: \"\",\n    details: \"\",\n    markerTypes: [],\n  });\n\n  useEffect(() => {\n    getMarkers(series);\n    navigator.geolocation.getCurrentPosition((p) => {\n      const { latitude: lat, longitude: lng } = p.coords;\n      setUserLocation({ lat, lng });\n    });\n    //eslint-disable-next-line\n  }, []);\n\n  const handleChange = (e) =>\n    setInfo({ ...info, [e.target.name]: e.target.value });\n\n  const submitMarker = () => {\n    // info.series = series;\n    // info.lat = marker.lat;\n    // info.lng = marker.lng;\n    const payload = {\n      marker: { ...info, lat: marker.lat, lng: marker.lng },\n      series,\n    };\n    socket.emit(\"create_marker\", payload);\n    getMarkers(series);\n    //createMarker(payload);\n  };\n\n  return (\n    <MapContainer>\n      {!userLocation ? (\n        <Smiler id=\"smiler\" style={{ fill: \"red\" }} />\n      ) : (\n        <Fragment>\n          <Overlay>\n            {Object.keys(info).map((i) => {\n              return (\n                <input\n                  key={i}\n                  placeholder={i}\n                  name={i}\n                  onChange={handleChange}\n                />\n              );\n            })}\n            <SquareButton onClick={submitMarker}>submit</SquareButton>\n            <SquareButton onClick={() => setScene(\"SERIES\")}>back</SquareButton>\n          </Overlay>\n          <GoogleMapReact\n            center={mapCoords[mapCenter]}\n            defaultCenter={ny}\n            defaultZoom={15}\n            bootstrapURLKeys={{ key: mapKey }}\n            options={{ styles: whiteMap }}\n            onClick={(e) => {\n              const marker = {\n                key: \"frog\",\n                id: \"frog\",\n                found: false,\n                lat: e.lat,\n                lng: e.lng,\n              };\n              setMarker(marker);\n              setSeriesCenter({ lat: e.lat, lng: e.lng });\n            }}\n            onChildClick={(e, p) => {\n              console.log(p);\n            }}\n          >\n            {markers.map((marker) => {\n              return (\n                <RaptorMarker\n                  g={200}\n                  b={100}\n                  key={marker.hash}\n                  id={marker.hash}\n                  found={marker.found}\n                  lat={marker.lat}\n                  lng={marker.lng}\n                />\n              );\n            })}\n            <RaptorMarker\n              key={marker.hash}\n              id={marker.hash}\n              found={marker.found}\n              lat={marker.lat}\n              lng={marker.lng}\n            />\n          </GoogleMapReact>\n        </Fragment>\n      )}\n    </MapContainer>\n  );\n};\n\nexport default CMap;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Button } from \"../styles/styles\";\nimport { sendSeries, getAllSeries } from \"../services\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  align-content: center;\n  margin-top: 5rem;\n  font-size: 5rem;\n\n  input {\n    text-align: center;\n    height: 2rem;\n    width: 17rem;\n    margin: 1rem auto;\n    display: block;\n  }\n  input:last-child {\n    margin-bottom: 1rem;\n  }\n`;\n\nexport const Select = styled.select`\n  margin: 2rem;\n  width: 200px;\n  height: 47px;\n  font-size: 18px;\n`;\n\nconst Series = ({ setScene, setSelectedSeries, socket }) => {\n  const [values, setValues] = useState({ name: \"\", cat: \"\", description: \"\" });\n  const [toggle, setToggle] = useState(false);\n  const vals = useRef({ name: \"\", cat: \"\", description: \"\" });\n  const [loading, setLoading] = useState(false);\n  const [series, setSeries] = useState([]);\n  const [optionValue, setOptionValue] = useState();\n\n  const getSeries = async () => {\n    const allSeries = await getAllSeries();\n    setSeries(allSeries);\n    try {\n      setOptionValue(allSeries[0].id);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    if (loading === true) return;\n    setLoading(true);\n    getSeries();\n  }, [loading]);\n\n  useEffect(() => {\n    vals.current = values;\n  }, [values]);\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", (e) => {\n      if (e.keyCode === 13) {\n        submit();\n      }\n    });\n  }, []);\n\n  const handleChange = (e) =>\n    setValues({ ...values, [e.target.name]: e.target.value });\n\n  const submit = async () => {\n    const keys = Object.keys(vals.current);\n    for (let i = 0; i < keys.length; i++) {\n      if (vals.current[keys[i]] === \"\") {\n        return;\n      }\n    }\n    await sendSeries(vals.current);\n    setLoading(false);\n  };\n  return (\n    <Container>\n      <div>Series</div>\n      <div\n        style={{ fontSize: \"2rem\", color: \"red\", cursor: \"pointer\" }}\n        onClick={() => setToggle(!toggle)}\n      >\n        New\n      </div>\n      {toggle && (\n        <div>\n          <form>\n            <input onChange={handleChange} name=\"name\" placeholder=\"name\" />\n            <input onChange={handleChange} name=\"cat\" placeholder=\"cat\" />\n            <input\n              onChange={handleChange}\n              name=\"description\"\n              placeholder=\"description\"\n            />\n          </form>\n          <Button style={{ margin: \"auto\", display: \"block\" }} onClick={submit}>\n            SEND\n          </Button>\n        </div>\n      )}\n\n      <Select\n        value={optionValue}\n        onChange={(e) => {\n          setOptionValue(e.target.value);\n          setSelectedSeries(e.target.value);\n        }}\n      >\n        {series.map((s) => {\n          return (\n            <option key={s.name} name={s.name} value={s.id}>\n              {s.name}\n            </option>\n          );\n        })}\n      </Select>\n      <Button\n        style={{ margin: \"auto\", display: \"block\" }}\n        onClick={() => {\n          setScene(\"MAP\");\n          setSelectedSeries(optionValue);\n        }}\n      >\n        Select\n      </Button>\n      <Button\n        style={{ margin: \"auto\", display: \"block\" }}\n        onClick={() => {\n          socket.emit(\"hunt_ready\", optionValue);\n        }}\n      >\n        READY\n      </Button>\n      <Button\n        style={{ margin: \"auto\", display: \"block\" }}\n        onClick={() => {\n          socket.emit(\"hunt_archive\", optionValue);\n        }}\n      >\n        ARCHIVE\n      </Button>\n    </Container>\n  );\n};\nexport default Series;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Button } from \"../styles/styles\";\nimport { getAllSeries, createHunt } from \"../services\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  align-content: center;\n  margin-top: 5rem;\n  font-size: 5rem;\n\n  input {\n    text-align: center;\n    height: 2rem;\n    width: 17rem;\n    margin: 1rem auto;\n    display: block;\n  }\n  input:last-child {\n    margin-bottom: 1rem;\n  }\n`;\n\nconst Select = styled.select`\n  margin: 2rem;\n  width: 200px;\n  height: 47px;\n  font-size: 18px;\n`;\n\nconst Hunt = () => {\n  const [values, setValues] = useState({ email: \"\" });\n  const [toggle, setToggle] = useState(false);\n  const vals = useRef({ email: \"\" });\n  const [series, setSeries] = useState([]);\n  const [optionValue, setOptionValue] = useState();\n\n  const getSeries = async () => {\n    const allSeries = await getAllSeries();\n    setSeries(allSeries);\n    try {\n      setOptionValue(allSeries[0].id);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    getSeries();\n  }, []);\n\n  useEffect(() => {\n    vals.current = values;\n  }, [values]);\n\n  //   useEffect(() => {\n  //     window.addEventListener(\"keydown\", e => {\n  //       if (e.keyCode === 13) {\n  //         submit();\n  //       }\n  //     });\n  //   }, []);\n\n  const handleChange = e =>\n    setValues({ ...values, [e.target.name]: e.target.value });\n\n  const submit = async () => {\n    const keys = Object.keys(vals.current);\n    for (let i = 0; i < keys.length; i++) {\n      if (vals.current[keys[i]] === \"\") {\n        return;\n      }\n    }\n    await createHunt({ email: vals.current.email, seriesId: optionValue });\n  };\n  return (\n    <Container>\n      <div style={{ fontSize: \"2rem\" }}>Create Hunt</div>\n      <div\n        style={{ fontSize: \"2rem\", color: \"red\" }}\n        onClick={() => setToggle(!toggle)}\n      >\n        switch\n      </div>\n      {toggle && (\n        <div>\n          <form>\n            <input onChange={handleChange} name=\"email\" placeholder=\"email\" />\n          </form>\n          <Button style={{ margin: \"auto\", display: \"block\" }} onClick={submit}>\n            SEND\n          </Button>\n        </div>\n      )}\n\n      <Select\n        value={optionValue}\n        onChange={e => setOptionValue(e.target.value)}\n      >\n        {series.map(s => {\n          return (\n            <option key={s.name} name={s.name} value={s.id}>\n              {s.name}\n            </option>\n          );\n        })}\n      </Select>\n    </Container>\n  );\n};\nexport default Hunt;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  position: absolute;\n  top: 6px;\n  z-index: 10;\n  left: 10px;\n  color: red;\n  max-width: 230px;\n  font-size: 1.6rem;\n  background: black;\n  padding: 0.5rem;\n  opacity: 0.5;\n`;\nconst Message = ({ children, top }) => {\n  return <Container style={{ top }}>{children}</Container>;\n};\nexport default Message;\n","import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport CMap from \"../components/CMap\";\nimport Logout from \"../components/Logout\";\nimport {\n  logOut,\n  connectSocket,\n  listenTo,\n  joinRoom,\n  getMarkersBySeries,\n} from \"../actions\";\nimport Series from \"../components/Series\";\nimport Hunt from \"../components/Hunt\";\nimport Message from \"../components/Message\";\nimport JwtDecode from \"jwt-decode\";\nimport { Select } from \"../components/Series\";\n\nconst SERIES = \"SERIES\";\nconst MAP = \"MAP\";\n\nconst Creator = ({\n  connected,\n  connectToSocket,\n  message,\n  listenToErrors,\n  logout,\n  mapKey,\n  markers,\n  socket,\n  getMarkers,\n  token,\n}) => {\n  const [scene, setScene] = useState(SERIES);\n  const [selectedSeries, setSelectedSeries] = useState();\n  const [mapCenter, setMapCenter] = useState(\"SF\");\n  const [seriesCenter, setSeriesCenter] = useState();\n  useEffect(() => {\n    if (!connected) {\n      connectToSocket();\n    } else {\n      listenToErrors();\n    }\n  }, [connectToSocket, connected, listenToErrors]);\n\n  const { email } = JwtDecode(token);\n  // if (email !== \"teh@raptor.pizza\" && email !== \"arielklevecz@gmail.com\") {\n  //   return <div>no</div>;\n  // }\n  return (\n    <div>\n      <Message>\n        {selectedSeries}-{message.error}\n      </Message>\n      <Message top={70}>\n        <Select\n          onChange={(e) => {\n            setMapCenter(e.target.value);\n          }}\n        >\n          <option key={\"SF\"} name={\"SF\"} value={\"SF\"}>\n            SF\n          </option>\n          <option key={\"NYC\"} name={\"NYC\"} value={\"NYC\"}>\n            NYC\n          </option>\n          <option key={\"MIDWAY\"} name={\"MIDWAY\"} value={\"MIDWAY\"}>\n            MIDWAY\n          </option>\n        </Select>\n      </Message>\n      <Message top={460}>\n        <div\n          onClick={() => {\n            const payload = {\n              center: { ...seriesCenter },\n              series: selectedSeries,\n            };\n            socket.emit(\"set_series_center\", payload);\n          }}\n        >\n          SET SERIES CENTER\n        </div>\n      </Message>\n      <Logout logout={logout} />\n      {scene === SERIES && (\n        <div>\n          <Hunt />\n          <Series\n            setScene={setScene}\n            setSelectedSeries={setSelectedSeries}\n            socket={socket}\n          />\n        </div>\n      )}\n      {scene === MAP && (\n        <CMap\n          mapCenter={mapCenter}\n          mapKey={mapKey}\n          markers={markers}\n          series={selectedSeries}\n          setScene={setScene}\n          getMarkers={getMarkers}\n          setSeriesCenter={setSeriesCenter}\n          socket={socket}\n        />\n      )}\n    </div>\n  );\n};\n\nconst mapStateToProps = ({\n  device: { mapKey, token },\n  map: { markers },\n  socket: { connected, socket, message },\n}) => ({\n  connected,\n  mapKey,\n  markers,\n  message,\n  socket,\n  token,\n});\nconst mapDispatchToProps = (dispatch) => ({\n  connectToSocket: () => dispatch(connectSocket()),\n  getMarkers: (series) => dispatch(getMarkersBySeries(series)),\n  joinSeries: (series) => dispatch(joinRoom(series)),\n  listenToNewMarker: () => dispatch(listenTo(\"new_marker\")),\n  listenToErrors: () => dispatch(listenTo(\"create_error\")),\n  logout: () => dispatch(logOut()),\n  dispatch,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Creator);\n","import React, { useEffect, useState } from \"react\";\nimport Lottie from \"react-lottie\";\nimport animationData from \"./animations/SMILE.json\";\nimport styled from \"styled-components\";\nimport { connect } from \"react-redux\";\nimport { UNAUTHORIZED } from \"./actions\";\nimport { getAllUserSeries } from \"./services\";\nimport Smiler from \"./graphics/Smiler\";\n\nconst Container = styled.div`\n  display: grid;\n  grid-template-areas:\n    \"header\"\n    \"error\"\n    \"cta\"\n    \"hunts\";\n  justify-content: center;\n  max-width: 400px;\n  margin: 1rem auto 0;\n  grid-template-columns: 1fr;\n  padding: 2rem;\n`;\n\nconst H1 = styled.div`\n  font-size: 2rem;\n  margin: 0 0 7px;\n  text-decoration: underline;\n`;\n\nconst Paragraph = styled.div``;\n\nconst HuntParagraph = styled(Paragraph)`\n  div {\n    background: black;\n    color: white;\n    padding: 0.5rem;\n    border-bottom: 2px solid white;\n    cursor: pointer;\n    text-transform: capitalize;\n  }\n`;\n\nconst ErrorMessage = styled.div`\n  background: red;\n  color: white;\n  padding: 11px;\n  margin-top: 0.7rem;\n`;\n\nconst errorMessage = (error) => {\n  switch (error) {\n    case UNAUTHORIZED:\n      return \"hmm you aren't authorized for whatever you tried to do\";\n    case \"NOT_FOUND\":\n      return \"hmm that hunt doesn't exist?\";\n    default:\n      return null;\n  }\n};\n\n// if you want listeners here, you will have to decouple the connect socket from the mapview\n// the connect socket includes some of the listeners that force the disconnect when the map is dismounted\n\nconst Fallback = ({ clearErrors, email, error, getAllUserSeries, history }) => {\n  const [availableSeries, setAvailableSeries] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    getAllUserSeries().then((series) => {\n      setLoading(false);\n      setAvailableSeries(series);\n    });\n  }, [getAllUserSeries]);\n\n  useEffect(() => {\n    document\n      .getElementsByTagName(\"svg\")[0]\n      .setAttribute(\"viewBox\", \"0 -300 1080 1080\");\n  }, []);\n  const eMessage = errorMessage(error);\n  return (\n    <div>\n      <div style={{ height: 110 }}>\n        <Lottie options={{ loop: true, autoplay: true, animationData }} />\n      </div>\n      <Container>\n        <H1>hi {email.split(\"@\")[0]}!</H1>\n        {loading && <Smiler />}\n        {eMessage && <ErrorMessage>{eMessage}</ErrorMessage>}\n        {!loading && (\n          <div>\n            <HuntParagraph>\n              <h3>Hunts</h3>\n              {availableSeries && availableSeries.length > 0 ? (\n                availableSeries\n                  .filter((s) => !s.archived)\n                  .map((s) => (\n                    <div\n                      onClick={() => {\n                        clearErrors();\n                        history.push(`/map/${s.id}`);\n                      }}\n                      key={s.id}\n                    >\n                      {s.name}\n                    </div>\n                  ))\n              ) : (\n                <div style={{ background: \"red\" }}>\n                  there are no hunts for you :(\n                </div>\n              )}\n            </HuntParagraph>\n            <HuntParagraph>\n              <h3>Archive</h3>\n              {availableSeries && availableSeries.length > 0 ? (\n                availableSeries\n                  .filter((s) => s.archived)\n                  .map((s) => (\n                    <div\n                      onClick={() => {\n                        clearErrors();\n                        history.push(`/map/${s.id}`);\n                      }}\n                      key={s.id}\n                    >\n                      {s.name}\n                    </div>\n                  ))\n              ) : (\n                <div style={{ background: \"red\" }}>\n                  Hmm nothing in the archive\n                </div>\n              )}\n            </HuntParagraph>\n          </div>\n        )}\n      </Container>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ device: { email, error } }) => ({ email, error });\nconst mapDispatchToProps = (dispatch) => ({\n  clearErrors: () => dispatch({ type: \"CLEAR_ERRORS\" }),\n  getAllUserSeries: () => getAllUserSeries(dispatch),\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(Fallback);\n","import React, { useEffect, useState } from \"react\";\nimport { Button, ButtonContainer, ThankLine } from \"../styles/styles\";\nimport Smiler from \"../graphics/Smiler\";\nimport { connect } from \"react-redux\";\nimport { getSeries, createRsvp, releaseDevice } from \"../services\";\nimport { logOut, deviceInit } from \"../actions\";\n\nconst Rsvp = ({ deviceAuth, email, logout, match }) => {\n  const [seriesName, setSeriesName] = useState(\"\");\n  const [response, setResponse] = useState(\"\");\n  const rsvp = () => {\n    createRsvp(match.params.seriesId).then((data) => {\n      if (data.success) {\n        return setResponse(\"Thanks for signing up!\");\n      }\n      if (data.error === \"already_signed_up\") {\n        return setResponse(\"Looks like you are already signed up!\");\n      }\n      if (data.error) {\n        return setResponse(\"Oh dear these seems to be an error :(\");\n      }\n    });\n  };\n  const handleClick = () => {\n    releaseDevice().then((data) => {\n      if (data.success) {\n        logout();\n        // forcing the state to barf at auth\n        deviceAuth();\n      }\n    });\n  };\n  const error = \"\";\n\n  useEffect(() => {\n    getSeries(match.params.seriesId).then((data) => {\n      setSeriesName(data.name);\n    });\n  }, []);\n\n  if (response) {\n    return (\n      <div style={{ borderBottom: \"none\" }}>\n        <Smiler\n          style={{\n            margin: \"0 auto\",\n            display: \"block\",\n            width: \"35%\",\n          }}\n        />\n        <ThankLine>{response}</ThankLine>\n      </div>\n    );\n  }\n  return (\n    <ButtonContainer>\n      <div style={{ borderBottom: \"none\" }}>\n        <Smiler\n          style={{\n            margin: \"0 auto\",\n            display: \"block\",\n            width: \"35%\",\n          }}\n        />\n      </div>\n      <div>\n        Hello! I have your emails as <b>{email}</b>\n      </div>\n      <div>\n        You would like to RSVP for <i>{seriesName}</i>?\n      </div>\n      <div\n        style={{\n          color: \"#f36060\",\n          display: error ? \"block\" : \"none\",\n          borderBottom: \"none\",\n          margin: \"7% auto -8%\",\n          textAlign: \"center\",\n        }}\n      >\n        {error}\n      </div>\n      <Button onClick={rsvp}>Yes</Button>\n      <div onClick={handleClick} className=\"alt-center\">\n        Sign in using a different email\n      </div>\n    </ButtonContainer>\n  );\n};\n\nconst mapStateToProps = ({ device: { email } }) => ({ email });\nconst mapDispatchToProps = (dispatch) => ({\n  logout: () => dispatch(logOut()),\n  deviceAuth: () => dispatch(deviceInit()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Rsvp);\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Status from \"./containers/Status\";\nimport Scan from \"./containers/Scan\";\nimport { connect } from \"react-redux\";\nimport { newToken, registerDevice } from \"./actions\";\nimport MainView from \"./containers/MainView\";\nimport Registration from \"./containers/Registration\";\nimport { DEVICE_NOT_REGISTERED } from \"./statuses\";\nimport Loading from \"./animations/Loading\";\nimport Creator from \"./containers/Creator\";\nimport Fallback from \"./Fallback\";\nimport Rsvp from \"./containers/Rsvp\";\n\nfunction App({ hash, status, token, loading, welcome }) {\n  if (welcome) return <Loading fill={\"yellow\"} message={\"welcome!\"} />;\n  if (loading) return <Loading message={\"syncing...\"} />;\n  if ((status === DEVICE_NOT_REGISTERED && !hash) || !token) {\n    return <Registration hash={hash} token={token} status={status} />;\n  }\n\n  return (\n    <>\n      <Switch>\n        <Route path=\"/status\" component={Status} />\n        <Route path=\"/code/:code\" component={Scan} />\n        <Route path=\"/creator\" component={Creator} />\n        <Route path=\"/map/:hunt\" component={MainView} />\n        <Route path=\"/rsvp/:seriesId\" component={Rsvp} />\n        <Route path=\"/\" component={Fallback} />\n      </Switch>\n    </>\n  );\n}\n\nconst mapStateToProps = ({\n  device: { error, hash, status, token },\n  ui: { loading, welcome },\n}) => ({\n  error,\n  hash,\n  loading,\n  status,\n  token,\n  welcome,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  getToken: () => dispatch(newToken()),\n  registerDevice: () => dispatch(registerDevice()),\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import {\n  DEVICE_INIT,\n  SET_TOKEN,\n  ERROR,\n  RESPONSE,\n  LOGOUT,\n  MAP_KEY,\n  CLEAR_ERRORS\n} from \"../actions\";\nimport jwtDecode from \"jwt-decode\";\n\nconst deviceState = {\n  email: \"\",\n  hash: 0x0,\n  token: 0x0,\n  error: \"\",\n  response: \"\",\n  status: \"\",\n  mapKey: \"\"\n};\n\nconst device = (state = deviceState, action) => {\n  switch (action.type) {\n    case DEVICE_INIT:\n      const { hash } = action;\n      return { ...state, hash };\n    case SET_TOKEN:\n      const { token } = action;\n      localStorage.setItem(\"token\", token);\n      const { email } = jwtDecode(token);\n      return { ...state, email, token };\n    case MAP_KEY:\n      const { mapKey } = action;\n      return { ...state, mapKey };\n    case LOGOUT:\n      return { ...state, token: 0x0 };\n    case ERROR:\n      const { error } = action;\n      return { ...state, error, status: error };\n    case CLEAR_ERRORS:\n      return { ...state, error: \"\", status: \"\" };\n    case RESPONSE:\n      const { response } = action;\n      return { ...state, response, status: response };\n    default:\n      return state;\n  }\n};\n\nexport default device;\n","import {\n  MAP_INIT,\n  MARKER_FOUND,\n  NEW_MARKER,\n  HUNT_COMPLETED,\n  RESET,\n} from \"../actions\";\n\nconst ppark = {\n  lat: 40.66257,\n  lng: -73.968564,\n};\n\nconst mapState = {\n  places: { ppark },\n  markers: [],\n  markersFound: [],\n  name: \"\",\n  completed: false,\n  ready: false,\n  loading: true,\n  lat: \"\",\n  lng: \"\",\n};\n\nconst map = (state = mapState, action) => {\n  switch (action.type) {\n    case MAP_INIT:\n      const {\n        markers: { completed, markers, markerMap, name, ready, lat, lng },\n      } = action;\n      return {\n        ...state,\n        completed,\n        markers,\n        markersFound: markerMap,\n        name,\n        ready,\n        lat,\n        lng,\n        loading: false,\n      };\n    case \"MAP_READY\":\n      return { ...state, ready: true };\n    case MARKER_FOUND:\n      const { markersFound } = action;\n      return { ...state, markersFound };\n    case NEW_MARKER:\n      const { newMarker } = action;\n      return { ...state, markers: [...state.markers, newMarker] };\n    case HUNT_COMPLETED:\n      return { ...state, completed: true };\n    case RESET:\n      return mapState;\n    case \"MAP_LOADING\":\n      return { ...state, loading: true };\n    case \"MAP_DONE\":\n      return { ...state, loading: false };\n    default:\n      return state;\n  }\n};\n\nexport default map;\n","import {\n  CONNECTING,\n  CONNECTED,\n  GET_MARKERS,\n  LISTEN_TO,\n  SOCKET_MESSAGE,\n  CODE_RESPONSE\n} from \"../actions\";\n\nconst socketState = {\n  socket: null,\n  connected: false,\n  codeResponse: \"\",\n  message: \"\",\n  status: \"disconnected\",\n  listeners: []\n};\n\nconst socket = (state = socketState, action) => {\n  switch (action.type) {\n    case CONNECTING:\n      return { ...state, status: \"connecting...\" };\n    case CONNECTED:\n      const { socket } = action;\n      return { ...state, status: \"connected\", connected: true, socket };\n    // this should be refactored\n    case GET_MARKERS:\n      const { hunt } = action;\n      state.socket.emit(\"get_markers\", hunt);\n      return state;\n    case LISTEN_TO:\n      const { topic } = action;\n      return { ...state, listeners: [...state.listeners, topic] };\n    case \"CLEAR_LISTENERS\":\n      return { ...state, listeners: [] };\n    case SOCKET_MESSAGE:\n      const { message } = action;\n      return { ...state, message };\n    case CODE_RESPONSE:\n      const { payload } = action;\n      return {\n        ...state,\n        codeResponse: payload.message,\n        seriesId: payload.seriesId\n      };\n    case \"DISCONNECT\":\n      return { ...state, status: \"disconnected\", connected: false };\n    default:\n      return state;\n  }\n};\n\nexport default socket;\n","import { LOADING, READY, WELCOME } from \"../actions\";\n\nconst initialState = {\n  welcome: false,\n  loading: false\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case WELCOME:\n      return { ...state, welcome: true };\n    case LOADING:\n      return { ...state, loading: true };\n    case READY:\n      return { ...state, loading: false, welcome: false };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import { combineReducers } from \"redux\";\nimport device from \"./device\";\nimport map from \"./map\";\nimport socket from \"./socket\";\nimport ui from \"./ui\";\n\nexport default combineReducers({ device, map, socket, ui });\n","import { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport reducers from \"./reducers\";\nimport { ERROR, BAD_TOKEN, DEVICE_NOT_FOUND, deviceInit } from \"./actions\";\n\nconst peelError = ({ getState, dispatch }) => {\n  return next => action => {\n    if (process.env.NODE_ENV === \"development\") {\n      console.log(action);\n      console.log(getState());\n    }\n\n    if (action.type === ERROR) {\n      // should this be error or message?\n      switch (action.error) {\n        case BAD_TOKEN:\n        case \"USER_NOT_FOUND\":\n          localStorage.removeItem(\"token\");\n          window.location.href = \"/\";\n          break;\n        case DEVICE_NOT_FOUND:\n          dispatch(deviceInit());\n          break;\n        default:\n      }\n    }\n    next(action);\n  };\n};\n\nconst store = createStore(reducers, applyMiddleware(thunk, peelError));\n\nexport default store;\n// what is the balance between monotony and bliss\n// what is the need to be differentiated in particular settings and ways\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport store from \"./store\";\nimport { Provider } from \"react-redux\";\n\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { deviceInit, WELCOME, MAP_KEY, SET_TOKEN } from \"./actions\";\n\nimport { AES, enc } from \"crypto-js\";\n\nconst token = localStorage.getItem(\"token\");\nif (!token) {\n  store.dispatch({ type: WELCOME });\n}\nstore.dispatch(deviceInit());\nif (token) store.dispatch({ type: SET_TOKEN, token });\n\nconst bytes = AES.decrypt(\n  process.env.REACT_APP_MAP_KEY,\n  process.env.REACT_APP_FROGGY\n);\nconst mapKey = bytes.toString(enc.Utf8);\nstore.dispatch({ type: MAP_KEY, mapKey });\n\nconst isLocalHost = (hostname) =>\n  !!(\n    hostname === \"localhost\" ||\n    hostname === \"[::1]\" ||\n    hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n  );\n\nconst HttpsRedirect = ({ disabled, children }) => {\n  if (\n    !disabled &&\n    typeof window !== \"undefined\" &&\n    window.location &&\n    window.location.protocol === \"http:\" &&\n    !isLocalHost(window.location.hostname)\n  ) {\n    window.location.href = window.location.href.replace(/^http(?!s)/, \"https\");\n    return null;\n  }\n\n  return children;\n};\nReactDOM.render(\n  <HttpsRedirect>\n    <Provider store={store}>\n      <Router basename=\"/\">\n        <App />\n      </Router>\n    </Provider>\n  </HttpsRedirect>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}