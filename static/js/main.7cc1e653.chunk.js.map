{"version":3,"sources":["services/handles.js","services/index.js","actions.js","containers/Status.js","graphics/Raptor.js","styles/styles.js","components/Scanning.js","containers/Scan.js","markers/RaptorMarker.js","graphics/Smiler.js","components/Map.js","components/Logout.js","animations/Loading.js","containers/MainView/WinView.js","containers/MainView/MapView.js","components/Modal.js","containers/MainView/Chodal.js","animations/SmallSmile.js","components/NoReady.js","containers/MainView/index.js","containers/Registration.js","services/utils.js","statuses.js","components/CMap.js","components/Series.js","components/Hunt.js","components/Message.js","containers/Creator.js","Fallback.js","containers/Rsvp.js","App.js","reducers/device.js","reducers/map.js","reducers/socket.js","reducers/ui.js","reducers/index.js","store.js","index.js"],"names":["fetchOptions","method","token","body","headers","Authorization","JSON","stringify","handleResponse","response","status","json","then","error","Error","handleError","dispatch","message","type","ERROR","tRequest","endPoint","headerData","localStorage","getItem","options","fetch","process","data","SET_TOKEN","RESPONSE","catch","getToken","hash","setItem","getAllSeries","createHunt","a","seriesId","email","id","console","log","sendSeries","cat","description","name","getPlace","hunt","place","createRsvp","releaseDevice","deviceInit","getState","window","requestIdleCallback","Fingerprint2","get","components","values","map","component","value","device","x64hash128","join","readyDelay","setTimeout","delay","dDelay","registerDevice","newToken","logOut","removeItem","socketWrap","io","path","transport","connectSocket","socket","on","found","markers","success","socketMessage","listenDispatcher","topic","payload","markersFound","newMarker","listenTo","listeners","includes","joinRoom","room","emit","connectSocketThenEmit","connect","state","getMarkers","useState","focus","setFocus","useEffect","toggleFocus","addEventListener","removeEventListener","style","display","Svg","styled","svg","Raptor","bg","fill","opacity","reff","stroke","ref","x","y","viewBox","d","strokeWidth","strokeMiterlimit","ScanContainer","div","ButtonContainer","Input","input","Button","button","SquareButton","MapContainer","Container","Message","Scanning","scanTainer","displayMessage","setMessage","raptorRef","useRef","text","current","raptor","getElementsByTagName","frame","startTime","Date","now","scale","chroma","counter","animate","cancelAnimationFrame","color","background","boxShadow","raptorOutline","colorMessage","diff","colorWave","Math","sin","bgWave","cos","rotateWave","transform","document","requestAnimationFrame","to","toUpperCase","connected","codeResponse","sendCode","code","listenToCodeResponse","listenToWin","listenToMarkers","match","meepo","RegExp","exec","params","height","greatPlaceStyle","position","width","left","top","borderRadius","textAlign","fontSize","fontWeight","cursor","userSelect","greatPlaceStyleHover","RaptorMarker","r","g","b","setBg","floor","onPointerDown","Smiler","rest","sf","lat","lng","ny","la","la2","Map","history","mapKey","places","reset","getElementById","length","center","getCenter","defaultCenter","defaultZoom","bootstrapURLKeys","key","styles","whiteMap","onChildClick","push","m","i","Logout","logout","onClick","Loading","setOpacity","h1","Paragraph","setPlace","setAttribute","loop","autoplay","animationData","margin","yay","outof","completed","loading","connectToSocket","listenToNewMarker","listenToMarkerFound","joinSeries","modalStyle","bottom","right","backgroundColor","Modal","children","createPortal","ModalMessage","props","maxHeight","innerWidth","setMaxHeight","setBackground","setInput","inputRef","find","parseInt","marker","goBack","location","pathname","split","sendIt","inputClean","replace","toLowerCase","retract","e","target","pointerEvents","onChange","onKeyPress","SmallSmile","NotReady","gridTemplateRows","ready","listenToReady","stopListening","off","disconnect","seriesReady","render","setError","register","test","String","validateEmail","keyCode","borderBottom","placeholder","border","Overlay","CMap","series","setScene","userLocation","setUserLocation","setMarker","details","info","setInfo","navigator","geolocation","getCurrentPosition","p","coords","latitude","longitude","handleChange","Object","keys","Select","select","Series","setSelectedSeries","setValues","toggle","setToggle","vals","setLoading","setSeries","optionValue","setOptionValue","getSeries","allSeries","submit","s","Hunt","getMarkersBySeries","listenToErrors","scene","selectedSeries","JwtDecode","H1","HuntParagraph","ErrorMessage","clearErrors","getAllUserSeries","availableSeries","setAvailableSeries","eMessage","errorMessage","filter","archived","deviceAuth","seriesName","setSeriesName","className","ui","welcome","Status","Scan","Creator","MainView","Rsvp","Fallback","deviceState","action","jwtDecode","mapState","ppark","markerMap","socketState","initialState","reducer","combineReducers","store","createStore","reducers","applyMiddleware","thunk","next","href","AES","decrypt","toString","enc","Utf8","ReactDOM","hostname","disabled","protocol","basename"],"mappings":"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","file":"static/js/main.7cc1e653.chunk.js","sourcesContent":["import { ERROR } from \"../actions\";\r\n\r\nexport const fetchOptions = (method, token, body) => ({\r\n  method,\r\n  headers: token\r\n    ? {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    : { \"Content-Type\": \"application/json\" },\r\n  body: method === \"POST\" ? JSON.stringify({ ...body }) : null\r\n});\r\n\r\nexport const handleResponse = response => {\r\n  if (response.status !== 200) {\r\n    return response.json().then(error => {\r\n      throw new Error(error.error);\r\n    });\r\n  }\r\n  return response.json();\r\n};\r\n\r\nexport const handleError = (error, dispatch) => {\r\n  const { message } = error;\r\n  dispatch({ type: ERROR, error: message });\r\n};\r\n","import { SET_TOKEN, RESPONSE, dDelay } from \"../actions\";\r\nimport { handleError, handleResponse, fetchOptions } from \"./handles\";\r\n\r\n// there could be a request thunk that delegates dispatches based on the response message\r\nexport const tRequest = (endPoint, headerData, dispatch) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"POST\", token, headerData);\r\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then((data) => {\r\n      if (data.message === \"verified\" && token) {\r\n        dispatch({\r\n          type: SET_TOKEN,\r\n          token,\r\n        });\r\n      }\r\n      if (data.message === \"new_device_created\") {\r\n        dispatch({ type: SET_TOKEN, token: data.token });\r\n      }\r\n      dispatch({\r\n        type: RESPONSE,\r\n        response: data.message,\r\n      });\r\n    })\r\n    .catch((error) => handleError(error, dispatch));\r\n};\r\n\r\nexport const getToken = (dispatch, hash) => {\r\n  const endPoint = \"new_token\";\r\n  const options = fetchOptions(\"POST\", null, { hash });\r\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then((data) => {\r\n      const { token } = data;\r\n      localStorage.setItem(\"token\", token);\r\n      dispatch({ type: SET_TOKEN, token });\r\n    })\r\n    .catch((error) => handleError(error, dispatch));\r\n};\r\n\r\nexport const seriesReady = (dispatch, id) => {\r\n  const endPoint = \"series_ready\";\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"POST\", token, { id });\r\n  dispatch({ type: \"MAP_LOADING\" });\r\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then((data) => {\r\n      const { ready } = data;\r\n      if (ready) dispatch({ type: \"MAP_READY\" });\r\n      dispatch(dDelay(\"MAP_DONE\", 1000));\r\n    })\r\n    .catch((error) => handleError(error, dispatch));\r\n};\r\n\r\nexport const getSeries = (seriesId) => {\r\n  const endPoint = \"get_series\";\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"GET\", token, null);\r\n  return fetch(\r\n    `${process.env.REACT_APP_SERVER}/${endPoint}?seriesId=${seriesId}`,\r\n    options\r\n  )\r\n    .then(handleResponse)\r\n    .then((data) => data);\r\n};\r\nexport const getAllSeries = () => {\r\n  const endPoint = \"all_series\";\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"GET\", token, null);\r\n  return fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then((data) => data);\r\n};\r\n\r\nexport const getAllUserSeries = (dispatch) => {\r\n  const endPoint = \"all_user_series\";\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"GET\", token, null);\r\n  return fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then((data) => data)\r\n    .catch((error) => handleError(error, dispatch));\r\n};\r\n\r\nexport const createHunt = async ({ seriesId, email }) => {\r\n  const endPoint = \"create_hunt\";\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"POST\", token, { id: seriesId, email });\r\n  await fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then((data) => console.log(data))\r\n    .catch((error) => console.log(error));\r\n};\r\n\r\nexport const sendSeries = async ({ cat, description, name }) => {\r\n  const endPoint = \"send_series\";\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"POST\", token, { cat, description, name });\r\n  await fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then((data) => {\r\n      console.log(data);\r\n    });\r\n};\r\n\r\nexport const createMarker = async (marker) => {\r\n  const endPoint = \"create_marker\";\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"POST\", token, marker);\r\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then((data) => console.log(data));\r\n};\r\n\r\nexport const getPlace = async (hunt) => {\r\n  const endPoint = \"get_place\";\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"POST\", token, { id: hunt });\r\n  const place = await fetch(\r\n    `${process.env.REACT_APP_SERVER}/${endPoint}`,\r\n    options\r\n  )\r\n    .then(handleResponse)\r\n    .then((data) => data);\r\n  return place;\r\n};\r\n\r\nexport const createRsvp = async (seriesId) => {\r\n  const endPoint = \"create_rsvp\";\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"POST\", token, { seriesId });\r\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then((data) => data);\r\n};\r\n\r\nexport const releaseDevice = async () => {\r\n  const endPoint = \"release_device\";\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"DELETE\", token, null);\r\n  return fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then((data) => data);\r\n};\r\n","import io from \"socket.io-client\";\r\nimport Fingerprint2 from \"fingerprintjs2\";\r\nimport { tRequest, getToken } from \"./services\";\r\n\r\nexport const WELCOME = \"WELCOME\";\r\nexport const LOADING = \"LOADING\";\r\nexport const READY = \"READY\";\r\n\r\nexport const MAP_KEY = \"MAP_KEY\";\r\nexport const DEVICE_INIT = \"DEVICE_INIT\";\r\nexport const SET_TOKEN = \"SET_TOKEN\";\r\nexport const LOGOUT = \"LOGOUT\";\r\n\r\nexport const MAP_INIT = \"MAP_INIT\";\r\nexport const GET_MARKERS = \"GET_MARKERS\";\r\nexport const MARKER_FOUND = \"MARKER_FOUND\";\r\nexport const UPDATE_MAP = \"UPDATE_MAP\";\r\nexport const NEW_MARKER = \"NEW_MARKER\";\r\nexport const HUNT_COMPLETED = \"HUNT_COMPLETED\";\r\nexport const RESET = \"RESET\";\r\n\r\nexport const CONNECTING = \"CONNECTING\";\r\nexport const CONNECTED = \"CONNECTED\";\r\nexport const LISTEN_TO = \"LISTEN_TO\";\r\nexport const SOCKET_MESSAGE = \"SOCKET_MESSAGE\";\r\n\r\nexport const ERROR = \"ERROR\";\r\nexport const CLEAR_ERRORS = \"CLEAR_ERRORS\";\r\nexport const BAD_TOKEN = \"BAD_TOKEN\";\r\nexport const RESPONSE = \"RESPONSE\";\r\nexport const DEVICE_NOT_FOUND = \"DEVICE_NOT_FOUND\";\r\nexport const UNAUTHORIZED = \"UNAUTHORIZED\";\r\n\r\nexport const FOUND = \"FOUND\";\r\nexport const SEND_CODE = \"SEND_CODE\";\r\nexport const CODE_RESPONSE = \"CODE_RESPONSE\";\r\n\r\nexport const deviceInit = () => {\r\n  return async (dispatch, getState) => {\r\n    dispatch({ type: LOADING });\r\n    if (window.requestIdleCallback) {\r\n      requestIdleCallback(function () {\r\n        Fingerprint2.get(async function (components) {\r\n          var values = components.map(function (component) {\r\n            return component.value;\r\n          });\r\n          const device = Fingerprint2.x64hash128(values.join(\"\"), 31);\r\n          dispatch({ type: DEVICE_INIT, hash: device });\r\n          if (!getState().device.token) {\r\n            tRequest(\"auth_device\", { device }, dispatch);\r\n          }\r\n          dispatch(readyDelay(1));\r\n        });\r\n      });\r\n    } else {\r\n      setTimeout(function () {\r\n        Fingerprint2.get(async function (components) {\r\n          var values = components.map(function (component) {\r\n            return component.value;\r\n          });\r\n          const device = Fingerprint2.x64hash128(values.join(\"\"), 31);\r\n          dispatch({ type: DEVICE_INIT, hash: device });\r\n          if (!getState().device.token) {\r\n            tRequest(\"auth_device\", { device }, dispatch);\r\n          }\r\n          dispatch(readyDelay(1));\r\n        });\r\n      }, 500);\r\n    }\r\n  };\r\n};\r\n\r\nexport const authenticateDevice = () => {};\r\n\r\nexport const readyDelay = (delay) => {\r\n  return (dispatch) => {\r\n    setTimeout(() => dispatch({ type: READY }), delay);\r\n  };\r\n};\r\n\r\nexport const dDelay = (type, delay) => {\r\n  return (dispatch) => {\r\n    setTimeout(() => dispatch({ type }), delay);\r\n  };\r\n};\r\n\r\nexport const registerDevice = (email) => {\r\n  return async (dispatch, getState) => {\r\n    const {\r\n      device: { hash },\r\n    } = getState();\r\n    tRequest(\"register_device\", { email, hash }, dispatch);\r\n    dispatch({ type: LOADING });\r\n    dispatch(readyDelay(2000));\r\n  };\r\n};\r\n\r\nexport const newToken = () => {\r\n  return async (dispatch, getState) => {\r\n    const {\r\n      device: { hash },\r\n    } = getState();\r\n    getToken(dispatch, hash);\r\n    dispatch({ type: LOADING });\r\n    dispatch(readyDelay(2000));\r\n  };\r\n};\r\n\r\nexport const logOut = () => {\r\n  return async (dispatch) => {\r\n    localStorage.removeItem(\"token\");\r\n    dispatch({ type: LOGOUT });\r\n  };\r\n};\r\n\r\nfunction socketWrap(hash) {\r\n  return io(\r\n    `${process.env.REACT_APP_SOCKET_SERVER}?token=${localStorage.getItem(\r\n      \"token\"\r\n    )}&device=${hash}`,\r\n    { path: \"/socket.io\", transport: [\"websocket\"] }\r\n  );\r\n}\r\n\r\n// MARKERS SHOULD HAVE ITS OWN MIDDLEWARE\r\n// socket connection probably doesn't need to include these listeners\r\n// and they could be moved into the general listener scheme\r\nexport const connectSocket = () => {\r\n  return async (dispatch, getState) => {\r\n    const {\r\n      device: { hash },\r\n    } = getState();\r\n    const socket = await socketWrap(hash);\r\n    socket.on(\"error\", (error) => {\r\n      dispatch({ type: ERROR, error });\r\n    });\r\n    socket.on(\"found\", (found) => dispatch({ type: FOUND, name: found }));\r\n    socket.on(\"markers\", (markers) => {\r\n      if (!markers.success)\r\n        return dispatch({ type: ERROR, error: UNAUTHORIZED });\r\n      dispatch({ type: MAP_INIT, markers });\r\n    });\r\n    dispatch({ type: CONNECTED, socket });\r\n  };\r\n};\r\n\r\n// ** CONSOLIDATE OR SPLIT UP THE DIFFERENT BETWEEN LISTENERS ON SOCKET CONNECTION\r\n// AND SOCKET CONNECTIONS that are handled by the listendispatcher\r\nexport const socketMessage = (message) => {\r\n  return (dispatch) => {\r\n    dispatch({ type: SOCKET_MESSAGE, message });\r\n  };\r\n};\r\n\r\nconst listenDispatcher = (dispatch, topic, payload) => {\r\n  if (topic === \"markers\") {\r\n    dispatch({ type: MAP_INIT, markers: payload });\r\n  }\r\n  if (topic === \"marker_found\") {\r\n    dispatch({ type: MARKER_FOUND, markersFound: payload });\r\n  }\r\n  if (topic === \"new_marker\") {\r\n    dispatch({ type: NEW_MARKER, newMarker: payload });\r\n  }\r\n  if (topic === \"code_response\") {\r\n    dispatch({ type: CODE_RESPONSE, payload });\r\n  }\r\n  if (topic === \"ready\") {\r\n    dispatch({ type: \"MAP_READY\" });\r\n  }\r\n  // ** not great\r\n  if (payload === \"you_win\") {\r\n    dispatch({ type: \"HUNT_COMPLETED\" });\r\n  }\r\n};\r\n\r\nexport const listenTo = (topic) => {\r\n  return async (dispatch, getState) => {\r\n    const { listeners, socket } = getState().socket;\r\n    if (listeners.includes(topic)) {\r\n      return;\r\n    }\r\n    socket.on(topic, (message) => {\r\n      listenDispatcher(dispatch, topic, message);\r\n      dispatch(socketMessage(message));\r\n    });\r\n    dispatch({ type: LISTEN_TO, topic });\r\n  };\r\n};\r\n\r\nexport const joinRoom = (room) => {\r\n  const topic = \"join\";\r\n  return async (dispatch, getState) => {\r\n    getState().socket.socket.emit(topic, room);\r\n    dispatch({ type: LISTEN_TO, topic: `series_${room}` });\r\n  };\r\n};\r\n// ------\r\n// GET MARKERS SENDS THE SOCKET EVENT TO REQUEST MARKERS\r\nexport const getMarkers = (hunt) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: GET_MARKERS, hunt });\r\n  };\r\n};\r\n\r\nexport const getMarkersBySeries = (series) => {\r\n  return async (dispatch, getState) => {\r\n    getState().socket.socket.emit(\"get_markers_by_series\", series);\r\n  };\r\n};\r\n\r\nexport const connectSocketThenEmit = (emit, value) => {\r\n  return async (dispatch, getState) => {\r\n    const {\r\n      device: { hash },\r\n    } = getState();\r\n    const socket = await socketWrap(hash);\r\n    socket.on(\"error\", (error) => dispatch({ type: ERROR, error }));\r\n    dispatch({ type: CONNECTED, socket });\r\n    if (socket) {\r\n      socket.emit(emit, value);\r\n    }\r\n  };\r\n};\r\n\r\n// should probably be refactored into just thunk action\r\nexport const emit = (emit, value) => {\r\n  return async (dispatch, getState) => {\r\n    const { socket } = getState();\r\n    if (!socket.socket) {\r\n      dispatch(connectSocketThenEmit(emit, value));\r\n    } else {\r\n      socket.socket.emit(emit, value);\r\n    }\r\n  };\r\n};\r\n\r\nexport const stopListening = (hunt) => {\r\n  return async (dispatch, getState) => {\r\n    const {\r\n      socket: { socket },\r\n    } = getState();\r\n    socket.off();\r\n    socket.disconnect();\r\n    socket.emit(\"leave\", hunt);\r\n    dispatch({ type: \"CLEAR_LISTENERS\" });\r\n    dispatch({ type: \"DISCONNECT\" });\r\n    dispatch({ type: RESET });\r\n  };\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { GET_MARKERS } from \"../actions\";\r\n\r\nconst Status = ({ getMarkers, hunt, status }) => {\r\n  const [focus, setFocus] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (focus) {\r\n      getMarkers(hunt);\r\n    }\r\n    const toggleFocus = () => {\r\n      setFocus(!focus);\r\n    };\r\n    window.addEventListener(\"focus\", toggleFocus, false);\r\n    window.addEventListener(\"blur\", toggleFocus, false);\r\n    return () => {\r\n      window.removeEventListener(\"focus\", toggleFocus, false);\r\n      window.removeEventListener(\"blur\", toggleFocus, false);\r\n    };\r\n  }, [focus, getMarkers, hunt]);\r\n  return (\r\n    <div style={{ display: \"none\" }}>\r\n      {status}-{focus}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => state.socket;\r\nconst mapDispatchToProps = dispatch => ({\r\n  getMarkers: hunt => dispatch({ type: GET_MARKERS, hunt })\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Status);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Svg = styled.svg`\r\n  margin: 0rem auto 0rem;\r\n  height: 100%;\r\n  max-width: 360px;\r\n  color: black;\r\n  display: block;\r\n`;\r\n\r\nconst Raptor = ({\r\n  bg,\r\n  fill = \"#FFFFFF\",\r\n  opacity = 1,\r\n  reff,\r\n  stroke = \"#FFFFFF\"\r\n}) => (\r\n  <Svg ref={reff} x=\"0px\" y=\"0px\" viewBox=\"0 0 864 864\">\r\n    <path\r\n      fill={bg}\r\n      d=\"M704.172,432.004c0-150.322-121.847-272.176-272.167-272.176c-150.313,0-272.177,121.854-272.177,272.176\r\nc0,150.321,121.863,272.169,272.177,272.169C582.325,704.172,704.172,582.325,704.172,432.004z\"\r\n    />\r\n\r\n    <path\r\n      stroke={stroke}\r\n      fill={fill}\r\n      opacity={opacity}\r\n      strokeWidth=\"10\"\r\n      strokeMiterlimit=\"10\"\r\n      d=\"M623.373,394.194v-34.077l-120.796-34.103l-22.437,66.463\r\nl-129.417,60.525l-135.987-70.14l-6.756,15.581l133.588,116.586l57.817-7.664l19.241,32.798l-40.041,34.124\r\nc9.488,10.356,60.784,36.836,60.784,36.836l25.191-2.766l-34.262-35.532l25.89-17.396l12.872-58.715l62.837-24.296l-3.854,33.212\r\nl14.588,3.42l24.923-51.034l-46.001-18.883l15.536-49.255L623.373,394.194z\"\r\n    />\r\n  </Svg>\r\n);\r\n\r\nexport default Raptor;\r\n","import styled from \"styled-components\";\r\n\r\nexport const ScanContainer = styled.div`\r\n  margin: 10% auto;\r\n  background: white;\r\n  border: 1px solid black;\r\n  color: black;\r\n  padding: 19px;\r\n  font-family: Arial;\r\n  font-weight: bold;\r\n  font-size: 2.4rem;\r\n  box-shadow: 13px 16px #ff0909;\r\n  height: 3rem;\r\n`;\r\n\r\nexport const ButtonContainer = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  width: 88%;\r\n  max-width: 400px;\r\n  max-height: 777px;\r\n  margin: 3% auto;\r\n  div {\r\n    margin: 1% auto;\r\n    /* border-bottom: 4px dotted black; */\r\n    padding: 3%;\r\n    width: 80%;\r\n  }\r\n\r\n  input,\r\n  button {\r\n    margin: 7% auto 7%;\r\n    align-self: center;\r\n    padding: 0;\r\n  }\r\n  .alt-center {\r\n    color: #fc8888;\r\n    text-align: center;\r\n    cursor: pointer;\r\n  }\r\n  @media only screen and (min-width: 700px) {\r\n    justify-content: flex-start;\r\n  }\r\n`;\r\n\r\nexport const Input = styled.input`\r\n  text-align: center;\r\n  font-family: Arial;\r\n  border: 2px black solid;\r\n  height: 56px;\r\n  box-shadow: 9px 10px black;\r\n  width: 79%;\r\n  max-width: 430px;\r\n  font-size: 1.5rem;\r\n`;\r\n\r\nexport const Button = styled.button`\r\n  width: 8rem;\r\n  height: 8rem;\r\n  border-radius: 50%;\r\n  border: 2px solid #000000;\r\n  font-size: 1.6rem;\r\n  cursor: pointer;\r\n  background: white;\r\n  box-shadow: -5px 3px black;\r\n  line-height: 122px;\r\n`;\r\n\r\nexport const SquareButton = styled.button`\r\n  background: white;\r\n  color: black;\r\n  border: 2px solid white;\r\n  margin: 4px;\r\n`;\r\n\r\nexport const MapContainer = styled.div`\r\n  height: 100vh;\r\n  width: 100%;\r\n`;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\n\r\nimport chroma from \"chroma-js\";\r\nimport Raptor from \"../graphics/Raptor\";\r\nimport { ScanContainer } from \"../styles/styles\";\r\n\r\nconst Container = styled.div`\r\n  height: 100%;\r\n  margin: 1rem;\r\n  background: white;\r\n  padding: 1rem;\r\n  display: grid;\r\n  grid-template-rows: 30% 40% 30%;\r\n  max-width: 700px;\r\n  @media only screen and (min-width: 700px) {\r\n    margin: 1rem auto;\r\n  }\r\n`;\r\n\r\nconst Message = styled.div`\r\n  color: white;\r\n  font-size: 1.6rem;\r\n  text-align: center;\r\n  font-family: Arial, Helvetica, sans-serif;\r\n  font-weight: bold;\r\n  width: 70%;\r\n  margin: auto;\r\n  text-shadow: 4px 4px black;\r\n  box-shadow: 7px 11px black;\r\n  background-color: white;\r\n  border: 1px solid black;\r\n  padding: 1rem;\r\n`;\r\n\r\nconst Scanning = ({ message, scanTainer, seriesId }) => {\r\n  const [displayMessage, setMessage] = useState(\"scanning...\");\r\n  const raptorRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const text = scanTainer.current;\r\n    const raptor = raptorRef.current;\r\n    raptor.getElementsByTagName(\"path\")[0].style.stroke = \"red\";\r\n    raptor.getElementsByTagName(\"path\")[0].style.strokeWidth = \"21px\";\r\n    const startTime = Date.now();\r\n    const scale = chroma.scale([\"black\", \"red\"]);\r\n    let frame;\r\n    let counter = 0;\r\n\r\n    const found = () => {\r\n      cancelAnimationFrame(frame);\r\n      text.style.color = \"black\";\r\n      text.style.background = \"white\";\r\n      text.style.boxShadow = `13px 16px black`;\r\n    };\r\n\r\n    const colorMessage = () => {\r\n      const raptorOutline = raptor.getElementsByTagName(\"path\")[0].style;\r\n      if (message === \"you already found this one!\") {\r\n        raptorOutline.stroke = \"yellow\";\r\n      } else if (message === \"cool find!\") {\r\n        raptorOutline.stroke = \"#9dff9d\";\r\n      } else if (message === \"you win!\") {\r\n        raptorOutline.stroke = \"lavender\";\r\n      } else {\r\n        raptorOutline.stroke = \"red\";\r\n      }\r\n    };\r\n\r\n    const animate = () => {\r\n      if (message) {\r\n        counter++;\r\n        if (counter > 200) {\r\n          found();\r\n          colorMessage();\r\n          setMessage(message);\r\n          return;\r\n        }\r\n      }\r\n      const diff = Date.now() - startTime;\r\n      const colorWave = 0.5 * (2 + Math.sin(diff * 0.001));\r\n      const bgWave = 0.5 * (1 + Math.cos(diff * 0.001));\r\n      text.style.color = scale(colorWave);\r\n      text.style.background = scale(bgWave);\r\n      text.style.boxShadow = `13px 16px ${scale(colorWave)}`;\r\n      const rotateWave = 180 + 360 * Math.sin(diff * 0.001) * 0.5;\r\n      raptor.style.transform = `rotate(${rotateWave}deg)`;\r\n      document.body.style.background = scale(bgWave * 0.8);\r\n      frame = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animate();\r\n\r\n    return () => {\r\n      cancelAnimationFrame(frame);\r\n      document.body.style.background = \"white\";\r\n    };\r\n  }, [message, scanTainer]);\r\n  return (\r\n    <Container>\r\n      <ScanContainer ref={scanTainer}>\r\n        {displayMessage === \"scanning...\" ? \"Scanning\" : \"Scanned\"}\r\n      </ScanContainer>\r\n      <div>\r\n        {seriesId ? (\r\n          <Link to={`/map/${seriesId}`}>\r\n            <Raptor reff={raptorRef} />\r\n          </Link>\r\n        ) : (\r\n          <Raptor reff={raptorRef} />\r\n        )}\r\n      </div>\r\n      <Message>{displayMessage.toUpperCase()}</Message>\r\n    </Container>\r\n  );\r\n};\r\nexport default Scanning;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { emit, listenTo } from \"../actions\";\r\n\r\nimport Scanning from \"../components/Scanning\";\r\nimport { ScanContainer } from \"../styles/styles\";\r\n\r\nconst Scan = ({\r\n  connected,\r\n  codeResponse,\r\n  listenToCodeResponse,\r\n  listenToMarkers,\r\n  listenToWin,\r\n  match,\r\n  sendCode,\r\n  seriesId\r\n}) => {\r\n  const scanTainer = useRef();\r\n  const myRe = new RegExp(process.env.REACT_APP_REG);\r\n  const meepo = myRe.exec(match.params.code);\r\n\r\n  useEffect(() => {\r\n    if (!meepo) {\r\n      const {\r\n        params: { code }\r\n      } = match;\r\n      sendCode(code);\r\n    }\r\n  }, [meepo, match, sendCode]);\r\n  useEffect(() => {\r\n    if (!connected) return;\r\n    listenToCodeResponse();\r\n    listenToMarkers();\r\n  }, [connected, listenToWin, listenToCodeResponse, listenToMarkers]);\r\n  return (\r\n    <div style={{ height: \"90%\" }}>\r\n      {!meepo ? (\r\n        <Scanning\r\n          scanTainer={scanTainer}\r\n          message={codeResponse}\r\n          seriesId={seriesId}\r\n        />\r\n      ) : (\r\n        <ScanContainer ref={scanTainer}>\r\n          This is not a valid request for reasons I cannot explain :)\r\n        </ScanContainer>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({\r\n  socket: { connected, codeResponse, seriesId }\r\n}) => ({\r\n  connected,\r\n  codeResponse,\r\n  seriesId\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  sendCode: code => dispatch(emit(\"code\", code)),\r\n  listenToCodeResponse: () => dispatch(listenTo(\"code_response\")),\r\n  listenToWin: () => dispatch(listenTo(\"win\")),\r\n  listenToMarkers: () => dispatch(listenTo(\"markers\"))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Scan);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Raptor from \"../graphics/Raptor\";\r\nconst K_SIZE = 70;\r\n\r\nconst greatPlaceStyle = {\r\n  // initially any map object has left top corner at lat lng coordinates\r\n  // it's on you to set object origin to 0,0 coordinates\r\n  position: \"absolute\",\r\n  width: K_SIZE,\r\n  height: K_SIZE,\r\n  left: -K_SIZE / 2,\r\n  top: -K_SIZE / 2,\r\n\r\n  //   border: \"5px solid #f44336\",\r\n  borderRadius: K_SIZE,\r\n  // backgroundColor: \"white\",\r\n  textAlign: \"center\",\r\n  color: \"#3f51b5\",\r\n  fontSize: 16,\r\n  fontWeight: \"bold\",\r\n  //   padding: 4,\r\n  cursor: \"pointer\",\r\n  userSelect: \"none\"\r\n};\r\n\r\nconst greatPlaceStyleHover = {\r\n  ...greatPlaceStyle\r\n  //   border: \"5px solid #3f51b5\",\r\n  //   color: \"#f44336\"\r\n};\r\n\r\nconst RaptorMarker = ({ found, r = 200, g = 0, b = 0 }) => {\r\n  const [bg, setBg] = useState(`rgb(${r},${g},${b})`);\r\n  useEffect(() => {\r\n    const startTime = Date.now();\r\n    let frame;\r\n    const animate = () => {\r\n      const diff = Date.now() - startTime;\r\n      const r = 200 + 40 * Math.sin(diff * 0.01);\r\n      const color = `rgb(${Math.floor(r)},${g},${b})`;\r\n      setBg(color);\r\n      if (!found) {\r\n        frame = requestAnimationFrame(animate);\r\n      } else {\r\n        cancelAnimationFrame(frame);\r\n      }\r\n    };\r\n    animate();\r\n    return () => cancelAnimationFrame(frame);\r\n    //eslint-disable-next-line\r\n  }, [found]);\r\n  return (\r\n    <div style={greatPlaceStyleHover} onPointerDown={console.log}>\r\n      <Raptor\r\n        bg={found ? \"#7ffdcb\" : bg}\r\n        fill={`${found ? \"#FF0000\" : \"#FFFFFF\"}`}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RaptorMarker;\r\n","import React from \"react\";\r\n\r\nconst Smiler = ({ ...rest }) => {\r\n  return (\r\n    <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 400 400\" {...rest}>\r\n      <g>\r\n        <path\r\n          d=\"M210.51,51c81.3,0,147.57,66.36,147.35,147.56c-0.22,81.32-66.23,147.26-147.34,147.2\r\n\t\tc-81.38-0.07-147.64-66.42-147.35-147.55C63.47,116.8,129.33,51,210.51,51z M210.47,66.64C137.9,66.68,78.75,125.88,78.81,198.42\r\n\t\tc0.06,72.61,59.22,131.74,131.75,131.69c72.59-0.05,131.71-59.23,131.67-131.78C342.18,125.73,283.03,66.6,210.47,66.64z\"\r\n        />\r\n        <path\r\n          d=\"M208.63,299.23c-29.03-0.67-54.45-12.82-74-36.98c-3.39-4.18-3.2-8.59,0.34-11.6c3.61-3.07,8.17-2.44,11.7,1.9\r\n\t\tc12.38,15.19,27.92,25.44,47.25,28.96c31.58,5.75,58.31-3.18,79.44-27.76c1.25-1.45,2.47-3.08,4.06-4.05\r\n\t\tc3.09-1.89,7.18-0.92,9.53,1.85c2.49,2.94,2.85,6.86-0.07,9.94c-6.23,6.56-12.34,13.41-19.44,18.92\r\n\t\tC251.26,292.95,231.11,299.19,208.63,299.23z\"\r\n        />\r\n        <path\r\n          d=\"M125.31,175.16c-0.04-12.78,10.18-23.19,22.88-23.3c12.89-0.11,23.44,10.19,23.62,23.04\r\n\t\tc0.17,12.75-10.35,23.42-23.18,23.48C135.7,198.44,125.35,188.13,125.31,175.16z\"\r\n        />\r\n        <path\r\n          d=\"M295.73,175.25c-0.04,12.91-10.49,23.23-23.42,23.13c-12.66-0.1-23.05-10.55-23.08-23.22\r\n\t\tc-0.03-12.8,10.5-23.31,23.35-23.31C285.48,151.86,295.77,162.26,295.73,175.25z\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\nexport default Smiler;\r\n","import React, { useEffect } from \"react\";\r\nimport GoogleMapReact from \"google-map-react\";\r\nimport { MapContainer } from \"../styles/styles\";\r\nimport RaptorMarker from \"../markers/RaptorMarker\";\r\nimport whiteMap from \"../styles/whiteMap.json\";\r\nimport Smiler from \"../graphics/Smiler\";\r\n\r\nconst sf = {\r\n  lat: 37.78126372769892,\r\n  lng: -122.41344338335298,\r\n};\r\n\r\nconst pewpew = {\r\n  lat: 40.716323,\r\n  lng: -73.989691,\r\n};\r\n\r\nconst ny = {\r\n  lat: 40.703741,\r\n  lng: -73.931124,\r\n};\r\n\r\nconst la = {\r\n  lat: 34.079952,\r\n  lng: -118.269773,\r\n};\r\n\r\nconst la2 = {\r\n  lat: 34.041662314344194,\r\n  lng: -118.236226156283,\r\n};\r\n\r\nconst Map = ({\r\n  history,\r\n  hunt,\r\n  mapKey,\r\n  markers,\r\n  markersFound,\r\n  places,\r\n  reset,\r\n}) => {\r\n  // const [userLocation, setUserLocation] = useState();\r\n  useEffect(() => {\r\n    const startTime = Date.now();\r\n    let frame;\r\n    const animate = () => {\r\n      const diff = Date.now() - startTime;\r\n      try {\r\n        const smiler = document.getElementById(\"smiler\");\r\n        smiler.style.opacity = Math.sin(diff);\r\n        frame = requestAnimationFrame(animate);\r\n      } catch {\r\n        cancelAnimationFrame(frame);\r\n      }\r\n    };\r\n\r\n    animate();\r\n  }, [markers]);\r\n  // useEffect(() => {\r\n  //   return () => {\r\n  //     reset();\r\n  //     console.log(\"WAHT\");\r\n  //   };\r\n  // }, []);\r\n  // useEffect(() => {\r\n  //   navigator.geolocation.getCurrentPosition(p => {\r\n  //     const { latitude: lat, longitude: lng } = p.coords;\r\n  //     setUserLocation({ lat, lng });\r\n  //   });\r\n  // }, []);\r\n\r\n  if (markers.length === 0) {\r\n    return (\r\n      <div>\r\n        <Smiler id=\"smiler\" style={{ fill: \"red\" }} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const getCenter = () => {\r\n    switch (hunt) {\r\n      case \"3\":\r\n        return sf;\r\n      case \"4\":\r\n        return ny;\r\n      case \"5\":\r\n        return la;\r\n      case \"6\":\r\n        return la2;\r\n      default:\r\n        return sf;\r\n    }\r\n  };\r\n\r\n  const center = getCenter();\r\n\r\n  return (\r\n    <MapContainer>\r\n      <GoogleMapReact\r\n        // defaultCenter={userLocation ? userLocation : places.ppark}\r\n        defaultCenter={center}\r\n        center={center}\r\n        defaultZoom={15}\r\n        bootstrapURLKeys={{ key: mapKey }}\r\n        options={{ styles: whiteMap }}\r\n        onChildClick={(id, data) => {\r\n          if (data.found) return;\r\n          history.push(`/map/${hunt}/pop/${id}`);\r\n        }}\r\n      >\r\n        {markers.map((m, i) => {\r\n          return (\r\n            <RaptorMarker\r\n              key={m.id}\r\n              id={m.name + m.id}\r\n              type={m.type}\r\n              found={markersFound.includes(`${m.id}`)}\r\n              lat={m.lat}\r\n              lng={m.lng}\r\n            />\r\n          );\r\n        })}\r\n      </GoogleMapReact>\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: 10;\r\n`;\r\nconst Button = styled.button`\r\n  background: black;\r\n  color: white;\r\n  width: 100px;\r\n  height: 47px;\r\n  border: 5px solid white;\r\n  font-family: monospace;\r\n  font-weight: bolder;\r\n  opacity: 67%;\r\n`;\r\n\r\nconst Logout = ({ logout }) => {\r\n  return (\r\n    <Container onClick={logout}>\r\n      <Button>Logout</Button>\r\n    </Container>\r\n  );\r\n};\r\nexport default Logout;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Raptor from \"../graphics/Raptor\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Message = styled.div`\r\n  color: red;\r\n  font-size: 54px;\r\n  text-align: center;\r\n  font-family: Arial;\r\n  text-shadow: 4px 3px black;\r\n`;\r\n\r\nconst Loading = ({ fill = \"white\", message }) => {\r\n  const [opacity, setOpacity] = useState(1);\r\n  useEffect(() => {\r\n    let frame;\r\n    const startTime = Date.now();\r\n    const animate = () => {\r\n      frame = requestAnimationFrame(animate);\r\n      const diff = Date.now() - startTime;\r\n      setOpacity(0.5 * (1.5 + Math.sin(diff * 0.003)));\r\n    };\r\n    animate();\r\n    return () => cancelAnimationFrame(frame);\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <Raptor opacity={opacity} fill={fill} />\r\n      <Message>{message}</Message>\r\n    </div>\r\n  );\r\n};\r\nexport default Loading;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Lottie from \"react-lottie\";\r\nimport animationData from \"../../animations/SMILE.json\";\r\nimport yay from \"../../animations/YAY.json\";\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\nimport { getPlace } from \"../../services\";\r\nimport Smiler from \"../../graphics/Smiler\";\r\nimport Loading from \"../../animations/Loading\";\r\n\r\nconst H1 = styled.h1`\r\n  text-align: center;\r\n  font-size: 4rem;\r\n`;\r\n\r\nconst Paragraph = styled.div`\r\n  margin: 17px 10%;\r\n  font-size: 2rem;\r\n  text-align: center;\r\n`;\r\n\r\nconst WinView = ({ hunt, name, reset }) => {\r\n  const [place, setPlace] = useState();\r\n  useEffect(() => {\r\n    if (!place) {\r\n      getPlace(hunt).then(place => setTimeout(() => setPlace(place), 1000));\r\n    } else {\r\n      document\r\n        .getElementsByTagName(\"svg\")[0]\r\n        .setAttribute(\"viewBox\", \"0 -200 1080 1080\");\r\n    }\r\n  }, [place]);\r\n\r\n  useEffect(() => {\r\n    return () => reset();\r\n  }, [reset]);\r\n  if (!place) return <Loading message=\"checking your place...\" />;\r\n  return (\r\n    <div>\r\n      <div style={{ height: 200 }}>\r\n        <Lottie options={{ loop: true, autoplay: true, animationData }} />\r\n      </div>\r\n      <div style={{ margin: \"20px 0\" }}>\r\n        <Lottie options={{ loop: true, autoplay: true, animationData: yay }} />\r\n      </div>\r\n      <Paragraph>You finished</Paragraph>\r\n      <Paragraph>\r\n        {place.place.place} out of {place.place.outof}\r\n      </Paragraph>\r\n      <Paragraph>on</Paragraph>\r\n      <div\r\n        style={{ textAlign: \"center\", margin: \"1rem 0 4rem\", fontSize: \"4rem\" }}\r\n      >\r\n        {name}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  reset: () => dispatch({ type: \"RESET\" })\r\n});\r\nexport default connect(null, mapDispatchToProps)(WinView);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  connectSocket,\r\n  getMarkers,\r\n  logOut,\r\n  listenTo,\r\n  joinRoom\r\n} from \"../../actions\";\r\nimport Status from \"../Status\";\r\nimport Map from \"../../components/Map\";\r\nimport Logout from \"../../components/Logout\";\r\nimport WinView from \"./WinView\";\r\nimport Loading from \"../../animations/Loading\";\r\n\r\n// when the map socket connects it needs to update it's marker map\r\nconst MapView = ({\r\n  completed,\r\n  connected,\r\n  connectToSocket,\r\n  getMarkers,\r\n  history,\r\n  hunt,\r\n  joinSeries,\r\n  logout,\r\n  listenToMarkerFound,\r\n  listenToNewMarker,\r\n  listenToWin,\r\n  name,\r\n  loading,\r\n  mapKey,\r\n  markers,\r\n  markersFound,\r\n  places,\r\n  reset\r\n}) => {\r\n  // useEffect(() => {\r\n  //   if (connected) return;\r\n  //   connectToSocket();\r\n  //   //eslint-disable-next-line\r\n  // }, [connectToSocket]);\r\n\r\n  useEffect(() => {\r\n    if (!connected) return;\r\n    getMarkers(hunt);\r\n    listenToMarkerFound();\r\n    listenToNewMarker();\r\n    listenToWin();\r\n    // joinSeries(hunt);\r\n    //eslint-disable-next-line\r\n  }, [connected, getMarkers]);\r\n  if (loading) return <Loading message=\"to the hunt we go..\" />;\r\n  if (completed) return <WinView name={name} hunt={hunt} />;\r\n  return (\r\n    <div>\r\n      <Status hunt={hunt} />\r\n      <Logout logout={logout} />\r\n      <Map\r\n        history={history}\r\n        hunt={hunt}\r\n        mapKey={mapKey}\r\n        markers={markers}\r\n        markersFound={markersFound}\r\n        places={places}\r\n        reset={reset}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({\r\n  device: { mapKey },\r\n  map: { completed, markers, markersFound, loading, places },\r\n  socket: { connected }\r\n}) => ({\r\n  completed,\r\n  connected,\r\n  loading,\r\n  mapKey,\r\n  markers,\r\n  markersFound,\r\n  places\r\n});\r\nconst mapDipstachToProps = dispatch => ({\r\n  connectToSocket: () => dispatch(connectSocket()),\r\n  getMarkers: hunt => dispatch(getMarkers(hunt)),\r\n  // joinSeries: hunt => dispatch(joinRoom(hunt)),\r\n  logout: () => dispatch(logOut()),\r\n  listenToNewMarker: () => dispatch(listenTo(\"new_marker\")),\r\n  listenToMarkerFound: () => dispatch(listenTo(\"marker_found\")),\r\n  listenToWin: () => dispatch(listenTo(\"win\")),\r\n  reset: () => dispatch({ type: \"RESET\" }),\r\n  dispatch\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDipstachToProps)(MapView);\r\n","import React from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst modalStyle = {\r\n  position: \"fixed\",\r\n  left: 0,\r\n  top: 0,\r\n  bottom: 0,\r\n  right: 0,\r\n  backgroundColor: \"rgba(0,0,0,.4)\",\r\n  color: \"#FFF\"\r\n};\r\nconst Modal = ({ children, onClick }) => {\r\n  return createPortal(\r\n    <div id=\"modal-container\" style={modalStyle} onClick={onClick}>\r\n      {children}\r\n    </div>,\r\n    document.getElementById(\"modal_root\")\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Modal from \"../../components/Modal\";\r\nimport styled from \"styled-components\";\r\nimport { Input, Button } from \"../../styles/styles\";\r\nimport { emit } from \"../../actions\";\r\n\r\nconst ModalMessage = styled.div`\r\n  margin: auto;\r\n  background: ${props => props.background};\r\n  width: 80%;\r\n  display: block;\r\n  padding: 1rem;\r\n  max-height: ${props => `${props.maxHeight}px`};\r\n  overflow: hidden;\r\n  transition: max-height 1s, background 1s;\r\n  font-size: ${window.innerWidth > 600 ? \"40px\" : \"1rem\"};\r\n`;\r\n\r\nconst Chodal = ({ history, markers, match, sendCode }) => {\r\n  const [maxHeight, setMaxHeight] = useState(1);\r\n  const [background, setBackground] = useState(\"red\");\r\n  const [input, setInput] = useState(\"\");\r\n  const inputRef = useRef();\r\n\r\n  useEffect(() => {\r\n    setMaxHeight(1000);\r\n    inputRef.current.focus();\r\n  }, []);\r\n\r\n  const m = markers.find(m => m.id === parseInt(match.params.marker));\r\n  if (!m) {\r\n    history.goBack();\r\n    window.location = \"/map/\" + window.location.pathname.split(\"/\")[2];\r\n  }\r\n\r\n  const handleChange = e => setInput(e.target.value);\r\n\r\n  const keyPressed = e => {\r\n    if (e.key === \"Enter\") sendIt();\r\n  };\r\n\r\n  const sendIt = () => {\r\n    const inputClean = input.replace(/\\s/g, \"\").toLowerCase();\r\n    sendCode({ input: inputClean, id: m.id });\r\n    retract();\r\n  };\r\n\r\n  const retract = () => {\r\n    setBackground(\"white\");\r\n    setMaxHeight(0);\r\n    setTimeout(() => history.goBack(), 1000);\r\n  };\r\n\r\n  if (m.length === 0) return <div>wtf</div>;\r\n  return (\r\n    <Modal\r\n      onClick={e => {\r\n        if (e.target.id === \"modal-container\") {\r\n          retract();\r\n        }\r\n      }}\r\n    >\r\n      <ModalMessage\r\n        id=\"message-container\"\r\n        background={background}\r\n        maxHeight={maxHeight}\r\n      >\r\n        <div style={{ pointerEvents: \"none\", textAlign: \"center\" }}>\r\n          {m.description}\r\n        </div>\r\n        {m.type.includes(\"input\") && (\r\n          <div>\r\n            <Input\r\n              ref={inputRef}\r\n              onChange={handleChange}\r\n              onKeyPress={keyPressed}\r\n              style={{ margin: \"1.6rem auto 2.4rem\", display: \"block\" }}\r\n            />\r\n            <Button\r\n              onClick={sendIt}\r\n              style={{ margin: \"2rem auto 1.4rem\", display: \"block\" }}\r\n            >\r\n              SEND IT\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </ModalMessage>\r\n    </Modal>\r\n  );\r\n};\r\nconst mapStateToProps = ({ map: { markers } }) => ({ markers });\r\nconst mapDispatchToProps = dispatch => ({\r\n  sendCode: code => dispatch(emit(\"code\", { code }))\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Chodal);\r\n","import React, { useEffect } from \"react\";\r\nimport Lottie from \"react-lottie\";\r\nimport animationData from \"./SMILE.json\";\r\n\r\nconst SmallSmile = ({ height = 200 }) => {\r\n  useEffect(() => {\r\n    document\r\n      .getElementsByTagName(\"svg\")[0]\r\n      .setAttribute(\"viewBox\", \"-30 -200 1080 1080\");\r\n  }, []);\r\n  return (\r\n    <div style={{ height }}>\r\n      <Lottie options={{ loop: true, autoplay: true, animationData }} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SmallSmile;\r\n","import React from \"react\";\r\nimport Lottie from \"react-lottie\";\r\nimport animationData from \"../animations/NOTREADY.json\";\r\nimport SmallSmile from \"../animations/SmallSmile\";\r\nconst NotReady = () => {\r\n  return (\r\n    <div\r\n      style={{ display: \"grid\", gridTemplateRows: \"20% 80%\", height: \"100%\" }}\r\n    >\r\n      <SmallSmile height={\"\"} />\r\n      <Lottie options={{ autoplay: true, loop: true, animationData }} />\r\n    </div>\r\n  );\r\n};\r\nexport default NotReady;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport MapView from \"./MapView\";\r\nimport WinView from \"./WinView\";\r\nimport { Route } from \"react-router-dom\";\r\nimport Chodal from \"./Chodal\";\r\nimport {\r\n  UNAUTHORIZED,\r\n  listenTo,\r\n  connectSocket,\r\n  joinRoom,\r\n  stopListening\r\n} from \"../../actions\";\r\nimport { seriesReady } from \"../../services\";\r\nimport NotReady from \"../../components/NoReady\";\r\nimport Loading from \"../../animations/Loading\";\r\n\r\nconst MainView = ({\r\n  completed,\r\n  connected,\r\n  connectToSocket,\r\n  dispatch,\r\n  history,\r\n  joinSeries,\r\n  listenToReady,\r\n  loading,\r\n  match,\r\n  error,\r\n  name,\r\n  ready,\r\n  stopListening\r\n}) => {\r\n  const { hunt } = match.params;\r\n  if (error === UNAUTHORIZED || error === \"NOT_FOUND\") {\r\n    history.push(\"/\");\r\n  }\r\n  useEffect(() => {\r\n    if (connected) return;\r\n    connectToSocket();\r\n    //eslint-disable-next-line\r\n  }, [connectToSocket, connect]);\r\n\r\n  useEffect(() => {\r\n    seriesReady(dispatch, hunt);\r\n\r\n    return () => stopListening(hunt);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!connected) return;\r\n    listenToReady();\r\n    joinSeries(hunt);\r\n  }, [connected]);\r\n  if (loading)\r\n    return (\r\n      <div>\r\n        <Loading message=\"to the hunt we go...\" />\r\n      </div>\r\n    );\r\n  if (!ready) {\r\n    return <NotReady />;\r\n  }\r\n  return (\r\n    <div>\r\n      <div>\r\n        <Route\r\n          path={`/map/:hunt/pop/:marker`}\r\n          render={({ match }) => <Chodal history={history} match={match} />}\r\n        />\r\n        <MapView history={history} hunt={hunt} name={name} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({\r\n  map: { completed, name, ready, loading },\r\n  device: { error },\r\n  socket: { connected }\r\n}) => ({\r\n  completed,\r\n  connected,\r\n  error,\r\n  loading,\r\n  name,\r\n  ready\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  connectToSocket: () => dispatch(connectSocket()),\r\n  listenToReady: () => dispatch(listenTo(\"ready\")),\r\n  joinSeries: hunt => dispatch(joinRoom(hunt)),\r\n  stopListening: hunt => dispatch(stopListening(hunt)),\r\n  dispatch\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainView);\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport { DEVICE_NOT_REGISTERED } from \"../statuses\";\r\nimport { Button, Input, ButtonContainer } from \"../styles/styles\";\r\nimport { newToken, registerDevice } from \"../actions\";\r\nimport { connect } from \"react-redux\";\r\nimport Loading from \"../animations/Loading\";\r\nimport { validateEmail } from \"../services/utils\";\r\nimport Smiler from \"../graphics/Smiler\";\r\n\r\nconst Registration = ({ getToken, hash, registerDevice, status, token }) => {\r\n  const [error, setError] = useState(\"\");\r\n  const email = useRef();\r\n\r\n  const register = () => {\r\n    if (email.current === \"\") return;\r\n    if (!validateEmail(email.current)) {\r\n      setError(\"This email is invalid...\");\r\n      return;\r\n    }\r\n    registerDevice(email.current.toLowerCase());\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", e => {\r\n      if (e.keyCode === 13) {\r\n        register();\r\n      }\r\n    });\r\n    // eslint-disable-next-line\r\n  }, []);\r\n  if (!hash) return <Loading message=\"registering device...\" />;\r\n\r\n  if (status === DEVICE_NOT_REGISTERED) {\r\n    const handleChange = e => (email.current = e.target.value);\r\n    return (\r\n      <ButtonContainer>\r\n        <div style={{ borderBottom: \"none\" }}>\r\n          <Smiler\r\n            style={{\r\n              margin: \"0 auto\",\r\n              display: \"block\",\r\n              width: \"35%\"\r\n            }}\r\n          />\r\n        </div>\r\n        <div>hmm I don't recognize this device...</div>\r\n        <div>please sync it to your email</div>\r\n        <div\r\n          style={{\r\n            color: \"#f36060\",\r\n            display: error ? \"block\" : \"none\",\r\n            borderBottom: \"none\",\r\n            margin: \"7% auto -8%\",\r\n            textAlign: \"center\"\r\n          }}\r\n        >\r\n          {error}\r\n        </div>\r\n        <Input onChange={handleChange} name=\"email\" placeholder=\"email...\" />\r\n        <Button onClick={register}>Sync</Button>\r\n      </ButtonContainer>\r\n    );\r\n  }\r\n\r\n  if (!token) {\r\n    return (\r\n      <ButtonContainer>\r\n        <div style={{ borderBottom: \"none\" }}>\r\n          <Smiler\r\n            style={{\r\n              display: \"block\",\r\n              width: \"35%\",\r\n              margin: \"0 auto\",\r\n              fill: \"#3ef3ff\"\r\n            }}\r\n          />\r\n        </div>\r\n        <div style={{ border: \"2px solid black\" }}>\r\n          <div>oh boy! welcome back :)</div>\r\n          <div>you are looking quite nice today</div>\r\n          <div>press connect below to sync</div>\r\n        </div>\r\n        <Button onClick={getToken}>Connect</Button>\r\n      </ButtonContainer>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = state => state.device;\r\nconst mapDispatchToProps = dispatch => ({\r\n  getToken: () => dispatch(newToken()),\r\n  registerDevice: email => dispatch(registerDevice(email))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Registration);\r\n","export function validateEmail(email) {\r\n  // eslint-disable-next-line\r\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  return re.test(String(email).toLowerCase());\r\n}\r\n","export const DEVICE_NOT_REGISTERED = \"device_not_registered\";\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport GoogleMapReact from \"google-map-react\";\r\nimport { MapContainer, SquareButton } from \"../styles/styles\";\r\nimport RaptorMarker from \"../markers/RaptorMarker\";\r\nimport whiteMap from \"../styles/whiteMap.json\";\r\nimport Smiler from \"../graphics/Smiler\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Overlay = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0px;\r\n  background: black;\r\n  color: white;\r\n  z-index: 10;\r\n  width: 120px;\r\n  border: 5px white solid;\r\n  padding: 0.5rem;\r\n  opacity: 67%;\r\n\r\n  input {\r\n    width: 90%;\r\n    margin: 4px;\r\n    padding: 2px;\r\n  }\r\n`;\r\n\r\nconst sf = {\r\n  lat: 37.78126372769892,\r\n  lng: -122.41344338335298\r\n};\r\n\r\nconst pewpew = {\r\n  lat: 40.716323,\r\n  lng: -73.989691\r\n};\r\n\r\nconst ny = {\r\n  lat: 40.703741,\r\n  lng: -73.931124\r\n};\r\n\r\nconst CMap = ({ mapKey, markers, series, setScene, socket, getMarkers }) => {\r\n  const [userLocation, setUserLocation] = useState();\r\n  const [marker, setMarker] = useState([]);\r\n  const [info, setInfo] = useState({\r\n    name: \"\",\r\n    hash: \"\",\r\n    details: \"\"\r\n  });\r\n\r\n  useEffect(() => {\r\n    getMarkers(series);\r\n    navigator.geolocation.getCurrentPosition(p => {\r\n      const { latitude: lat, longitude: lng } = p.coords;\r\n      setUserLocation({ lat, lng });\r\n    });\r\n    //eslint-disable-next-line\r\n  }, []);\r\n\r\n  const handleChange = e =>\r\n    setInfo({ ...info, [e.target.name]: e.target.value });\r\n\r\n  const submitMarker = () => {\r\n    // info.series = series;\r\n    // info.lat = marker.lat;\r\n    // info.lng = marker.lng;\r\n    const payload = {\r\n      marker: { ...info, lat: marker.lat, lng: marker.lng },\r\n      series\r\n    };\r\n    socket.emit(\"create_marker\", payload);\r\n    getMarkers(series);\r\n    //createMarker(payload);\r\n  };\r\n\r\n  return (\r\n    <MapContainer>\r\n      {!userLocation ? (\r\n        <Smiler id=\"smiler\" style={{ fill: \"red\" }} />\r\n      ) : (\r\n        <Fragment>\r\n          <Overlay>\r\n            {Object.keys(info).map(i => {\r\n              return (\r\n                <input\r\n                  key={i}\r\n                  placeholder={i}\r\n                  name={i}\r\n                  onChange={handleChange}\r\n                />\r\n              );\r\n            })}\r\n            <SquareButton onClick={submitMarker}>submit</SquareButton>\r\n            <SquareButton onClick={() => setScene(\"SERIES\")}>back</SquareButton>\r\n          </Overlay>\r\n          <GoogleMapReact\r\n            defaultCenter={ny}\r\n            defaultZoom={15}\r\n            bootstrapURLKeys={{ key: mapKey }}\r\n            options={{ styles: whiteMap }}\r\n            onClick={e => {\r\n              const marker = {\r\n                key: \"frog\",\r\n                id: \"frog\",\r\n                found: false,\r\n                lat: e.lat,\r\n                lng: e.lng\r\n              };\r\n              setMarker(marker);\r\n            }}\r\n            onChildClick={(e, p) => {\r\n              console.log(p);\r\n            }}\r\n          >\r\n            {markers.map(marker => {\r\n              return (\r\n                <RaptorMarker\r\n                  g={200}\r\n                  b={100}\r\n                  key={marker.hash}\r\n                  id={marker.hash}\r\n                  found={marker.found}\r\n                  lat={marker.lat}\r\n                  lng={marker.lng}\r\n                />\r\n              );\r\n            })}\r\n            <RaptorMarker\r\n              key={marker.hash}\r\n              id={marker.hash}\r\n              found={marker.found}\r\n              lat={marker.lat}\r\n              lng={marker.lng}\r\n            />\r\n          </GoogleMapReact>\r\n        </Fragment>\r\n      )}\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default CMap;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button } from \"../styles/styles\";\r\nimport { sendSeries, getAllSeries } from \"../services\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  align-content: center;\r\n  margin-top: 5rem;\r\n  font-size: 5rem;\r\n\r\n  input {\r\n    text-align: center;\r\n    height: 2rem;\r\n    width: 17rem;\r\n    margin: 1rem auto;\r\n    display: block;\r\n  }\r\n  input:last-child {\r\n    margin-bottom: 1rem;\r\n  }\r\n`;\r\n\r\nconst Select = styled.select`\r\n  margin: 2rem;\r\n  width: 200px;\r\n  height: 47px;\r\n  font-size: 18px;\r\n`;\r\n\r\nconst Series = ({ setScene, setSelectedSeries, socket }) => {\r\n  const [values, setValues] = useState({ name: \"\", cat: \"\", description: \"\" });\r\n  const [toggle, setToggle] = useState(false);\r\n  const vals = useRef({ name: \"\", cat: \"\", description: \"\" });\r\n  const [loading, setLoading] = useState(false);\r\n  const [series, setSeries] = useState([]);\r\n  const [optionValue, setOptionValue] = useState();\r\n\r\n  const getSeries = async () => {\r\n    const allSeries = await getAllSeries();\r\n    setSeries(allSeries);\r\n    try {\r\n      setOptionValue(allSeries[0].id);\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (loading === true) return;\r\n    setLoading(true);\r\n    getSeries();\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    vals.current = values;\r\n  }, [values]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", (e) => {\r\n      if (e.keyCode === 13) {\r\n        submit();\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const handleChange = (e) =>\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n\r\n  const submit = async () => {\r\n    const keys = Object.keys(vals.current);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      if (vals.current[keys[i]] === \"\") {\r\n        return;\r\n      }\r\n    }\r\n    await sendSeries(vals.current);\r\n    setLoading(false);\r\n  };\r\n  return (\r\n    <Container>\r\n      <div>Series</div>\r\n      <div\r\n        style={{ fontSize: \"2rem\", color: \"red\" }}\r\n        onClick={() => setToggle(!toggle)}\r\n      >\r\n        switch\r\n      </div>\r\n      {toggle && (\r\n        <div>\r\n          <form>\r\n            <input onChange={handleChange} name=\"name\" placeholder=\"name\" />\r\n            <input onChange={handleChange} name=\"cat\" placeholder=\"cat\" />\r\n            <input\r\n              onChange={handleChange}\r\n              name=\"description\"\r\n              placeholder=\"description\"\r\n            />\r\n          </form>\r\n          <Button style={{ margin: \"auto\", display: \"block\" }} onClick={submit}>\r\n            SEND\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      <Select\r\n        value={optionValue}\r\n        onChange={(e) => {\r\n          setOptionValue(e.target.value);\r\n          setSelectedSeries(e.target.value);\r\n        }}\r\n      >\r\n        {series.map((s) => {\r\n          return (\r\n            <option key={s.name} name={s.name} value={s.id}>\r\n              {s.name}\r\n            </option>\r\n          );\r\n        })}\r\n      </Select>\r\n      <Button\r\n        style={{ margin: \"auto\", display: \"block\" }}\r\n        onClick={() => {\r\n          setScene(\"MAP\");\r\n          setSelectedSeries(optionValue);\r\n        }}\r\n      >\r\n        Select\r\n      </Button>\r\n      <Button\r\n        style={{ margin: \"auto\", display: \"block\" }}\r\n        onClick={() => {\r\n          socket.emit(\"hunt_ready\", optionValue);\r\n        }}\r\n      >\r\n        READY\r\n      </Button>\r\n      <Button\r\n        style={{ margin: \"auto\", display: \"block\" }}\r\n        onClick={() => {\r\n          socket.emit(\"hunt_archive\", optionValue);\r\n        }}\r\n      >\r\n        ARCHIVE\r\n      </Button>\r\n    </Container>\r\n  );\r\n};\r\nexport default Series;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button } from \"../styles/styles\";\r\nimport { getAllSeries, createHunt } from \"../services\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  align-content: center;\r\n  margin-top: 5rem;\r\n  font-size: 5rem;\r\n\r\n  input {\r\n    text-align: center;\r\n    height: 2rem;\r\n    width: 17rem;\r\n    margin: 1rem auto;\r\n    display: block;\r\n  }\r\n  input:last-child {\r\n    margin-bottom: 1rem;\r\n  }\r\n`;\r\n\r\nconst Select = styled.select`\r\n  margin: 2rem;\r\n  width: 200px;\r\n  height: 47px;\r\n  font-size: 18px;\r\n`;\r\n\r\nconst Hunt = () => {\r\n  const [values, setValues] = useState({ email: \"\" });\r\n  const [toggle, setToggle] = useState(false);\r\n  const vals = useRef({ email: \"\" });\r\n  const [series, setSeries] = useState([]);\r\n  const [optionValue, setOptionValue] = useState();\r\n\r\n  const getSeries = async () => {\r\n    const allSeries = await getAllSeries();\r\n    setSeries(allSeries);\r\n    try {\r\n      setOptionValue(allSeries[0].id);\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getSeries();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    vals.current = values;\r\n  }, [values]);\r\n\r\n  //   useEffect(() => {\r\n  //     window.addEventListener(\"keydown\", e => {\r\n  //       if (e.keyCode === 13) {\r\n  //         submit();\r\n  //       }\r\n  //     });\r\n  //   }, []);\r\n\r\n  const handleChange = e =>\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n\r\n  const submit = async () => {\r\n    const keys = Object.keys(vals.current);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      if (vals.current[keys[i]] === \"\") {\r\n        return;\r\n      }\r\n    }\r\n    await createHunt({ email: vals.current.email, seriesId: optionValue });\r\n  };\r\n  return (\r\n    <Container>\r\n      <div style={{ fontSize: \"2rem\" }}>Create Hunt</div>\r\n      <div\r\n        style={{ fontSize: \"2rem\", color: \"red\" }}\r\n        onClick={() => setToggle(!toggle)}\r\n      >\r\n        switch\r\n      </div>\r\n      {toggle && (\r\n        <div>\r\n          <form>\r\n            <input onChange={handleChange} name=\"email\" placeholder=\"email\" />\r\n          </form>\r\n          <Button style={{ margin: \"auto\", display: \"block\" }} onClick={submit}>\r\n            SEND\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      <Select\r\n        value={optionValue}\r\n        onChange={e => setOptionValue(e.target.value)}\r\n      >\r\n        {series.map(s => {\r\n          return (\r\n            <option key={s.name} name={s.name} value={s.id}>\r\n              {s.name}\r\n            </option>\r\n          );\r\n        })}\r\n      </Select>\r\n    </Container>\r\n  );\r\n};\r\nexport default Hunt;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  top: 6px;\r\n  z-index: 10;\r\n  left: 10px;\r\n  color: red;\r\n  max-width: 230px;\r\n  font-size: 1.6rem;\r\n  background: black;\r\n  padding: 0.5rem;\r\n  opacity: 0.5;\r\n`;\r\nconst Message = ({ children }) => {\r\n  return <Container>{children}</Container>;\r\n};\r\nexport default Message;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport CMap from \"../components/CMap\";\r\nimport Logout from \"../components/Logout\";\r\nimport {\r\n  logOut,\r\n  connectSocket,\r\n  listenTo,\r\n  joinRoom,\r\n  getMarkersBySeries,\r\n} from \"../actions\";\r\nimport Series from \"../components/Series\";\r\nimport Hunt from \"../components/Hunt\";\r\nimport Message from \"../components/Message\";\r\nimport JwtDecode from \"jwt-decode\";\r\n\r\nconst SERIES = \"SERIES\";\r\nconst MAP = \"MAP\";\r\n\r\nconst Creator = ({\r\n  connected,\r\n  connectToSocket,\r\n  message,\r\n  listenToErrors,\r\n  logout,\r\n  mapKey,\r\n  markers,\r\n  socket,\r\n  getMarkers,\r\n  token,\r\n}) => {\r\n  const [scene, setScene] = useState(SERIES);\r\n  const [selectedSeries, setSelectedSeries] = useState();\r\n  useEffect(() => {\r\n    if (!connected) {\r\n      connectToSocket();\r\n    } else {\r\n      listenToErrors();\r\n    }\r\n  }, [connectToSocket, connected, listenToErrors]);\r\n\r\n  const { email } = JwtDecode(token);\r\n  // if (email !== \"teh@raptor.pizza\" && email !== \"arielklevecz@gmail.com\") {\r\n  //   return <div>no</div>;\r\n  // }\r\n  return (\r\n    <div>\r\n      <Message>\r\n        {selectedSeries}-{message.error}\r\n      </Message>\r\n      <Logout logout={logout} />\r\n      {scene === SERIES && (\r\n        <div>\r\n          <Hunt />\r\n          <Series\r\n            setScene={setScene}\r\n            setSelectedSeries={setSelectedSeries}\r\n            socket={socket}\r\n          />\r\n        </div>\r\n      )}\r\n      {scene === MAP && (\r\n        <CMap\r\n          mapKey={mapKey}\r\n          markers={markers}\r\n          series={selectedSeries}\r\n          setScene={setScene}\r\n          getMarkers={getMarkers}\r\n          socket={socket}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({\r\n  device: { mapKey, token },\r\n  map: { markers },\r\n  socket: { connected, socket, message },\r\n}) => ({\r\n  connected,\r\n  mapKey,\r\n  markers,\r\n  message,\r\n  socket,\r\n  token,\r\n});\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  connectToSocket: () => dispatch(connectSocket()),\r\n  getMarkers: (series) => dispatch(getMarkersBySeries(series)),\r\n  joinSeries: (series) => dispatch(joinRoom(series)),\r\n  listenToNewMarker: () => dispatch(listenTo(\"new_marker\")),\r\n  listenToErrors: () => dispatch(listenTo(\"create_error\")),\r\n  logout: () => dispatch(logOut()),\r\n  dispatch,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Creator);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Lottie from \"react-lottie\";\r\nimport animationData from \"./animations/SMILE.json\";\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\nimport { UNAUTHORIZED } from \"./actions\";\r\nimport { getAllUserSeries } from \"./services\";\r\nimport Smiler from \"./graphics/Smiler\";\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-template-areas:\r\n    \"header\"\r\n    \"error\"\r\n    \"cta\"\r\n    \"hunts\";\r\n  justify-content: center;\r\n  max-width: 400px;\r\n  margin: 1rem auto 0;\r\n  grid-template-columns: 1fr;\r\n  padding: 2rem;\r\n`;\r\n\r\nconst H1 = styled.div`\r\n  font-size: 2rem;\r\n  margin: 0 0 7px;\r\n  text-decoration: underline;\r\n`;\r\n\r\nconst Paragraph = styled.div``;\r\n\r\nconst HuntParagraph = styled(Paragraph)`\r\n  div {\r\n    background: black;\r\n    color: white;\r\n    padding: 0.5rem;\r\n    border-bottom: 2px solid white;\r\n    cursor: pointer;\r\n    text-transform: capitalize;\r\n  }\r\n`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  background: red;\r\n  color: white;\r\n  padding: 11px;\r\n  margin-top: 0.7rem;\r\n`;\r\n\r\nconst errorMessage = (error) => {\r\n  switch (error) {\r\n    case UNAUTHORIZED:\r\n      return \"hmm you aren't authorized for whatever you tried to do\";\r\n    case \"NOT_FOUND\":\r\n      return \"hmm that hunt doesn't exist?\";\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\n// if you want listeners here, you will have to decouple the connect socket from the mapview\r\n// the connect socket includes some of the listeners that force the disconnect when the map is dismounted\r\n\r\nconst Fallback = ({ clearErrors, email, error, getAllUserSeries, history }) => {\r\n  const [availableSeries, setAvailableSeries] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  useEffect(() => {\r\n    getAllUserSeries().then((series) => {\r\n      setLoading(false);\r\n      setAvailableSeries(series);\r\n    });\r\n  }, [getAllUserSeries]);\r\n\r\n  useEffect(() => {\r\n    document\r\n      .getElementsByTagName(\"svg\")[0]\r\n      .setAttribute(\"viewBox\", \"0 -300 1080 1080\");\r\n  }, []);\r\n  const eMessage = errorMessage(error);\r\n  return (\r\n    <div>\r\n      <div style={{ height: 110 }}>\r\n        <Lottie options={{ loop: true, autoplay: true, animationData }} />\r\n      </div>\r\n      <Container>\r\n        <H1>hi {email.split(\"@\")[0]}!</H1>\r\n        {loading && <Smiler />}\r\n        {eMessage && <ErrorMessage>{eMessage}</ErrorMessage>}\r\n        {!loading && (\r\n          <div>\r\n            <HuntParagraph>\r\n              <h3>Hunts</h3>\r\n              {availableSeries && availableSeries.length > 0 ? (\r\n                availableSeries\r\n                  .filter((s) => !s.archived)\r\n                  .map((s) => (\r\n                    <div\r\n                      onClick={() => {\r\n                        clearErrors();\r\n                        history.push(`/map/${s.id}`);\r\n                      }}\r\n                      key={s.id}\r\n                    >\r\n                      {s.name}\r\n                    </div>\r\n                  ))\r\n              ) : (\r\n                <div style={{ background: \"red\" }}>\r\n                  there are no hunts for you :(\r\n                </div>\r\n              )}\r\n            </HuntParagraph>\r\n            <HuntParagraph>\r\n              <h3>Archive</h3>\r\n              {availableSeries && availableSeries.length > 0 ? (\r\n                availableSeries\r\n                  .filter((s) => s.archived)\r\n                  .map((s) => (\r\n                    <div\r\n                      onClick={() => {\r\n                        clearErrors();\r\n                        history.push(`/map/${s.id}`);\r\n                      }}\r\n                      key={s.id}\r\n                    >\r\n                      {s.name}\r\n                    </div>\r\n                  ))\r\n              ) : (\r\n                <div style={{ background: \"red\" }}>\r\n                  Hmm nothing in the archive\r\n                </div>\r\n              )}\r\n            </HuntParagraph>\r\n          </div>\r\n        )}\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ device: { email, error } }) => ({ email, error });\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  clearErrors: () => dispatch({ type: \"CLEAR_ERRORS\" }),\r\n  getAllUserSeries: () => getAllUserSeries(dispatch),\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Fallback);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, ButtonContainer } from \"../styles/styles\";\r\nimport Smiler from \"../graphics/Smiler\";\r\nimport { connect } from \"react-redux\";\r\nimport { getSeries, createRsvp, releaseDevice } from \"../services\";\r\nimport { logOut, deviceInit } from \"../actions\";\r\n\r\nconst Rsvp = ({ deviceAuth, email, logout, match }) => {\r\n  const [seriesName, setSeriesName] = useState(\"\");\r\n  const rsvp = () => {\r\n    createRsvp(match.params.seriesId).then(console.log);\r\n  };\r\n  const handleClick = () => {\r\n    releaseDevice().then((data) => {\r\n      if (data.success) {\r\n        logout();\r\n        // forcing the state to barf at auth\r\n        deviceAuth();\r\n      }\r\n    });\r\n  };\r\n  const error = \"\";\r\n\r\n  useEffect(() => {\r\n    getSeries(match.params.seriesId).then((data) => {\r\n      setSeriesName(data.name);\r\n    });\r\n  }, []);\r\n  return (\r\n    <ButtonContainer>\r\n      <div style={{ borderBottom: \"none\" }}>\r\n        <Smiler\r\n          style={{\r\n            margin: \"0 auto\",\r\n            display: \"block\",\r\n            width: \"35%\",\r\n          }}\r\n        />\r\n      </div>\r\n      <div>Hello! I have your emails as {email}</div>\r\n      <div>You would like to RSVP for {seriesName}?</div>\r\n      <div\r\n        style={{\r\n          color: \"#f36060\",\r\n          display: error ? \"block\" : \"none\",\r\n          borderBottom: \"none\",\r\n          margin: \"7% auto -8%\",\r\n          textAlign: \"center\",\r\n        }}\r\n      >\r\n        {error}\r\n      </div>\r\n      <Button onClick={rsvp}>Yes</Button>\r\n      <div onClick={handleClick} className=\"alt-center\">\r\n        Sign in using a different email\r\n      </div>\r\n    </ButtonContainer>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ device: { email } }) => ({ email });\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  logout: () => dispatch(logOut()),\r\n  deviceAuth: () => dispatch(deviceInit()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Rsvp);\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Status from \"./containers/Status\";\r\nimport Scan from \"./containers/Scan\";\r\nimport { connect } from \"react-redux\";\r\nimport { newToken, registerDevice } from \"./actions\";\r\nimport MainView from \"./containers/MainView\";\r\nimport Registration from \"./containers/Registration\";\r\nimport { DEVICE_NOT_REGISTERED } from \"./statuses\";\r\nimport Loading from \"./animations/Loading\";\r\nimport Creator from \"./containers/Creator\";\r\nimport Fallback from \"./Fallback\";\r\nimport Rsvp from \"./containers/Rsvp\";\r\n\r\nfunction App({ hash, status, token, loading, welcome }) {\r\n  if (welcome) return <Loading fill={\"yellow\"} message={\"welcome!\"} />;\r\n  if (loading) return <Loading message={\"syncing...\"} />;\r\n  if ((status === DEVICE_NOT_REGISTERED && !hash) || !token) {\r\n    return <Registration hash={hash} token={token} status={status} />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <Route path=\"/status\" component={Status} />\r\n        <Route path=\"/code/:code\" component={Scan} />\r\n        <Route path=\"/creator\" component={Creator} />\r\n        <Route path=\"/map/:hunt\" component={MainView} />\r\n        <Route path=\"/rsvp/:seriesId\" component={Rsvp} />\r\n        <Route path=\"/\" component={Fallback} />\r\n      </Switch>\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({\r\n  device: { error, hash, status, token },\r\n  ui: { loading, welcome },\r\n}) => ({\r\n  error,\r\n  hash,\r\n  loading,\r\n  status,\r\n  token,\r\n  welcome,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getToken: () => dispatch(newToken()),\r\n  registerDevice: () => dispatch(registerDevice()),\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import {\r\n  DEVICE_INIT,\r\n  SET_TOKEN,\r\n  ERROR,\r\n  RESPONSE,\r\n  LOGOUT,\r\n  MAP_KEY,\r\n  CLEAR_ERRORS\r\n} from \"../actions\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\nconst deviceState = {\r\n  email: \"\",\r\n  hash: 0x0,\r\n  token: 0x0,\r\n  error: \"\",\r\n  response: \"\",\r\n  status: \"\",\r\n  mapKey: \"\"\r\n};\r\n\r\nconst device = (state = deviceState, action) => {\r\n  switch (action.type) {\r\n    case DEVICE_INIT:\r\n      const { hash } = action;\r\n      return { ...state, hash };\r\n    case SET_TOKEN:\r\n      const { token } = action;\r\n      localStorage.setItem(\"token\", token);\r\n      const { email } = jwtDecode(token);\r\n      return { ...state, email, token };\r\n    case MAP_KEY:\r\n      const { mapKey } = action;\r\n      return { ...state, mapKey };\r\n    case LOGOUT:\r\n      return { ...state, token: 0x0 };\r\n    case ERROR:\r\n      const { error } = action;\r\n      return { ...state, error, status: error };\r\n    case CLEAR_ERRORS:\r\n      return { ...state, error: \"\", status: \"\" };\r\n    case RESPONSE:\r\n      const { response } = action;\r\n      return { ...state, response, status: response };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default device;\r\n","import {\r\n  MAP_INIT,\r\n  MARKER_FOUND,\r\n  NEW_MARKER,\r\n  HUNT_COMPLETED,\r\n  RESET\r\n} from \"../actions\";\r\n\r\nconst ppark = {\r\n  lat: 40.66257,\r\n  lng: -73.968564\r\n};\r\n\r\nconst mapState = {\r\n  places: { ppark },\r\n  markers: [],\r\n  markersFound: [],\r\n  name: \"\",\r\n  completed: false,\r\n  ready: false,\r\n  loading: true\r\n};\r\n\r\nconst map = (state = mapState, action) => {\r\n  switch (action.type) {\r\n    case MAP_INIT:\r\n      const {\r\n        markers: { completed, markers, markerMap, name, ready }\r\n      } = action;\r\n      return {\r\n        ...state,\r\n        completed,\r\n        markers,\r\n        markersFound: markerMap,\r\n        name,\r\n        ready,\r\n        loading: false\r\n      };\r\n    case \"MAP_READY\":\r\n      return { ...state, ready: true };\r\n    case MARKER_FOUND:\r\n      const { markersFound } = action;\r\n      return { ...state, markersFound };\r\n    case NEW_MARKER:\r\n      const { newMarker } = action;\r\n      return { ...state, markers: [...state.markers, newMarker] };\r\n    case HUNT_COMPLETED:\r\n      return { ...state, completed: true };\r\n    case RESET:\r\n      return mapState;\r\n    case \"MAP_LOADING\":\r\n      return { ...state, loading: true };\r\n    case \"MAP_DONE\":\r\n      return { ...state, loading: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default map;\r\n","import {\r\n  CONNECTING,\r\n  CONNECTED,\r\n  GET_MARKERS,\r\n  LISTEN_TO,\r\n  SOCKET_MESSAGE,\r\n  CODE_RESPONSE\r\n} from \"../actions\";\r\n\r\nconst socketState = {\r\n  socket: null,\r\n  connected: false,\r\n  codeResponse: \"\",\r\n  message: \"\",\r\n  status: \"disconnected\",\r\n  listeners: []\r\n};\r\n\r\nconst socket = (state = socketState, action) => {\r\n  switch (action.type) {\r\n    case CONNECTING:\r\n      return { ...state, status: \"connecting...\" };\r\n    case CONNECTED:\r\n      const { socket } = action;\r\n      return { ...state, status: \"connected\", connected: true, socket };\r\n    // this should be refactored\r\n    case GET_MARKERS:\r\n      const { hunt } = action;\r\n      state.socket.emit(\"get_markers\", hunt);\r\n      return state;\r\n    case LISTEN_TO:\r\n      const { topic } = action;\r\n      return { ...state, listeners: [...state.listeners, topic] };\r\n    case \"CLEAR_LISTENERS\":\r\n      return { ...state, listeners: [] };\r\n    case SOCKET_MESSAGE:\r\n      const { message } = action;\r\n      return { ...state, message };\r\n    case CODE_RESPONSE:\r\n      const { payload } = action;\r\n      return {\r\n        ...state,\r\n        codeResponse: payload.message,\r\n        seriesId: payload.seriesId\r\n      };\r\n    case \"DISCONNECT\":\r\n      return { ...state, status: \"disconnected\", connected: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default socket;\r\n","import { LOADING, READY, WELCOME } from \"../actions\";\r\n\r\nconst initialState = {\r\n  welcome: false,\r\n  loading: false\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case WELCOME:\r\n      return { ...state, welcome: true };\r\n    case LOADING:\r\n      return { ...state, loading: true };\r\n    case READY:\r\n      return { ...state, loading: false, welcome: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { combineReducers } from \"redux\";\r\nimport device from \"./device\";\r\nimport map from \"./map\";\r\nimport socket from \"./socket\";\r\nimport ui from \"./ui\";\r\n\r\nexport default combineReducers({ device, map, socket, ui });\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducers from \"./reducers\";\r\nimport { ERROR, BAD_TOKEN, DEVICE_NOT_FOUND, deviceInit } from \"./actions\";\r\n\r\nconst peelError = ({ getState, dispatch }) => {\r\n  return next => action => {\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      console.log(action);\r\n      console.log(getState());\r\n    }\r\n\r\n    if (action.type === ERROR) {\r\n      // should this be error or message?\r\n      switch (action.error) {\r\n        case BAD_TOKEN:\r\n        case \"USER_NOT_FOUND\":\r\n          localStorage.removeItem(\"token\");\r\n          window.location.href = \"/\";\r\n          break;\r\n        case DEVICE_NOT_FOUND:\r\n          dispatch(deviceInit());\r\n          break;\r\n        default:\r\n      }\r\n    }\r\n    next(action);\r\n  };\r\n};\r\n\r\nconst store = createStore(reducers, applyMiddleware(thunk, peelError));\r\n\r\nexport default store;\r\n// what is the balance between monotony and bliss\r\n// what is the need to be differentiated in particular settings and ways\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport store from \"./store\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { deviceInit, WELCOME, MAP_KEY, SET_TOKEN } from \"./actions\";\r\n\r\nimport { AES, enc } from \"crypto-js\";\r\n\r\nconst token = localStorage.getItem(\"token\");\r\nif (!token) {\r\n  store.dispatch({ type: WELCOME });\r\n}\r\nstore.dispatch(deviceInit());\r\nif (token) store.dispatch({ type: SET_TOKEN, token });\r\n\r\nconst bytes = AES.decrypt(\r\n  process.env.REACT_APP_MAP_KEY,\r\n  process.env.REACT_APP_FROGGY\r\n);\r\nconst mapKey = bytes.toString(enc.Utf8);\r\nstore.dispatch({ type: MAP_KEY, mapKey });\r\n\r\nconst isLocalHost = hostname =>\r\n  !!(\r\n    hostname === \"localhost\" ||\r\n    hostname === \"[::1]\" ||\r\n    hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n  );\r\n\r\nconst HttpsRedirect = ({ disabled, children }) => {\r\n  if (\r\n    !disabled &&\r\n    typeof window !== \"undefined\" &&\r\n    window.location &&\r\n    window.location.protocol === \"http:\" &&\r\n    !isLocalHost(window.location.hostname)\r\n  ) {\r\n    window.location.href = window.location.href.replace(/^http(?!s)/, \"https\");\r\n    return null;\r\n  }\r\n\r\n  return children;\r\n};\r\nReactDOM.render(\r\n  <HttpsRedirect>\r\n    <Provider store={store}>\r\n      <Router basename=\"/\">\r\n        <App />\r\n      </Router>\r\n    </Provider>\r\n  </HttpsRedirect>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}