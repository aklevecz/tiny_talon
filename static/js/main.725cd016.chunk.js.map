{"version":3,"sources":["services/handles.js","services/index.js","actions.js","containers/Status.js","graphics/Raptor.js","styles/styles.js","components/Scanning.js","containers/Scan.js","markers/RaptorMarker.js","graphics/Smiler.js","components/Map.js","components/Logout.js","containers/MainView/MapView.js","components/Modal.js","containers/MainView/Chodal.js","containers/MainView/index.js","animations/Loading.js","containers/Registration.js","services/utils.js","statuses.js","App.js","reducers/device.js","reducers/map.js","reducers/socket.js","reducers/ui.js","reducers/index.js","store.js","index.js"],"names":["fetchOptions","method","token","body","headers","Authorization","JSON","stringify","handleResponse","response","status","json","then","error","Error","handleError","dispatch","message","type","ERROR","tRequest","endPoint","headerData","localStorage","getItem","options","fetch","process","data","SET_TOKEN","RESPONSE","catch","getToken","hash","setItem","readyDelay","delay","setTimeout","registerDevice","email","getState","a","device","newToken","socketWrap","io","path","transport","socketMessage","listenDispatcher","topic","payload","markers","listenTo","socket","on","connectSocketThenEmit","emit","value","connect","state","getMarkers","useState","focus","setFocus","useEffect","window","addEventListener","style","display","Svg","styled","svg","Raptor","bg","fill","opacity","reff","stroke","ref","x","y","viewBox","d","strokeWidth","strokeMiterlimit","ScanContainer","div","ButtonContainer","Input","input","Button","button","MapContainer","Container","Message","Scanning","scanTainer","displayMessage","setMessage","raptorRef","useRef","text","current","raptor","getElementsByTagName","frame","startTime","Date","now","scale","chroma","counter","animate","cancelAnimationFrame","color","background","boxShadow","raptorOutline","colorMessage","diff","colorWave","Math","sin","bgWave","cos","rotateWave","transform","document","requestAnimationFrame","to","toUpperCase","sendCode","code","listenToCodeResponse","listenToWin","listenToMarkers","connected","match","meepo","RegExp","exec","params","height","greatPlaceStyle","position","width","left","top","borderRadius","textAlign","fontSize","fontWeight","cursor","greatPlaceStyleHover","RaptorMarker","found","setBg","r","floor","Smiler","rest","Map","history","mapKey","places","getElementById","length","id","defaultCenter","ppark","defaultZoom","styles","whiteMap","onChildClick","p","push","map","m","console","log","key","lat","lng","Logout","logout","onClick","connectToSocket","name","modalStyle","bottom","right","backgroundColor","Modal","children","createPortal","ModalMessage","props","maxHeight","Chodal","setMaxHeight","setBackground","goBack","marker","url","render","Loading","setOpacity","setError","register","test","String","toLowerCase","validateEmail","e","keyCode","margin","borderBottom","onChange","target","placeholder","border","ui","loading","welcome","component","Status","Scan","MainView","deviceState","action","mapState","socketState","listeners","initialState","reducer","combineReducers","store","createStore","reducers","applyMiddleware","thunk","next","removeItem","requestIdleCallback","Fingerprint2","get","components","values","x64hash128","join","AES","decrypt","toString","enc","Utf8","ReactDOM","basename"],"mappings":"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","file":"static/js/main.725cd016.chunk.js","sourcesContent":["import { ERROR } from \"../actions\";\r\n\r\nexport const fetchOptions = (method, token, body) => ({\r\n  method,\r\n  headers: token\r\n    ? {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    : { \"Content-Type\": \"application/json\" },\r\n  body: JSON.stringify({ ...body })\r\n});\r\n\r\nexport const handleResponse = response => {\r\n  if (response.status !== 200) {\r\n    return response.json().then(error => {\r\n      throw new Error(error.error);\r\n    });\r\n  }\r\n  return response.json();\r\n};\r\n\r\nexport const handleError = (error, dispatch) => {\r\n  const { message } = error;\r\n  dispatch({ type: ERROR, message });\r\n};\r\n","import { SET_TOKEN, RESPONSE } from \"../actions\";\r\nimport { handleError, handleResponse, fetchOptions } from \"./handles\";\r\n\r\n// there could be a request thunk that delegates dispatches based on the response message\r\nexport const tRequest = (endPoint, headerData, dispatch) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  const options = fetchOptions(\"POST\", token, headerData);\r\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then(data => {\r\n      if (data.message === \"verified\" && token) {\r\n        dispatch({\r\n          type: SET_TOKEN,\r\n          token\r\n        });\r\n      }\r\n      dispatch({\r\n        type: RESPONSE,\r\n        response: data.message\r\n      });\r\n    })\r\n    .catch(error => handleError(error, dispatch));\r\n};\r\n\r\nexport const getToken = (dispatch, hash) => {\r\n  const endPoint = \"new_token\";\r\n  const options = fetchOptions(\"POST\", null, { hash });\r\n  fetch(`${process.env.REACT_APP_SERVER}/${endPoint}`, options)\r\n    .then(handleResponse)\r\n    .then(data => {\r\n      const { token } = data;\r\n      localStorage.setItem(\"token\", token);\r\n      dispatch({ type: SET_TOKEN, token });\r\n    })\r\n    .catch(error => handleError(error, dispatch));\r\n};\r\n\r\nexport const getRequest = () => {\r\n  fetch(`${process.env.REACT_APP_SERVER}`, {\r\n    headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` }\r\n  })\r\n    .then(handleResponse)\r\n    .then(console.log);\r\n};\r\n","import io from \"socket.io-client\";\r\nimport Fingerprint2 from \"fingerprintjs2\";\r\nimport { tRequest, getToken } from \"./services\";\r\n\r\nexport const WELCOME = \"WELCOME\";\r\nexport const LOADING = \"LOADING\";\r\nexport const READY = \"READY\";\r\n\r\nexport const MAP_KEY = \"MAP_KEY\";\r\nexport const DEVICE_INIT = \"DEVICE_INIT\";\r\nexport const SET_TOKEN = \"SET_TOKEN\";\r\nexport const LOGOUT = \"LOGOUT\";\r\n\r\nexport const MAP_INIT = \"MAP_INIT\";\r\nexport const GET_MARKERS = \"GET_MARKERS\";\r\nexport const UPDATE_MAP = \"UPDATE_MAP\";\r\n\r\nexport const CONNECTING = \"CONNECTING\";\r\nexport const CONNECTED = \"CONNECTED\";\r\nexport const LISTEN_TO = \"LISTEN_TO\";\r\n\r\nexport const ERROR = \"ERROR\";\r\nexport const BAD_TOKEN = \"BAD_TOKEN\";\r\nexport const RESPONSE = \"RESPONSE\";\r\n\r\nexport const FOUND = \"FOUND\";\r\nexport const SEND_CODE = \"SEND_CODE\";\r\n\r\nexport const deviceInit = () => {\r\n  return async dispatch => {\r\n    dispatch({ type: LOADING });\r\n    if (window.requestIdleCallback) {\r\n      requestIdleCallback(function() {\r\n        Fingerprint2.get(async function(components) {\r\n          var values = components.map(function(component) {\r\n            return component.value;\r\n          });\r\n          const device = Fingerprint2.x64hash128(values.join(\"\"), 31);\r\n          tRequest(\"auth_device\", { device }, dispatch);\r\n          dispatch({ type: DEVICE_INIT, hash: device });\r\n          dispatch(readyDelay(1));\r\n        });\r\n      });\r\n    } else {\r\n      setTimeout(function() {\r\n        Fingerprint2.get(async function(components) {\r\n          var values = components.map(function(component) {\r\n            return component.value;\r\n          });\r\n          const device = Fingerprint2.x64hash128(values.join(\"\"), 31);\r\n          tRequest(\"auth_device\", { device }, dispatch);\r\n          dispatch({ type: DEVICE_INIT, hash: device });\r\n          dispatch(readyDelay(1));\r\n        });\r\n      }, 500);\r\n    }\r\n  };\r\n};\r\n\r\nexport const readyDelay = delay => {\r\n  return dispatch => {\r\n    setTimeout(() => dispatch({ type: READY }), delay);\r\n  };\r\n};\r\n\r\nexport const registerDevice = email => {\r\n  return async (dispatch, getState) => {\r\n    const {\r\n      device: { hash }\r\n    } = getState();\r\n    tRequest(\"register_device\", { email, hash }, dispatch);\r\n    dispatch({ type: LOADING });\r\n    dispatch(readyDelay(2000));\r\n  };\r\n};\r\n\r\nexport const newToken = () => {\r\n  return async (dispatch, getState) => {\r\n    const {\r\n      device: { hash }\r\n    } = getState();\r\n    getToken(dispatch, hash);\r\n    dispatch({ type: LOADING });\r\n    dispatch(readyDelay(2000));\r\n  };\r\n};\r\n\r\nexport const logOut = () => {\r\n  return async dispatch => {\r\n    localStorage.setItem(\"token\", \"\");\r\n    dispatch({ type: LOGOUT });\r\n  };\r\n};\r\n\r\nfunction socketWrap(hash) {\r\n  return io(\r\n    `${process.env.REACT_APP_SOCKET_SERVER}?token=${localStorage.getItem(\r\n      \"token\"\r\n    )}&device=${hash}`,\r\n    { path: \"/socket.io\", transport: [\"websocket\"] }\r\n  );\r\n}\r\n\r\n// MARKERS SHOULD HAVE ITS OWN MIDDLEWARE\r\nexport const connectSocket = () => {\r\n  return async (dispatch, getState) => {\r\n    const {\r\n      device: { hash }\r\n    } = getState();\r\n    const socket = await socketWrap(hash);\r\n    socket.on(\"error\", error => dispatch({ type: ERROR, error }));\r\n    socket.on(\"found\", found => dispatch({ type: FOUND, name: found }));\r\n    socket.on(\"markers\", markers => {\r\n      if (markers.length === 0) dispatch({ type: ERROR, error: BAD_TOKEN });\r\n      dispatch({ type: MAP_INIT, markers });\r\n    });\r\n    dispatch({ type: CONNECTED, socket });\r\n  };\r\n};\r\n\r\n// these two are a little silly-- this could live in the scan or be more general if\r\n// there is a QR scanner screen\r\nexport const socketMessage = message => {\r\n  return dispatch => {\r\n    dispatch({ type: \"SOCKET_MESSAGE\", message });\r\n  };\r\n};\r\n\r\n// MARKERS SHOULD HAVE ITS OWN MIDDLEWARE\r\nconst listenDispatcher = (dispatch, topic, payload) => {\r\n  if (topic === \"markers\") {\r\n    dispatch({ type: MAP_INIT, markers: payload });\r\n  }\r\n};\r\n\r\nexport const listenTo = topic => {\r\n  return async (dispatch, getState) => {\r\n    getState().socket.socket.on(topic, message => {\r\n      listenDispatcher(dispatch, topic, message);\r\n      dispatch(socketMessage(message));\r\n    });\r\n    dispatch({ type: \"LISTEN_TO\", topic });\r\n  };\r\n};\r\n// ------\r\n\r\nexport const getMarkers = () => {\r\n  return async dispatch => {\r\n    dispatch({ type: GET_MARKERS });\r\n  };\r\n};\r\n\r\nexport const connectSocketThenEmit = (emit, value) => {\r\n  return async (dispatch, getState) => {\r\n    const {\r\n      device: { hash }\r\n    } = getState();\r\n    const socket = await socketWrap(hash);\r\n    socket.on(\"error\", error => dispatch({ type: ERROR, error }));\r\n    dispatch({ type: CONNECTED, socket });\r\n    if (socket) {\r\n      socket.emit(emit, value);\r\n    }\r\n  };\r\n};\r\n\r\n// should probably be refactored into just thunk action\r\nexport const emit = (emit, value) => {\r\n  return async (dispatch, getState) => {\r\n    const { socket } = getState();\r\n    if (!socket.socket) {\r\n      dispatch(connectSocketThenEmit(emit, value));\r\n    } else {\r\n      socket.socket.emit(emit, value);\r\n    }\r\n  };\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { GET_MARKERS } from \"../actions\";\r\n\r\nconst Status = ({ getMarkers, status }) => {\r\n  const [focus, setFocus] = useState(\"lala\");\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"focus\", () => setFocus(\"focus\"));\r\n    window.addEventListener(\"blur\", () => setFocus(\"nofucs\"));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (focus === \"focus\") {\r\n      getMarkers();\r\n    }\r\n  }, [focus, getMarkers]);\r\n\r\n  return (\r\n    <div style={{ display: \"none\" }}>\r\n      {status}-{focus}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => state.socket;\r\nconst mapDispatchToProps = dispatch => ({\r\n  getMarkers: () => dispatch({ type: GET_MARKERS })\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Status);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Svg = styled.svg`\r\n  margin: 0rem auto 0rem;\r\n  height: 100%;\r\n  max-width: 360px;\r\n  color: black;\r\n  display: block;\r\n`;\r\n\r\nconst Raptor = ({\r\n  bg,\r\n  fill = \"#FFFFFF\",\r\n  opacity = 1,\r\n  reff,\r\n  stroke = \"#FFFFFF\"\r\n}) => (\r\n  <Svg ref={reff} x=\"0px\" y=\"0px\" viewBox=\"0 0 864 864\">\r\n    <path\r\n      fill={bg}\r\n      d=\"M704.172,432.004c0-150.322-121.847-272.176-272.167-272.176c-150.313,0-272.177,121.854-272.177,272.176\r\nc0,150.321,121.863,272.169,272.177,272.169C582.325,704.172,704.172,582.325,704.172,432.004z\"\r\n    />\r\n\r\n    <path\r\n      stroke={stroke}\r\n      fill={fill}\r\n      opacity={opacity}\r\n      strokeWidth=\"10\"\r\n      strokeMiterlimit=\"10\"\r\n      d=\"M623.373,394.194v-34.077l-120.796-34.103l-22.437,66.463\r\nl-129.417,60.525l-135.987-70.14l-6.756,15.581l133.588,116.586l57.817-7.664l19.241,32.798l-40.041,34.124\r\nc9.488,10.356,60.784,36.836,60.784,36.836l25.191-2.766l-34.262-35.532l25.89-17.396l12.872-58.715l62.837-24.296l-3.854,33.212\r\nl14.588,3.42l24.923-51.034l-46.001-18.883l15.536-49.255L623.373,394.194z\"\r\n    />\r\n  </Svg>\r\n);\r\n\r\nexport default Raptor;\r\n","import styled from \"styled-components\";\r\n\r\nexport const ScanContainer = styled.div`\r\n  margin: 10% auto;\r\n  background: white;\r\n  border: 1px solid black;\r\n  color: black;\r\n  padding: 8%;\r\n  font-family: Arial;\r\n  font-weight: bold;\r\n  font-size: 2.4rem;\r\n  box-shadow: 13px 16px #ff0909;\r\n  height: 3rem;\r\n`;\r\n\r\nexport const ButtonContainer = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  width: 80%;\r\n  max-width: 900px;\r\n  margin: auto;\r\n  div {\r\n    margin: 4% auto;\r\n    border-bottom: 4px dotted black;\r\n    padding: 3%;\r\n    width: 80%;\r\n  }\r\n\r\n  input,\r\n  button {\r\n    margin: 7% auto 7%;\r\n    align-self: center;\r\n    padding: 0;\r\n  }\r\n\r\n  @media only screen and (min-width: 700px) {\r\n    justify-content: flex-start;\r\n  }\r\n`;\r\nexport const Input = styled.input`\r\n  text-align: center;\r\n  font-size: 22px;\r\n  font-family: Arial;\r\n  border: 2px black solid;\r\n  height: 56px;\r\n  box-shadow: 9px 10px black;\r\n  width: 79%;\r\n  max-width: 430px;\r\n`;\r\n\r\nexport const Button = styled.button`\r\n  width: 8rem;\r\n  height: 8rem;\r\n  border-radius: 50%;\r\n  border: 2px solid #000000;\r\n  font-size: 1.6rem;\r\n  cursor: pointer;\r\n  background: white;\r\n  box-shadow: -5px 3px black;\r\n  line-height: 122px;\r\n`;\r\n\r\nexport const MapContainer = styled.div`\r\n  height: 100vh;\r\n  width: 100%;\r\n`;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\n\r\nimport chroma from \"chroma-js\";\r\nimport Raptor from \"../graphics/Raptor\";\r\nimport { ScanContainer } from \"../styles/styles\";\r\n\r\nconst Container = styled.div`\r\n  height: 100%;\r\n  margin: 1rem;\r\n  background: white;\r\n  padding: 1rem;\r\n  display: grid;\r\n  grid-template-rows: 30% 40% 30%;\r\n  max-width: 700px;\r\n  @media only screen and (min-width: 700px) {\r\n    margin: 1rem auto;\r\n  }\r\n`;\r\n\r\nconst Message = styled.div`\r\n  color: white;\r\n  font-size: 1.6rem;\r\n  text-align: center;\r\n  font-family: Arial, Helvetica, sans-serif;\r\n  font-weight: bold;\r\n  width: 70%;\r\n  margin: auto;\r\n  text-shadow: 4px 4px black;\r\n  box-shadow: 7px 11px black;\r\n  background-color: white;\r\n  border: 1px solid black;\r\n  padding: 1rem;\r\n`;\r\n\r\nconst Scanning = ({ message, scanTainer }) => {\r\n  const [displayMessage, setMessage] = useState(\"scanning...\");\r\n  const raptorRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const text = scanTainer.current;\r\n    const raptor = raptorRef.current;\r\n    raptor.getElementsByTagName(\"path\")[0].style.stroke = \"red\";\r\n    raptor.getElementsByTagName(\"path\")[0].style.strokeWidth = \"21px\";\r\n    const startTime = Date.now();\r\n    const scale = chroma.scale([\"black\", \"red\"]);\r\n    let frame;\r\n    let counter = 0;\r\n\r\n    const found = () => {\r\n      cancelAnimationFrame(frame);\r\n      text.style.color = \"black\";\r\n      text.style.background = \"white\";\r\n      text.style.boxShadow = `13px 16px black`;\r\n    };\r\n\r\n    const colorMessage = () => {\r\n      const raptorOutline = raptor.getElementsByTagName(\"path\")[0].style;\r\n      if (message === \"you already found this one!\") {\r\n        raptorOutline.stroke = \"yellow\";\r\n      } else if (message === \"cool find!\") {\r\n        raptorOutline.stroke = \"#9dff9d\";\r\n      } else {\r\n        raptorOutline.stroke = \"red\";\r\n      }\r\n    };\r\n\r\n    const animate = () => {\r\n      if (message) {\r\n        counter++;\r\n        if (counter > 200) {\r\n          found();\r\n          colorMessage();\r\n          setMessage(message);\r\n          return;\r\n        }\r\n      }\r\n      const diff = Date.now() - startTime;\r\n      const colorWave = 0.5 * (2 + Math.sin(diff * 0.001));\r\n      const bgWave = 0.5 * (1 + Math.cos(diff * 0.001));\r\n      text.style.color = scale(colorWave);\r\n      text.style.background = scale(bgWave);\r\n      text.style.boxShadow = `13px 16px ${scale(colorWave)}`;\r\n      const rotateWave = 180 + 360 * Math.sin(diff * 0.001) * 0.5;\r\n      raptor.style.transform = `rotate(${rotateWave}deg)`;\r\n      document.body.style.background = scale(bgWave * 0.8);\r\n      frame = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animate();\r\n\r\n    return () => cancelAnimationFrame(frame);\r\n  }, [message, scanTainer]);\r\n\r\n  return (\r\n    <Container>\r\n      <ScanContainer ref={scanTainer}>\r\n        {displayMessage === \"scanning...\" ? \"Scanning\" : \"Scanned\"}\r\n      </ScanContainer>\r\n      <div>\r\n        <Link to=\"/\">\r\n          <Raptor reff={raptorRef} />\r\n        </Link>\r\n      </div>\r\n      <Message>{displayMessage.toUpperCase()}</Message>\r\n    </Container>\r\n  );\r\n};\r\nexport default Scanning;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { emit, listenTo } from \"../actions\";\r\n\r\nimport Scanning from \"../components/Scanning\";\r\nimport { ScanContainer } from \"../styles/styles\";\r\n\r\n//  1 connects socket\r\n// listens for the response\r\n// sends the code\r\n// shows response\r\n\r\nconst Scan = ({\r\n  connected,\r\n  listenToCodeResponse,\r\n  listenToMarkers,\r\n  listenToWin,\r\n  match,\r\n  message,\r\n  sendCode\r\n}) => {\r\n  const scanTainer = useRef();\r\n  const myRe = new RegExp(process.env.REACT_APP_REG);\r\n  const meepo = myRe.exec(match.params.code);\r\n\r\n  useEffect(() => {\r\n    if (!meepo) {\r\n      const {\r\n        params: { code }\r\n      } = match;\r\n      sendCode(code);\r\n    }\r\n  }, [meepo, match, sendCode]);\r\n\r\n  useEffect(() => {\r\n    if (!connected) return;\r\n    listenToCodeResponse();\r\n    listenToWin();\r\n    listenToMarkers();\r\n  }, [connected, listenToWin, listenToCodeResponse, listenToMarkers]);\r\n\r\n  return (\r\n    <div style={{ height: \"90%\" }}>\r\n      {!meepo ? (\r\n        <Scanning scanTainer={scanTainer} message={message} />\r\n      ) : (\r\n        <ScanContainer ref={scanTainer}>\r\n          This is not a valid request for reasons I cannot explain :)\r\n        </ScanContainer>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStatToProps = state => state.socket;\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  sendCode: code => dispatch(emit(\"code\", code)),\r\n  listenToCodeResponse: () => dispatch(listenTo(\"code_response\")),\r\n  listenToWin: () => dispatch(listenTo(\"win\")),\r\n  listenToMarkers: () => dispatch(listenTo(\"markers\"))\r\n});\r\n\r\nexport default connect(mapStatToProps, mapDispatchToProps)(Scan);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Raptor from \"../graphics/Raptor\";\r\nconst K_SIZE = 70;\r\n\r\nconst greatPlaceStyle = {\r\n  // initially any map object has left top corner at lat lng coordinates\r\n  // it's on you to set object origin to 0,0 coordinates\r\n  position: \"absolute\",\r\n  width: K_SIZE,\r\n  height: K_SIZE,\r\n  left: -K_SIZE / 2,\r\n  top: -K_SIZE / 2,\r\n\r\n  //   border: \"5px solid #f44336\",\r\n  borderRadius: K_SIZE,\r\n  // backgroundColor: \"white\",\r\n  textAlign: \"center\",\r\n  color: \"#3f51b5\",\r\n  fontSize: 16,\r\n  fontWeight: \"bold\",\r\n  //   padding: 4,\r\n  cursor: \"pointer\"\r\n};\r\n\r\nconst greatPlaceStyleHover = {\r\n  ...greatPlaceStyle\r\n  //   border: \"5px solid #3f51b5\",\r\n  //   color: \"#f44336\"\r\n};\r\n\r\nconst RaptorMarker = ({ found }) => {\r\n  const [bg, setBg] = useState(\"rgb(200,0,0)\");\r\n  useEffect(() => {\r\n    const startTime = Date.now();\r\n    let frame;\r\n    const animate = () => {\r\n      const diff = Date.now() - startTime;\r\n      const r = 200 + 40 * Math.sin(diff * 0.01);\r\n      const color = `rgb(${Math.floor(r)},0,0)`;\r\n      setBg(color);\r\n      if (!found) {\r\n        frame = requestAnimationFrame(animate);\r\n      } else {\r\n        cancelAnimationFrame(frame);\r\n      }\r\n    };\r\n    animate();\r\n    return () => cancelAnimationFrame(frame);\r\n  }, [found]);\r\n  return (\r\n    <div style={greatPlaceStyleHover}>\r\n      <Raptor\r\n        bg={found ? \"#7ffdcb\" : bg}\r\n        fill={`${found ? \"#FF0000\" : \"#FFFFFF\"}`}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RaptorMarker;\r\n","import React from \"react\";\r\n\r\nconst Smiler = ({ ...rest }) => {\r\n  return (\r\n    <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 400 400\" {...rest}>\r\n      <g>\r\n        <path\r\n          d=\"M210.51,51c81.3,0,147.57,66.36,147.35,147.56c-0.22,81.32-66.23,147.26-147.34,147.2\r\n\t\tc-81.38-0.07-147.64-66.42-147.35-147.55C63.47,116.8,129.33,51,210.51,51z M210.47,66.64C137.9,66.68,78.75,125.88,78.81,198.42\r\n\t\tc0.06,72.61,59.22,131.74,131.75,131.69c72.59-0.05,131.71-59.23,131.67-131.78C342.18,125.73,283.03,66.6,210.47,66.64z\"\r\n        />\r\n        <path\r\n          d=\"M208.63,299.23c-29.03-0.67-54.45-12.82-74-36.98c-3.39-4.18-3.2-8.59,0.34-11.6c3.61-3.07,8.17-2.44,11.7,1.9\r\n\t\tc12.38,15.19,27.92,25.44,47.25,28.96c31.58,5.75,58.31-3.18,79.44-27.76c1.25-1.45,2.47-3.08,4.06-4.05\r\n\t\tc3.09-1.89,7.18-0.92,9.53,1.85c2.49,2.94,2.85,6.86-0.07,9.94c-6.23,6.56-12.34,13.41-19.44,18.92\r\n\t\tC251.26,292.95,231.11,299.19,208.63,299.23z\"\r\n        />\r\n        <path\r\n          d=\"M125.31,175.16c-0.04-12.78,10.18-23.19,22.88-23.3c12.89-0.11,23.44,10.19,23.62,23.04\r\n\t\tc0.17,12.75-10.35,23.42-23.18,23.48C135.7,198.44,125.35,188.13,125.31,175.16z\"\r\n        />\r\n        <path\r\n          d=\"M295.73,175.25c-0.04,12.91-10.49,23.23-23.42,23.13c-12.66-0.1-23.05-10.55-23.08-23.22\r\n\t\tc-0.03-12.8,10.5-23.31,23.35-23.31C285.48,151.86,295.77,162.26,295.73,175.25z\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\nexport default Smiler;\r\n","import React, { useEffect } from \"react\";\r\nimport GoogleMapReact from \"google-map-react\";\r\nimport { MapContainer } from \"../styles/styles\";\r\nimport RaptorMarker from \"../markers/RaptorMarker\";\r\nimport whiteMap from \"../styles/whiteMap.json\";\r\nimport Smiler from \"../graphics/Smiler\";\r\n\r\nconst Map = ({ history, mapKey, markers, places }) => {\r\n  useEffect(() => {\r\n    const startTime = Date.now();\r\n    let frame;\r\n    const animate = () => {\r\n      const diff = Date.now() - startTime;\r\n      try {\r\n        const smiler = document.getElementById(\"smiler\");\r\n        smiler.style.opacity = Math.sin(diff);\r\n        frame = requestAnimationFrame(animate);\r\n      } catch {\r\n        cancelAnimationFrame(frame);\r\n      }\r\n    };\r\n\r\n    animate();\r\n  }, [markers]);\r\n\r\n  if (markers.length === 0) {\r\n    return (\r\n      <div>\r\n        <Smiler id=\"smiler\" style={{ fill: \"red\" }} />\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <MapContainer>\r\n      <GoogleMapReact\r\n        defaultCenter={places.ppark}\r\n        defaultZoom={17}\r\n        // bootstrapURLKeys={{ key: mapKey }}\r\n        options={{ styles: whiteMap }}\r\n        onChildClick={p => {\r\n          history.push(`/pop/${p}`);\r\n        }}\r\n      >\r\n        {markers.map(m => {\r\n          console.log(m.hash);\r\n          return (\r\n            <RaptorMarker\r\n              key={m.hash}\r\n              id={m.hash}\r\n              found={m.found}\r\n              lat={m.lat}\r\n              lng={m.lng}\r\n            />\r\n          );\r\n        })}\r\n      </GoogleMapReact>\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 10;\r\n`;\r\nconst Button = styled.button`\r\n  background: black;\r\n  color: white;\r\n  width: 100px;\r\n  height: 47px;\r\n  border: 5px solid white;\r\n  font-family: monospace;\r\n  font-weight: bolder;\r\n  opacity: 67%;\r\n`;\r\n\r\nconst Logout = ({ logout }) => {\r\n  return (\r\n    <Container onClick={logout}>\r\n      <Button>Logout</Button>\r\n    </Container>\r\n  );\r\n};\r\nexport default Logout;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { connectSocket, getMarkers, logOut } from \"../../actions\";\r\nimport Status from \"../Status\";\r\nimport Map from \"../../components/Map\";\r\nimport Logout from \"../../components/Logout\";\r\n\r\n// when the map socket connects it needs to update it's marker map\r\nconst MapView = ({\r\n  connected,\r\n  connectToSocket,\r\n  getMarkers,\r\n  history,\r\n  logout,\r\n  mapKey,\r\n  markers,\r\n  places\r\n}) => {\r\n  useEffect(() => {\r\n    if (connected) return;\r\n    connectToSocket();\r\n    //eslint-disable-next-line\r\n  }, [connectToSocket]);\r\n\r\n  useEffect(() => {\r\n    if (!connected) return;\r\n    getMarkers();\r\n  }, [connected, getMarkers]);\r\n  return (\r\n    <div>\r\n      <Status />\r\n      <Logout logout={logout} />\r\n      <Map\r\n        history={history}\r\n        mapKey={mapKey}\r\n        markers={markers}\r\n        places={places}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({\r\n  map: { mapKey, markers, places },\r\n  socket: { connected }\r\n}) => ({\r\n  connected,\r\n  mapKey,\r\n  markers,\r\n  places\r\n});\r\nconst mapDipstachToProps = dispatch => ({\r\n  connectToSocket: () => dispatch(connectSocket()),\r\n  getMarkers: () => dispatch(getMarkers()),\r\n  logout: () => dispatch(logOut()),\r\n  dispatch\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDipstachToProps)(MapView);\r\n","import React from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst modalStyle = {\r\n  position: \"fixed\",\r\n  left: 0,\r\n  top: 0,\r\n  bottom: 0,\r\n  right: 0,\r\n  backgroundColor: \"rgba(0,0,0,.4)\",\r\n  color: \"#FFF\",\r\n  fontSize: \"40px\"\r\n};\r\nconst Modal = ({ children, onClick }) => {\r\n  return createPortal(\r\n    <div style={modalStyle} onClick={onClick}>\r\n      {children}\r\n    </div>,\r\n    document.getElementById(\"modal_root\")\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Modal from \"../../components/Modal\";\r\nimport styled from \"styled-components\";\r\n\r\nconst ModalMessage = styled.div`\r\n  margin: auto;\r\n  background: ${props => props.background};\r\n  width: 60%;\r\n  display: block;\r\n  padding: 1rem;\r\n  max-height: ${props => `${props.maxHeight}px`};\r\n  overflow: hidden;\r\n  transition: max-height 1s, background 1s;\r\n`;\r\n\r\nconst Chodal = ({ history, match }) => {\r\n  const [maxHeight, setMaxHeight] = useState(0);\r\n  const [background, setBackground] = useState(\"red\");\r\n  useEffect(() => {\r\n    setMaxHeight(1000);\r\n  }, []);\r\n\r\n  return (\r\n    <Modal\r\n      onClick={() => {\r\n        setBackground(\"white\");\r\n        setMaxHeight(0);\r\n        setTimeout(() => history.goBack(), 1000);\r\n      }}\r\n    >\r\n      <ModalMessage background={background} maxHeight={maxHeight}>\r\n        {match.params.marker}\r\n      </ModalMessage>\r\n    </Modal>\r\n  );\r\n};\r\nexport default Chodal;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport MapView from \"./MapView\";\r\nimport { Route } from \"react-router-dom\";\r\nimport Chodal from \"./Chodal\";\r\n\r\nconst MainView = ({ history, match }) => {\r\n  return (\r\n    <div>\r\n      <Route\r\n        path={`${match.url}pop/:marker`}\r\n        render={({ match }) => <Chodal history={history} match={match} />}\r\n      />\r\n      <MapView history={history} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = dispatch => ({});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainView);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Raptor from \"../graphics/Raptor\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Message = styled.div`\r\n  color: red;\r\n  font-size: 54px;\r\n  text-align: center;\r\n  font-family: Arial;\r\n  text-shadow: 4px 3px black;\r\n`;\r\n\r\nconst Loading = ({ fill = \"white\", message }) => {\r\n  const [opacity, setOpacity] = useState(1);\r\n  useEffect(() => {\r\n    let frame;\r\n    const startTime = Date.now();\r\n    const animate = () => {\r\n      frame = requestAnimationFrame(animate);\r\n      const diff = Date.now() - startTime;\r\n      setOpacity(0.5 * (1.5 + Math.sin(diff * 0.003)));\r\n    };\r\n    animate();\r\n    return () => cancelAnimationFrame(frame);\r\n  }, []);\r\n  console.log(message);\r\n  return (\r\n    <div>\r\n      <Raptor opacity={opacity} fill={fill} />\r\n      <Message>{message}</Message>\r\n    </div>\r\n  );\r\n};\r\nexport default Loading;\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport { DEVICE_NOT_REGISTERED } from \"../statuses\";\r\nimport { Button, Input, ButtonContainer } from \"../styles/styles\";\r\nimport { newToken, registerDevice } from \"../actions\";\r\nimport { connect } from \"react-redux\";\r\nimport Loading from \"../animations/Loading\";\r\nimport { validateEmail } from \"../services/utils\";\r\nimport Smiler from \"../graphics/Smiler\";\r\n\r\nconst Registration = ({ getToken, hash, registerDevice, status, token }) => {\r\n  const [error, setError] = useState(\"\");\r\n  const email = useRef();\r\n\r\n  const register = () => {\r\n    if (email.current === \"\") return;\r\n    if (!validateEmail(email.current)) {\r\n      setError(\"This email is invalid...\");\r\n      return;\r\n    }\r\n    registerDevice(email.current);\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", e => {\r\n      if (e.keyCode === 13) {\r\n        register();\r\n      }\r\n    });\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  if (!hash) return <Loading />;\r\n\r\n  if (status === DEVICE_NOT_REGISTERED) {\r\n    const handleChange = e => (email.current = e.target.value);\r\n    return (\r\n      <ButtonContainer>\r\n        <Smiler style={{ width: \"35%\", margin: \"0 auto\" }} />\r\n        <div>hmm I don't recognize this device...</div>\r\n        <div>please sync it to your email</div>{\" \"}\r\n        <div\r\n          style={{\r\n            color: \"#f36060\",\r\n            display: error ? \"block\" : \"none\",\r\n            borderBottom: \"none\",\r\n            margin: \"7% auto -8%\",\r\n            textAlign: \"center\"\r\n          }}\r\n        >\r\n          {error}\r\n        </div>\r\n        <Input onChange={handleChange} name=\"email\" placeholder=\"email...\" />\r\n        <Button onClick={register}>Register</Button>\r\n      </ButtonContainer>\r\n    );\r\n  }\r\n\r\n  if (!token) {\r\n    return (\r\n      <ButtonContainer>\r\n        <Smiler style={{ width: \"35%\", margin: \"0 auto\", fill: \"#3ef3ff\" }} />\r\n        <div style={{ border: \"2px solid black\" }}>\r\n          <div>oh boy! welcome back :)</div>\r\n          <div>you are looking quite nice today</div>\r\n          <div>press connect below to sync</div>\r\n        </div>\r\n        <Button onClick={getToken}>Connect</Button>\r\n      </ButtonContainer>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = state => state.device;\r\nconst mapDispatchToProps = dispatch => ({\r\n  getToken: () => dispatch(newToken()),\r\n  registerDevice: email => dispatch(registerDevice(email))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Registration);\r\n","export function validateEmail(email) {\r\n  // eslint-disable-next-line\r\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  return re.test(String(email).toLowerCase());\r\n}\r\n","export const DEVICE_NOT_REGISTERED = \"device_not_registered\";\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Status from \"./containers/Status\";\r\nimport Scan from \"./containers/Scan\";\r\nimport { connect } from \"react-redux\";\r\nimport { newToken, registerDevice } from \"./actions\";\r\nimport MainView from \"./containers/MainView\";\r\nimport Registration from \"./containers/Registration\";\r\nimport { DEVICE_NOT_REGISTERED } from \"./statuses\";\r\nimport Loading from \"./animations/Loading\";\r\n\r\nfunction App({ error, hash, status, token, loading, welcome }) {\r\n  console.log(\"app\");\r\n  if (welcome) return <Loading fill={\"yellow\"} message={\"welcome!\"} />;\r\n  if (loading) return <Loading message={\"loading ...\"} />;\r\n  if (status === DEVICE_NOT_REGISTERED || !hash || !token) {\r\n    console.log(token, hash, status);\r\n    if (token) {\r\n      console.log(\"skipO\");\r\n    } else {\r\n      return <Registration hash={hash} token={token} status={status} />;\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <Route path=\"/status\" component={Status} />\r\n        <Route path=\"/code/:code\" component={Scan} />\r\n        <Route path=\"/\" component={MainView} />\r\n        <Route path=\"/\" render={() => <div>nope</div>} />\r\n      </Switch>\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({\r\n  device: { error, hash, status, token },\r\n  ui: { loading, welcome }\r\n}) => ({\r\n  error,\r\n  hash,\r\n  loading,\r\n  status,\r\n  token,\r\n  welcome\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  getToken: () => dispatch(newToken()),\r\n  registerDevice: () => dispatch(registerDevice())\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import { DEVICE_INIT, SET_TOKEN, ERROR, RESPONSE, LOGOUT } from \"../actions\";\r\n\r\nconst deviceState = {\r\n  hash: 0x0,\r\n  token: 0x0,\r\n  error: \"\",\r\n  response: \"\",\r\n  status: \"\"\r\n};\r\n\r\nconst device = (state = deviceState, action) => {\r\n  switch (action.type) {\r\n    case DEVICE_INIT:\r\n      const { hash } = action;\r\n      return { ...state, hash };\r\n    case SET_TOKEN:\r\n      const { token } = action;\r\n      return { ...state, token };\r\n    case LOGOUT:\r\n      return { ...state, token: 0x0 };\r\n    case ERROR:\r\n      const { message } = action;\r\n      return { ...state, error: message, status: message };\r\n    case RESPONSE:\r\n      const { response } = action;\r\n      return { ...state, response, status: response };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default device;\r\n","import { MAP_INIT, MAP_KEY } from \"../actions\";\r\n\r\nconst ppark = {\r\n  lat: 40.66257,\r\n  lng: -73.968564\r\n};\r\n\r\nconst mapState = {\r\n  places: { ppark },\r\n  mapKey: \"\",\r\n  markers: []\r\n};\r\n\r\n// init and update should be split\r\n\r\nconst map = (state = mapState, action) => {\r\n  switch (action.type) {\r\n    case MAP_INIT:\r\n      const { markers } = action;\r\n      console.log(markers);\r\n      return { ...state, markers };\r\n    case MAP_KEY:\r\n      const { mapKey } = action;\r\n      return { ...state, mapKey };\r\n    // case \"FOUND\":\r\n    //   const { name } = action;\r\n    //   const markers = state.markers.map(m => {\r\n    //     if (m.name === name) return { ...m, found: true };\r\n    //     return m;\r\n    //   });\r\n    // return { ...state, markers };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default map;\r\n","import { CONNECTING, CONNECTED, GET_MARKERS, LISTEN_TO } from \"../actions\";\r\n\r\nconst socketState = {\r\n  socket: null,\r\n  connected: false,\r\n  status: \"disconnected\",\r\n  listeners: []\r\n};\r\n\r\nconst socket = (state = socketState, action) => {\r\n  switch (action.type) {\r\n    case CONNECTING:\r\n      return { ...state, status: \"connecting...\" };\r\n    case CONNECTED:\r\n      const { socket } = action;\r\n      return { ...state, status: \"connected\", connected: true, socket };\r\n    case GET_MARKERS:\r\n      state.socket.emit(\"get_markers\");\r\n      return state;\r\n    case LISTEN_TO:\r\n      const { topic } = action;\r\n      return { ...state, listeners: [...state.listeners, topic] };\r\n    case \"SOCKET_MESSAGE\":\r\n      const { message } = action;\r\n      return { ...state, message };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default socket;\r\n","import { LOADING, READY, WELCOME } from \"../actions\";\r\n\r\nconst initialState = {\r\n  welcome: false,\r\n  loading: false\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case WELCOME:\r\n      return { ...state, welcome: true };\r\n    case LOADING:\r\n      return { ...state, loading: true };\r\n    case READY:\r\n      return { ...state, loading: false, welcome: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { combineReducers } from \"redux\";\r\nimport device from \"./device\";\r\nimport map from \"./map\";\r\nimport socket from \"./socket\";\r\nimport ui from \"./ui\";\r\n\r\nexport default combineReducers({ device, map, socket, ui });\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducers from \"./reducers\";\r\nimport { ERROR, BAD_TOKEN } from \"./actions\";\r\n\r\nconst peelError = ({ getState, dispatch }) => {\r\n  return next => action => {\r\n    console.log(action);\r\n    console.log(getState());\r\n    if (action.type === ERROR) {\r\n      // should this be error or message?\r\n      switch (action.error) {\r\n        case BAD_TOKEN:\r\n          localStorage.removeItem(\"token\");\r\n          break;\r\n        default:\r\n      }\r\n    }\r\n    next(action);\r\n  };\r\n};\r\n\r\nconst store = createStore(reducers, applyMiddleware(thunk, peelError));\r\n\r\nexport default store;\r\n// what is the balance between monotony and bliss\r\n// what is the need to be differentiated in particular settings and ways\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport store from \"./store\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport { HashRouter as Router } from \"react-router-dom\";\r\nimport { deviceInit, WELCOME, MAP_KEY, SET_TOKEN } from \"./actions\";\r\n\r\nimport { AES, enc } from \"crypto-js\";\r\n\r\nconst token = localStorage.getItem(\"token\");\r\nif (!token) {\r\n  store.dispatch({ type: WELCOME });\r\n  store.dispatch(deviceInit());\r\n} else {\r\n  store.dispatch({ type: SET_TOKEN, token });\r\n}\r\n\r\nconst bytes = AES.decrypt(process.env.REACT_APP_MAP_KEY, \"ilovefroggy\");\r\nconst mapKey = bytes.toString(enc.Utf8);\r\nstore.dispatch({ type: MAP_KEY, mapKey });\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <Router basename=\"/\">\r\n      <App />\r\n    </Router>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}